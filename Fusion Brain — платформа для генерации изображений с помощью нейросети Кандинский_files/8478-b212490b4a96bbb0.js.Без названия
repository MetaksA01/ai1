(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8478],{40487:function(t){var e={utf8:{stringToBytes:function(t){return e.bin.stringToBytes(unescape(encodeURIComponent(t)))},bytesToString:function(t){return decodeURIComponent(escape(e.bin.bytesToString(t)))}},bin:{stringToBytes:function(t){for(var e=[],r=0;r<t.length;r++)e.push(255&t.charCodeAt(r));return e},bytesToString:function(t){for(var e=[],r=0;r<t.length;r++)e.push(String.fromCharCode(t[r]));return e.join("")}}};t.exports=e},71012:function(t){var e,r;e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r={rotl:function(t,e){return t<<e|t>>>32-e},rotr:function(t,e){return t<<32-e|t>>>e},endian:function(t){if(t.constructor==Number)return 16711935&r.rotl(t,8)|4278255360&r.rotl(t,24);for(var e=0;e<t.length;e++)t[e]=r.endian(t[e]);return t},randomBytes:function(t){for(var e=[];t>0;t--)e.push(Math.floor(256*Math.random()));return e},bytesToWords:function(t){for(var e=[],r=0,i=0;r<t.length;r++,i+=8)e[i>>>5]|=t[r]<<24-i%32;return e},wordsToBytes:function(t){for(var e=[],r=0;r<32*t.length;r+=8)e.push(t[r>>>5]>>>24-r%32&255);return e},bytesToHex:function(t){for(var e=[],r=0;r<t.length;r++)e.push((t[r]>>>4).toString(16)),e.push((15&t[r]).toString(16));return e.join("")},hexToBytes:function(t){for(var e=[],r=0;r<t.length;r+=2)e.push(parseInt(t.substr(r,2),16));return e},bytesToBase64:function(t){for(var r=[],i=0;i<t.length;i+=3)for(var a=t[i]<<16|t[i+1]<<8|t[i+2],n=0;n<4;n++)8*i+6*n<=8*t.length?r.push(e.charAt(a>>>6*(3-n)&63)):r.push("=");return r.join("")},base64ToBytes:function(t){t=t.replace(/[^A-Z0-9+\/]/ig,"");for(var r=[],i=0,a=0;i<t.length;a=++i%4)0!=a&&r.push((e.indexOf(t.charAt(i-1))&Math.pow(2,-2*a+8)-1)<<2*a|e.indexOf(t.charAt(i))>>>6-2*a);return r}},t.exports=r},48738:function(t){function e(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */t.exports=function(t){return null!=t&&(e(t)||"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&e(t.slice(0,0))||!!t._isBuffer)}},55733:function(t,e,r){var i=r(48764).lW,a=r(34155);t.exports=(function t(e,r,i){function a(s,o){if(!r[s]){if(!e[s]){if(n)return n(s,!0);var h=Error("Cannot find module '"+s+"'");throw h.code="MODULE_NOT_FOUND",h}var l=r[s]={exports:{}};e[s][0].call(l.exports,function(t){return a(e[s][1][t]||t)},l,l.exports,t,e,r,i)}return r[s].exports}for(var n=void 0,s=0;s<i.length;s++)a(i[s]);return a})({1:[function(t,e,r){"use strict";var i=t("./utils"),a=t("./support"),n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.encode=function(t){for(var e,r,a,s,o,h,l,d=[],c=0,u=t.length,f=u,g="string"!==i.getTypeOf(t);c<t.length;)f=u-c,a=g?(e=t[c++],r=c<u?t[c++]:0,c<u?t[c++]:0):(e=t.charCodeAt(c++),r=c<u?t.charCodeAt(c++):0,c<u?t.charCodeAt(c++):0),s=e>>2,o=(3&e)<<4|r>>4,h=1<f?(15&r)<<2|a>>6:64,l=2<f?63&a:64,d.push(n.charAt(s)+n.charAt(o)+n.charAt(h)+n.charAt(l));return d.join("")},r.decode=function(t){var e,r,i,s,o,h,l=0,d=0,c="data:";if(t.substr(0,c.length)===c)throw Error("Invalid base64 input, it looks like a data url.");var u,f=3*(t=t.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(t.charAt(t.length-1)===n.charAt(64)&&f--,t.charAt(t.length-2)===n.charAt(64)&&f--,f%1!=0)throw Error("Invalid base64 input, bad content length.");for(u=a.uint8array?new Uint8Array(0|f):Array(0|f);l<t.length;)e=n.indexOf(t.charAt(l++))<<2|(s=n.indexOf(t.charAt(l++)))>>4,r=(15&s)<<4|(o=n.indexOf(t.charAt(l++)))>>2,i=(3&o)<<6|(h=n.indexOf(t.charAt(l++))),u[d++]=e,64!==o&&(u[d++]=r),64!==h&&(u[d++]=i);return u}},{"./support":30,"./utils":32}],2:[function(t,e,r){"use strict";var i=t("./external"),a=t("./stream/DataWorker"),n=t("./stream/Crc32Probe"),s=t("./stream/DataLengthProbe");function o(t,e,r,i,a){this.compressedSize=t,this.uncompressedSize=e,this.crc32=r,this.compression=i,this.compressedContent=a}o.prototype={getContentWorker:function(){var t=new a(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new s("data_length")),e=this;return t.on("end",function(){if(this.streamInfo.data_length!==e.uncompressedSize)throw Error("Bug : uncompressed data size mismatch")}),t},getCompressedWorker:function(){return new a(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},o.createWorkerFrom=function(t,e,r){return t.pipe(new n).pipe(new s("uncompressedSize")).pipe(e.compressWorker(r)).pipe(new s("compressedSize")).withStreamInfo("compression",e)},e.exports=o},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,e,r){"use strict";var i=t("./stream/GenericWorker");r.STORE={magic:"\x00\x00",compressWorker:function(){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},r.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,e,r){"use strict";var i=t("./utils"),a=function(){for(var t,e=[],r=0;r<256;r++){t=r;for(var i=0;i<8;i++)t=1&t?3988292384^t>>>1:t>>>1;e[r]=t}return e}();e.exports=function(t,e){return void 0!==t&&t.length?"string"!==i.getTypeOf(t)?function(t,e,r,i){var n=i+r;t^=-1;for(var s=i;s<n;s++)t=t>>>8^a[255&(t^e[s])];return -1^t}(0|e,t,t.length,0):function(t,e,r,i){var n=i+r;t^=-1;for(var s=i;s<n;s++)t=t>>>8^a[255&(t^e.charCodeAt(s))];return -1^t}(0|e,t,t.length,0):0}},{"./utils":32}],5:[function(t,e,r){"use strict";r.base64=!1,r.binary=!1,r.dir=!1,r.createFolders=!0,r.date=null,r.compression=null,r.compressionOptions=null,r.comment=null,r.unixPermissions=null,r.dosPermissions=null},{}],6:[function(t,e,r){"use strict";var i=null;i="undefined"!=typeof Promise?Promise:t("lie"),e.exports={Promise:i}},{lie:37}],7:[function(t,e,r){"use strict";var i="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,a=t("pako"),n=t("./utils"),s=t("./stream/GenericWorker"),o=i?"uint8array":"array";function h(t,e){s.call(this,"FlateWorker/"+t),this._pako=null,this._pakoAction=t,this._pakoOptions=e,this.meta={}}r.magic="\b\x00",n.inherits(h,s),h.prototype.processChunk=function(t){this.meta=t.meta,null===this._pako&&this._createPako(),this._pako.push(n.transformTo(o,t.data),!1)},h.prototype.flush=function(){s.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},h.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this._pako=null},h.prototype._createPako=function(){this._pako=new a[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var t=this;this._pako.onData=function(e){t.push({data:e,meta:t.meta})}},r.compressWorker=function(t){return new h("Deflate",t)},r.uncompressWorker=function(){return new h("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,e,r){"use strict";function i(t,e){var r,i="";for(r=0;r<e;r++)i+=String.fromCharCode(255&t),t>>>=8;return i}function a(t,e,r,a,s,d){var c,u,f,g,p=t.file,m=t.compression,v=d!==o.utf8encode,_=n.transformTo("string",d(p.name)),y=n.transformTo("string",o.utf8encode(p.name)),b=p.comment,x=n.transformTo("string",d(b)),w=n.transformTo("string",o.utf8encode(b)),S=y.length!==p.name.length,C=w.length!==b.length,k="",A="",P="",T=p.dir,F=p.date,E={crc32:0,compressedSize:0,uncompressedSize:0};e&&!r||(E.crc32=t.crc32,E.compressedSize=t.compressedSize,E.uncompressedSize=t.uncompressedSize);var R=0;e&&(R|=8),!v&&(S||C)&&(R|=2048);var O=0,D=0;T&&(O|=16),"UNIX"===s?(D=798,O|=(u=c=p.unixPermissions,c||(u=T?16893:33204),(65535&u)<<16)):(D=20,O|=63&(p.dosPermissions||0)),f=(F.getUTCHours()<<6|F.getUTCMinutes())<<5|F.getUTCSeconds()/2,g=(F.getUTCFullYear()-1980<<4|F.getUTCMonth()+1)<<5|F.getUTCDate(),S&&(A=i(1,1)+i(h(_),4)+y,k+="up"+i(A.length,2)+A),C&&(P=i(1,1)+i(h(x),4)+w,k+="uc"+i(P.length,2)+P);var M="";return M+="\n\x00"+i(R,2)+m.magic+i(f,2)+i(g,2)+i(E.crc32,4)+i(E.compressedSize,4)+i(E.uncompressedSize,4)+i(_.length,2)+i(k.length,2),{fileRecord:l.LOCAL_FILE_HEADER+M+_+k,dirRecord:l.CENTRAL_FILE_HEADER+i(D,2)+M+i(x.length,2)+"\x00\x00\x00\x00"+i(O,4)+i(a,4)+_+k+x}}var n=t("../utils"),s=t("../stream/GenericWorker"),o=t("../utf8"),h=t("../crc32"),l=t("../signature");function d(t,e,r,i){s.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=e,this.zipPlatform=r,this.encodeFileName=i,this.streamFiles=t,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}n.inherits(d,s),d.prototype.push=function(t){var e=t.meta.percent||0,r=this.entriesCount,i=this._sources.length;this.accumulate?this.contentBuffer.push(t):(this.bytesWritten+=t.data.length,s.prototype.push.call(this,{data:t.data,meta:{currentFile:this.currentFile,percent:r?(e+100*(r-i-1))/r:100}}))},d.prototype.openedSource=function(t){this.currentSourceOffset=this.bytesWritten,this.currentFile=t.file.name;var e=this.streamFiles&&!t.file.dir;if(e){var r=a(t,e,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:r.fileRecord,meta:{percent:0}})}else this.accumulate=!0},d.prototype.closedSource=function(t){this.accumulate=!1;var e=this.streamFiles&&!t.file.dir,r=a(t,e,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(r.dirRecord),e)this.push({data:l.DATA_DESCRIPTOR+i(t.crc32,4)+i(t.compressedSize,4)+i(t.uncompressedSize,4),meta:{percent:100}});else for(this.push({data:r.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},d.prototype.flush=function(){for(var t,e,r,a,s=this.bytesWritten,o=0;o<this.dirRecords.length;o++)this.push({data:this.dirRecords[o],meta:{percent:100}});var h=this.bytesWritten-s,d=(t=this.dirRecords.length,e=this.zipComment,r=this.encodeFileName,a=n.transformTo("string",r(e)),l.CENTRAL_DIRECTORY_END+"\x00\x00\x00\x00"+i(t,2)+i(t,2)+i(h,4)+i(s,4)+i(a.length,2)+a);this.push({data:d,meta:{percent:100}})},d.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},d.prototype.registerPrevious=function(t){this._sources.push(t);var e=this;return t.on("data",function(t){e.processChunk(t)}),t.on("end",function(){e.closedSource(e.previous.streamInfo),e._sources.length?e.prepareNextSource():e.end()}),t.on("error",function(t){e.error(t)}),this},d.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},d.prototype.error=function(t){var e=this._sources;if(!s.prototype.error.call(this,t))return!1;for(var r=0;r<e.length;r++)try{e[r].error(t)}catch(t){}return!0},d.prototype.lock=function(){s.prototype.lock.call(this);for(var t=this._sources,e=0;e<t.length;e++)t[e].lock()},e.exports=d},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,e,r){"use strict";var i=t("../compressions"),a=t("./ZipFileWorker");r.generateWorker=function(t,e,r){var n=new a(e.streamFiles,r,e.platform,e.encodeFileName),s=0;try{t.forEach(function(t,r){s++;var a=function(t,e){var r=t||e,a=i[r];if(!a)throw Error(r+" is not a valid compression method !");return a}(r.options.compression,e.compression),o=r.options.compressionOptions||e.compressionOptions||{},h=r.dir,l=r.date;r._compressWorker(a,o).withStreamInfo("file",{name:t,dir:h,date:l,comment:r.comment||"",unixPermissions:r.unixPermissions,dosPermissions:r.dosPermissions}).pipe(n)}),n.entriesCount=s}catch(t){n.error(t)}return n}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,e,r){"use strict";function i(){if(!(this instanceof i))return new i;if(arguments.length)throw Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var t=new i;for(var e in this)"function"!=typeof this[e]&&(t[e]=this[e]);return t}}(i.prototype=t("./object")).loadAsync=t("./load"),i.support=t("./support"),i.defaults=t("./defaults"),i.version="3.10.1",i.loadAsync=function(t,e){return(new i).loadAsync(t,e)},i.external=t("./external"),e.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,e,r){"use strict";var i=t("./utils"),a=t("./external"),n=t("./utf8"),s=t("./zipEntries"),o=t("./stream/Crc32Probe"),h=t("./nodejsUtils");e.exports=function(t,e){var r=this;return e=i.extend(e||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:n.utf8decode}),h.isNode&&h.isStream(t)?a.Promise.reject(Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",t,!0,e.optimizedBinaryString,e.base64).then(function(t){var r=new s(e);return r.load(t),r}).then(function(t){var r=[a.Promise.resolve(t)],i=t.files;if(e.checkCRC32)for(var n=0;n<i.length;n++)r.push(function(t){return new a.Promise(function(e,r){var i=t.decompressed.getContentWorker().pipe(new o);i.on("error",function(t){r(t)}).on("end",function(){i.streamInfo.crc32!==t.decompressed.crc32?r(Error("Corrupted zip : CRC32 mismatch")):e()}).resume()})}(i[n]));return a.Promise.all(r)}).then(function(t){for(var a=t.shift(),n=a.files,s=0;s<n.length;s++){var o=n[s],h=o.fileNameStr,l=i.resolve(o.fileNameStr);r.file(l,o.decompressed,{binary:!0,optimizedBinaryString:!0,date:o.date,dir:o.dir,comment:o.fileCommentStr.length?o.fileCommentStr:null,unixPermissions:o.unixPermissions,dosPermissions:o.dosPermissions,createFolders:e.createFolders}),o.dir||(r.file(l).unsafeOriginalName=h)}return a.zipComment.length&&(r.comment=a.zipComment),r})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,e,r){"use strict";var i=t("../utils"),a=t("../stream/GenericWorker");function n(t,e){a.call(this,"Nodejs stream input adapter for "+t),this._upstreamEnded=!1,this._bindStream(e)}i.inherits(n,a),n.prototype._bindStream=function(t){var e=this;(this._stream=t).pause(),t.on("data",function(t){e.push({data:t,meta:{percent:0}})}).on("error",function(t){e.isPaused?this.generatedError=t:e.error(t)}).on("end",function(){e.isPaused?e._upstreamEnded=!0:e.end()})},n.prototype.pause=function(){return!!a.prototype.pause.call(this)&&(this._stream.pause(),!0)},n.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},e.exports=n},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,e,r){"use strict";var i=t("readable-stream").Readable;function a(t,e,r){i.call(this,e),this._helper=t;var a=this;t.on("data",function(t,e){a.push(t)||a._helper.pause(),r&&r(e)}).on("error",function(t){a.emit("error",t)}).on("end",function(){a.push(null)})}t("../utils").inherits(a,i),a.prototype._read=function(){this._helper.resume()},e.exports=a},{"../utils":32,"readable-stream":16}],14:[function(t,e,r){"use strict";e.exports={isNode:void 0!==i,newBufferFrom:function(t,e){if(i.from&&i.from!==Uint8Array.from)return i.from(t,e);if("number"==typeof t)throw Error('The "data" argument must not be a number');return new i(t,e)},allocBuffer:function(t){if(i.alloc)return i.alloc(t);var e=new i(t);return e.fill(0),e},isBuffer:function(t){return i.isBuffer(t)},isStream:function(t){return t&&"function"==typeof t.on&&"function"==typeof t.pause&&"function"==typeof t.resume}}},{}],15:[function(t,e,r){"use strict";function i(t,e,r){var i,a=n.getTypeOf(e),o=n.extend(r||{},h);o.date=o.date||new Date,null!==o.compression&&(o.compression=o.compression.toUpperCase()),"string"==typeof o.unixPermissions&&(o.unixPermissions=parseInt(o.unixPermissions,8)),o.unixPermissions&&16384&o.unixPermissions&&(o.dir=!0),o.dosPermissions&&16&o.dosPermissions&&(o.dir=!0),o.dir&&(t=p(t)),o.createFolders&&(i=g(t))&&m.call(this,i,!0);var c="string"===a&&!1===o.binary&&!1===o.base64;r&&void 0!==r.binary||(o.binary=!c),(e instanceof l&&0===e.uncompressedSize||o.dir||!e||0===e.length)&&(o.base64=!1,o.binary=!0,e="",o.compression="STORE",a="string");var v=null;v=e instanceof l||e instanceof s?e:u.isNode&&u.isStream(e)?new f(t,e):n.prepareContent(t,e,o.binary,o.optimizedBinaryString,o.base64);var _=new d(t,v,o);this.files[t]=_}var a=t("./utf8"),n=t("./utils"),s=t("./stream/GenericWorker"),o=t("./stream/StreamHelper"),h=t("./defaults"),l=t("./compressedObject"),d=t("./zipObject"),c=t("./generate"),u=t("./nodejsUtils"),f=t("./nodejs/NodejsStreamInputAdapter"),g=function(t){"/"===t.slice(-1)&&(t=t.substring(0,t.length-1));var e=t.lastIndexOf("/");return 0<e?t.substring(0,e):""},p=function(t){return"/"!==t.slice(-1)&&(t+="/"),t},m=function(t,e){return e=void 0!==e?e:h.createFolders,t=p(t),this.files[t]||i.call(this,t,null,{dir:!0,createFolders:e}),this.files[t]};function v(t){return"[object RegExp]"===Object.prototype.toString.call(t)}e.exports={load:function(){throw Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(t){var e,r,i;for(e in this.files)i=this.files[e],(r=e.slice(this.root.length,e.length))&&e.slice(0,this.root.length)===this.root&&t(r,i)},filter:function(t){var e=[];return this.forEach(function(r,i){t(r,i)&&e.push(i)}),e},file:function(t,e,r){if(1!=arguments.length)return t=this.root+t,i.call(this,t,e,r),this;if(v(t)){var a=t;return this.filter(function(t,e){return!e.dir&&a.test(t)})}var n=this.files[this.root+t];return n&&!n.dir?n:null},folder:function(t){if(!t)return this;if(v(t))return this.filter(function(e,r){return r.dir&&t.test(e)});var e=this.root+t,r=m.call(this,e),i=this.clone();return i.root=r.name,i},remove:function(t){t=this.root+t;var e=this.files[t];if(e||("/"!==t.slice(-1)&&(t+="/"),e=this.files[t]),e&&!e.dir)delete this.files[t];else for(var r=this.filter(function(e,r){return r.name.slice(0,t.length)===t}),i=0;i<r.length;i++)delete this.files[r[i].name];return this},generate:function(){throw Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(t){var e,r={};try{if((r=n.extend(t||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:a.utf8encode})).type=r.type.toLowerCase(),r.compression=r.compression.toUpperCase(),"binarystring"===r.type&&(r.type="string"),!r.type)throw Error("No output type specified.");n.checkSupport(r.type),"darwin"!==r.platform&&"freebsd"!==r.platform&&"linux"!==r.platform&&"sunos"!==r.platform||(r.platform="UNIX"),"win32"===r.platform&&(r.platform="DOS");var i=r.comment||this.comment||"";e=c.generateWorker(this,r,i)}catch(t){(e=new s("error")).error(t)}return new o(e,r.type||"string",r.mimeType)},generateAsync:function(t,e){return this.generateInternalStream(t).accumulate(e)},generateNodeStream:function(t,e){return(t=t||{}).type||(t.type="nodebuffer"),this.generateInternalStream(t).toNodejsStream(e)}}},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,e,r){"use strict";e.exports=t("stream")},{stream:void 0}],17:[function(t,e,r){"use strict";var i=t("./DataReader");function a(t){i.call(this,t);for(var e=0;e<this.data.length;e++)t[e]=255&t[e]}t("../utils").inherits(a,i),a.prototype.byteAt=function(t){return this.data[this.zero+t]},a.prototype.lastIndexOfSignature=function(t){for(var e=t.charCodeAt(0),r=t.charCodeAt(1),i=t.charCodeAt(2),a=t.charCodeAt(3),n=this.length-4;0<=n;--n)if(this.data[n]===e&&this.data[n+1]===r&&this.data[n+2]===i&&this.data[n+3]===a)return n-this.zero;return -1},a.prototype.readAndCheckSignature=function(t){var e=t.charCodeAt(0),r=t.charCodeAt(1),i=t.charCodeAt(2),a=t.charCodeAt(3),n=this.readData(4);return e===n[0]&&r===n[1]&&i===n[2]&&a===n[3]},a.prototype.readData=function(t){if(this.checkOffset(t),0===t)return[];var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=a},{"../utils":32,"./DataReader":18}],18:[function(t,e,r){"use strict";var i=t("../utils");function a(t){this.data=t,this.length=t.length,this.index=0,this.zero=0}a.prototype={checkOffset:function(t){this.checkIndex(this.index+t)},checkIndex:function(t){if(this.length<this.zero+t||t<0)throw Error("End of data reached (data length = "+this.length+", asked index = "+t+"). Corrupted zip ?")},setIndex:function(t){this.checkIndex(t),this.index=t},skip:function(t){this.setIndex(this.index+t)},byteAt:function(){},readInt:function(t){var e,r=0;for(this.checkOffset(t),e=this.index+t-1;e>=this.index;e--)r=(r<<8)+this.byteAt(e);return this.index+=t,r},readString:function(t){return i.transformTo("string",this.readData(t))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var t=this.readInt(4);return new Date(Date.UTC(1980+(t>>25&127),(t>>21&15)-1,t>>16&31,t>>11&31,t>>5&63,(31&t)<<1))}},e.exports=a},{"../utils":32}],19:[function(t,e,r){"use strict";var i=t("./Uint8ArrayReader");function a(t){i.call(this,t)}t("../utils").inherits(a,i),a.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=a},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,e,r){"use strict";var i=t("./DataReader");function a(t){i.call(this,t)}t("../utils").inherits(a,i),a.prototype.byteAt=function(t){return this.data.charCodeAt(this.zero+t)},a.prototype.lastIndexOfSignature=function(t){return this.data.lastIndexOf(t)-this.zero},a.prototype.readAndCheckSignature=function(t){return t===this.readData(4)},a.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=a},{"../utils":32,"./DataReader":18}],21:[function(t,e,r){"use strict";var i=t("./ArrayReader");function a(t){i.call(this,t)}t("../utils").inherits(a,i),a.prototype.readData=function(t){if(this.checkOffset(t),0===t)return new Uint8Array(0);var e=this.data.subarray(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=a},{"../utils":32,"./ArrayReader":17}],22:[function(t,e,r){"use strict";var i=t("../utils"),a=t("../support"),n=t("./ArrayReader"),s=t("./StringReader"),o=t("./NodeBufferReader"),h=t("./Uint8ArrayReader");e.exports=function(t){var e=i.getTypeOf(t);return i.checkSupport(e),"string"!==e||a.uint8array?"nodebuffer"===e?new o(t):a.uint8array?new h(i.transformTo("uint8array",t)):new n(i.transformTo("array",t)):new s(t)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,e,r){"use strict";r.LOCAL_FILE_HEADER="PK\x03\x04",r.CENTRAL_FILE_HEADER="PK\x01\x02",r.CENTRAL_DIRECTORY_END="PK\x05\x06",r.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x06\x07",r.ZIP64_CENTRAL_DIRECTORY_END="PK\x06\x06",r.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(t,e,r){"use strict";var i=t("./GenericWorker"),a=t("../utils");function n(t){i.call(this,"ConvertWorker to "+t),this.destType=t}a.inherits(n,i),n.prototype.processChunk=function(t){this.push({data:a.transformTo(this.destType,t.data),meta:t.meta})},e.exports=n},{"../utils":32,"./GenericWorker":28}],25:[function(t,e,r){"use strict";var i=t("./GenericWorker"),a=t("../crc32");function n(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(n,i),n.prototype.processChunk=function(t){this.streamInfo.crc32=a(t.data,this.streamInfo.crc32||0),this.push(t)},e.exports=n},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,e,r){"use strict";var i=t("../utils"),a=t("./GenericWorker");function n(t){a.call(this,"DataLengthProbe for "+t),this.propName=t,this.withStreamInfo(t,0)}i.inherits(n,a),n.prototype.processChunk=function(t){if(t){var e=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=e+t.data.length}a.prototype.processChunk.call(this,t)},e.exports=n},{"../utils":32,"./GenericWorker":28}],27:[function(t,e,r){"use strict";var i=t("../utils"),a=t("./GenericWorker");function n(t){a.call(this,"DataWorker");var e=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,t.then(function(t){e.dataIsReady=!0,e.data=t,e.max=t&&t.length||0,e.type=i.getTypeOf(t),e.isPaused||e._tickAndRepeat()},function(t){e.error(t)})}i.inherits(n,a),n.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this.data=null},n.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},n.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},n.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var t=null,e=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":t=this.data.substring(this.index,e);break;case"uint8array":t=this.data.subarray(this.index,e);break;case"array":case"nodebuffer":t=this.data.slice(this.index,e)}return this.index=e,this.push({data:t,meta:{percent:this.max?this.index/this.max*100:0}})},e.exports=n},{"../utils":32,"./GenericWorker":28}],28:[function(t,e,r){"use strict";function i(t){this.name=t||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(t){this.emit("data",t)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(t){this.emit("error",t)}return!0},error:function(t){return!this.isFinished&&(this.isPaused?this.generatedError=t:(this.isFinished=!0,this.emit("error",t),this.previous&&this.previous.error(t),this.cleanUp()),!0)},on:function(t,e){return this._listeners[t].push(e),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(t,e){if(this._listeners[t])for(var r=0;r<this._listeners[t].length;r++)this._listeners[t][r].call(this,e)},pipe:function(t){return t.registerPrevious(this)},registerPrevious:function(t){if(this.isLocked)throw Error("The stream '"+this+"' has already been used.");this.streamInfo=t.streamInfo,this.mergeStreamInfo(),this.previous=t;var e=this;return t.on("data",function(t){e.processChunk(t)}),t.on("end",function(){e.end()}),t.on("error",function(t){e.error(t)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var t=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),t=!0),this.previous&&this.previous.resume(),!t},flush:function(){},processChunk:function(t){this.push(t)},withStreamInfo:function(t,e){return this.extraStreamInfo[t]=e,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var t in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,t)&&(this.streamInfo[t]=this.extraStreamInfo[t])},lock:function(){if(this.isLocked)throw Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var t="Worker "+this.name;return this.previous?this.previous+" -> "+t:t}},e.exports=i},{}],29:[function(t,e,r){"use strict";var a=t("../utils"),n=t("./ConvertWorker"),s=t("./GenericWorker"),o=t("../base64"),h=t("../support"),l=t("../external"),d=null;if(h.nodestream)try{d=t("../nodejs/NodejsStreamOutputAdapter")}catch(t){}function c(t,e,r){var i=e;switch(e){case"blob":case"arraybuffer":i="uint8array";break;case"base64":i="string"}try{this._internalType=i,this._outputType=e,this._mimeType=r,a.checkSupport(i),this._worker=t.pipe(new n(i)),t.lock()}catch(t){this._worker=new s("error"),this._worker.error(t)}}c.prototype={accumulate:function(t){var e;return e=this,new l.Promise(function(r,n){var s=[],h=e._internalType,l=e._outputType,d=e._mimeType;e.on("data",function(e,r){s.push(e),t&&t(r)}).on("error",function(t){s=[],n(t)}).on("end",function(){try{var t=function(t,e,r){switch(t){case"blob":return a.newBlob(a.transformTo("arraybuffer",e),r);case"base64":return o.encode(e);default:return a.transformTo(t,e)}}(l,function(t,e){var r,a=0,n=null,s=0;for(r=0;r<e.length;r++)s+=e[r].length;switch(t){case"string":return e.join("");case"array":return Array.prototype.concat.apply([],e);case"uint8array":for(n=new Uint8Array(s),r=0;r<e.length;r++)n.set(e[r],a),a+=e[r].length;return n;case"nodebuffer":return i.concat(e);default:throw Error("concat : unsupported type '"+t+"'")}}(h,s),d);r(t)}catch(t){n(t)}s=[]}).resume()})},on:function(t,e){var r=this;return"data"===t?this._worker.on(t,function(t){e.call(r,t.data,t.meta)}):this._worker.on(t,function(){a.delay(e,arguments,r)}),this},resume:function(){return a.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(t){if(a.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw Error(this._outputType+" is not supported by this method");return new d(this,{objectMode:"nodebuffer"!==this._outputType},t)}},e.exports=c},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,e,r){"use strict";if(r.base64=!0,r.array=!0,r.string=!0,r.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,r.nodebuffer=void 0!==i,r.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)r.blob=!1;else{var a=new ArrayBuffer(0);try{r.blob=0===new Blob([a],{type:"application/zip"}).size}catch(t){try{var n=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);n.append(a),r.blob=0===n.getBlob("application/zip").size}catch(t){r.blob=!1}}}try{r.nodestream=!!t("readable-stream").Readable}catch(t){r.nodestream=!1}},{"readable-stream":16}],31:[function(t,e,r){"use strict";for(var i=t("./utils"),a=t("./support"),n=t("./nodejsUtils"),s=t("./stream/GenericWorker"),o=Array(256),h=0;h<256;h++)o[h]=252<=h?6:248<=h?5:240<=h?4:224<=h?3:192<=h?2:1;function l(){s.call(this,"utf-8 decode"),this.leftOver=null}function d(){s.call(this,"utf-8 encode")}o[254]=o[254]=1,r.utf8encode=function(t){return a.nodebuffer?n.newBufferFrom(t,"utf-8"):function(t){var e,r,i,n,s,o=t.length,h=0;for(n=0;n<o;n++)55296==(64512&(r=t.charCodeAt(n)))&&n+1<o&&56320==(64512&(i=t.charCodeAt(n+1)))&&(r=65536+(r-55296<<10)+(i-56320),n++),h+=r<128?1:r<2048?2:r<65536?3:4;for(e=a.uint8array?new Uint8Array(h):Array(h),n=s=0;s<h;n++)55296==(64512&(r=t.charCodeAt(n)))&&n+1<o&&56320==(64512&(i=t.charCodeAt(n+1)))&&(r=65536+(r-55296<<10)+(i-56320),n++),r<128?e[s++]=r:(r<2048?e[s++]=192|r>>>6:(r<65536?e[s++]=224|r>>>12:(e[s++]=240|r>>>18,e[s++]=128|r>>>12&63),e[s++]=128|r>>>6&63),e[s++]=128|63&r);return e}(t)},r.utf8decode=function(t){return a.nodebuffer?i.transformTo("nodebuffer",t).toString("utf-8"):function(t){var e,r,a,n,s=t.length,h=Array(2*s);for(e=r=0;e<s;)if((a=t[e++])<128)h[r++]=a;else if(4<(n=o[a]))h[r++]=65533,e+=n-1;else{for(a&=2===n?31:3===n?15:7;1<n&&e<s;)a=a<<6|63&t[e++],n--;1<n?h[r++]=65533:a<65536?h[r++]=a:(a-=65536,h[r++]=55296|a>>10&1023,h[r++]=56320|1023&a)}return h.length!==r&&(h.subarray?h=h.subarray(0,r):h.length=r),i.applyFromCharCode(h)}(t=i.transformTo(a.uint8array?"uint8array":"array",t))},i.inherits(l,s),l.prototype.processChunk=function(t){var e=i.transformTo(a.uint8array?"uint8array":"array",t.data);if(this.leftOver&&this.leftOver.length){if(a.uint8array){var n=e;(e=new Uint8Array(n.length+this.leftOver.length)).set(this.leftOver,0),e.set(n,this.leftOver.length)}else e=this.leftOver.concat(e);this.leftOver=null}var s=function(t,e){var r;for((e=e||t.length)>t.length&&(e=t.length),r=e-1;0<=r&&128==(192&t[r]);)r--;return r<0?e:0===r?e:r+o[t[r]]>e?r:e}(e),h=e;s!==e.length&&(a.uint8array?(h=e.subarray(0,s),this.leftOver=e.subarray(s,e.length)):(h=e.slice(0,s),this.leftOver=e.slice(s,e.length))),this.push({data:r.utf8decode(h),meta:t.meta})},l.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:r.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},r.Utf8DecodeWorker=l,i.inherits(d,s),d.prototype.processChunk=function(t){this.push({data:r.utf8encode(t.data),meta:t.meta})},r.Utf8EncodeWorker=d},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,e,r){"use strict";var i=t("./support"),a=t("./base64"),n=t("./nodejsUtils"),s=t("./external");function o(t){return t}function h(t,e){for(var r=0;r<t.length;++r)e[r]=255&t.charCodeAt(r);return e}t("setimmediate"),r.newBlob=function(t,e){r.checkSupport("blob");try{return new Blob([t],{type:e})}catch(r){try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return i.append(t),i.getBlob(e)}catch(t){throw Error("Bug : can't construct the Blob.")}}};var l={stringifyByChunk:function(t,e,r){var i=[],a=0,n=t.length;if(n<=r)return String.fromCharCode.apply(null,t);for(;a<n;)"array"===e||"nodebuffer"===e?i.push(String.fromCharCode.apply(null,t.slice(a,Math.min(a+r,n)))):i.push(String.fromCharCode.apply(null,t.subarray(a,Math.min(a+r,n)))),a+=r;return i.join("")},stringifyByChar:function(t){for(var e="",r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},applyCanBeUsed:{uint8array:function(){try{return i.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(t){return!1}}(),nodebuffer:function(){try{return i.nodebuffer&&1===String.fromCharCode.apply(null,n.allocBuffer(1)).length}catch(t){return!1}}()}};function d(t){var e=65536,i=r.getTypeOf(t),a=!0;if("uint8array"===i?a=l.applyCanBeUsed.uint8array:"nodebuffer"===i&&(a=l.applyCanBeUsed.nodebuffer),a)for(;1<e;)try{return l.stringifyByChunk(t,i,e)}catch(t){e=Math.floor(e/2)}return l.stringifyByChar(t)}function c(t,e){for(var r=0;r<t.length;r++)e[r]=t[r];return e}r.applyFromCharCode=d;var u={};u.string={string:o,array:function(t){return h(t,Array(t.length))},arraybuffer:function(t){return u.string.uint8array(t).buffer},uint8array:function(t){return h(t,new Uint8Array(t.length))},nodebuffer:function(t){return h(t,n.allocBuffer(t.length))}},u.array={string:d,array:o,arraybuffer:function(t){return new Uint8Array(t).buffer},uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return n.newBufferFrom(t)}},u.arraybuffer={string:function(t){return d(new Uint8Array(t))},array:function(t){return c(new Uint8Array(t),Array(t.byteLength))},arraybuffer:o,uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return n.newBufferFrom(new Uint8Array(t))}},u.uint8array={string:d,array:function(t){return c(t,Array(t.length))},arraybuffer:function(t){return t.buffer},uint8array:o,nodebuffer:function(t){return n.newBufferFrom(t)}},u.nodebuffer={string:d,array:function(t){return c(t,Array(t.length))},arraybuffer:function(t){return u.nodebuffer.uint8array(t).buffer},uint8array:function(t){return c(t,new Uint8Array(t.length))},nodebuffer:o},r.transformTo=function(t,e){return(e=e||"",t)?(r.checkSupport(t),u[r.getTypeOf(e)][t](e)):e},r.resolve=function(t){for(var e=t.split("/"),r=[],i=0;i<e.length;i++){var a=e[i];"."===a||""===a&&0!==i&&i!==e.length-1||(".."===a?r.pop():r.push(a))}return r.join("/")},r.getTypeOf=function(t){return"string"==typeof t?"string":"[object Array]"===Object.prototype.toString.call(t)?"array":i.nodebuffer&&n.isBuffer(t)?"nodebuffer":i.uint8array&&t instanceof Uint8Array?"uint8array":i.arraybuffer&&t instanceof ArrayBuffer?"arraybuffer":void 0},r.checkSupport=function(t){if(!i[t.toLowerCase()])throw Error(t+" is not supported by this platform")},r.MAX_VALUE_16BITS=65535,r.MAX_VALUE_32BITS=-1,r.pretty=function(t){var e,r,i="";for(r=0;r<(t||"").length;r++)i+="\\x"+((e=t.charCodeAt(r))<16?"0":"")+e.toString(16).toUpperCase();return i},r.delay=function(t,e,r){setImmediate(function(){t.apply(r||null,e||[])})},r.inherits=function(t,e){function r(){}r.prototype=e.prototype,t.prototype=new r},r.extend=function(){var t,e,r={};for(t=0;t<arguments.length;t++)for(e in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],e)&&void 0===r[e]&&(r[e]=arguments[t][e]);return r},r.prepareContent=function(t,e,n,o,l){return s.Promise.resolve(e).then(function(t){return i.blob&&(t instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(t)))&&"undefined"!=typeof FileReader?new s.Promise(function(e,r){var i=new FileReader;i.onload=function(t){e(t.target.result)},i.onerror=function(t){r(t.target.error)},i.readAsArrayBuffer(t)}):t}).then(function(e){var d,c=r.getTypeOf(e);return c?("arraybuffer"===c?e=r.transformTo("uint8array",e):"string"===c&&(l?e=a.decode(e):n&&!0!==o&&(e=h(d=e,i.uint8array?new Uint8Array(d.length):Array(d.length)))),e):s.Promise.reject(Error("Can't read the data of '"+t+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,e,r){"use strict";var i=t("./reader/readerFor"),a=t("./utils"),n=t("./signature"),s=t("./zipEntry"),o=t("./support");function h(t){this.files=[],this.loadOptions=t}h.prototype={checkSignature:function(t){if(!this.reader.readAndCheckSignature(t)){this.reader.index-=4;var e=this.reader.readString(4);throw Error("Corrupted zip or bug: unexpected signature ("+a.pretty(e)+", expected "+a.pretty(t)+")")}},isSignature:function(t,e){var r=this.reader.index;this.reader.setIndex(t);var i=this.reader.readString(4)===e;return this.reader.setIndex(r),i},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var t=this.reader.readData(this.zipCommentLength),e=o.uint8array?"uint8array":"array",r=a.transformTo(e,t);this.zipComment=this.loadOptions.decodeFileName(r)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var t,e,r,i=this.zip64EndOfCentralSize-44;0<i;)t=this.reader.readInt(2),e=this.reader.readInt(4),r=this.reader.readData(e),this.zip64ExtensibleData[t]={id:t,length:e,value:r}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var t,e;for(t=0;t<this.files.length;t++)e=this.files[t],this.reader.setIndex(e.localHeaderOffset),this.checkSignature(n.LOCAL_FILE_HEADER),e.readLocalPart(this.reader),e.handleUTF8(),e.processAttributes()},readCentralDir:function(){var t;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(n.CENTRAL_FILE_HEADER);)(t=new s({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(t);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var t=this.reader.lastIndexOfSignature(n.CENTRAL_DIRECTORY_END);if(t<0)throw this.isSignature(0,n.LOCAL_FILE_HEADER)?Error("Corrupted zip: can't find end of central directory"):Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(t);var e=t;if(this.checkSignature(n.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===a.MAX_VALUE_16BITS||this.diskWithCentralDirStart===a.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===a.MAX_VALUE_16BITS||this.centralDirRecords===a.MAX_VALUE_16BITS||this.centralDirSize===a.MAX_VALUE_32BITS||this.centralDirOffset===a.MAX_VALUE_32BITS){if(this.zip64=!0,(t=this.reader.lastIndexOfSignature(n.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(t),this.checkSignature(n.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,n.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(n.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(n.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var r=this.centralDirOffset+this.centralDirSize;this.zip64&&(r+=20+(12+this.zip64EndOfCentralSize));var i=e-r;if(0<i)this.isSignature(e,n.CENTRAL_FILE_HEADER)||(this.reader.zero=i);else if(i<0)throw Error("Corrupted zip: missing "+Math.abs(i)+" bytes.")},prepareReader:function(t){this.reader=i(t)},load:function(t){this.prepareReader(t),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},e.exports=h},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,e,r){"use strict";var i=t("./reader/readerFor"),a=t("./utils"),n=t("./compressedObject"),s=t("./crc32"),o=t("./utf8"),h=t("./compressions"),l=t("./support");function d(t,e){this.options=t,this.loadOptions=e}d.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(t){var e,r;if(t.skip(22),this.fileNameLength=t.readInt(2),r=t.readInt(2),this.fileName=t.readData(this.fileNameLength),t.skip(r),-1===this.compressedSize||-1===this.uncompressedSize)throw Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(e=function(t){for(var e in h)if(Object.prototype.hasOwnProperty.call(h,e)&&h[e].magic===t)return h[e];return null}(this.compressionMethod)))throw Error("Corrupted zip : compression "+a.pretty(this.compressionMethod)+" unknown (inner file : "+a.transformTo("string",this.fileName)+")");this.decompressed=new n(this.compressedSize,this.uncompressedSize,this.crc32,e,t.readData(this.compressedSize))},readCentralPart:function(t){this.versionMadeBy=t.readInt(2),t.skip(2),this.bitFlag=t.readInt(2),this.compressionMethod=t.readString(2),this.date=t.readDate(),this.crc32=t.readInt(4),this.compressedSize=t.readInt(4),this.uncompressedSize=t.readInt(4);var e=t.readInt(2);if(this.extraFieldsLength=t.readInt(2),this.fileCommentLength=t.readInt(2),this.diskNumberStart=t.readInt(2),this.internalFileAttributes=t.readInt(2),this.externalFileAttributes=t.readInt(4),this.localHeaderOffset=t.readInt(4),this.isEncrypted())throw Error("Encrypted zip are not supported");t.skip(e),this.readExtraFields(t),this.parseZIP64ExtraField(t),this.fileComment=t.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var t=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==t&&(this.dosPermissions=63&this.externalFileAttributes),3==t&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var t=i(this.extraFields[1].value);this.uncompressedSize===a.MAX_VALUE_32BITS&&(this.uncompressedSize=t.readInt(8)),this.compressedSize===a.MAX_VALUE_32BITS&&(this.compressedSize=t.readInt(8)),this.localHeaderOffset===a.MAX_VALUE_32BITS&&(this.localHeaderOffset=t.readInt(8)),this.diskNumberStart===a.MAX_VALUE_32BITS&&(this.diskNumberStart=t.readInt(4))}},readExtraFields:function(t){var e,r,i,a=t.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});t.index+4<a;)e=t.readInt(2),r=t.readInt(2),i=t.readData(r),this.extraFields[e]={id:e,length:r,value:i};t.setIndex(a)},handleUTF8:function(){var t=l.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=o.utf8decode(this.fileName),this.fileCommentStr=o.utf8decode(this.fileComment);else{var e=this.findExtraFieldUnicodePath();if(null!==e)this.fileNameStr=e;else{var r=a.transformTo(t,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(r)}var i=this.findExtraFieldUnicodeComment();if(null!==i)this.fileCommentStr=i;else{var n=a.transformTo(t,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(n)}}},findExtraFieldUnicodePath:function(){var t=this.extraFields[28789];if(t){var e=i(t.value);return 1!==e.readInt(1)?null:s(this.fileName)!==e.readInt(4)?null:o.utf8decode(e.readData(t.length-5))}return null},findExtraFieldUnicodeComment:function(){var t=this.extraFields[25461];if(t){var e=i(t.value);return 1!==e.readInt(1)?null:s(this.fileComment)!==e.readInt(4)?null:o.utf8decode(e.readData(t.length-5))}return null}},e.exports=d},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,e,r){"use strict";function i(t,e,r){this.name=t,this.dir=r.dir,this.date=r.date,this.comment=r.comment,this.unixPermissions=r.unixPermissions,this.dosPermissions=r.dosPermissions,this._data=e,this._dataBinary=r.binary,this.options={compression:r.compression,compressionOptions:r.compressionOptions}}var a=t("./stream/StreamHelper"),n=t("./stream/DataWorker"),s=t("./utf8"),o=t("./compressedObject"),h=t("./stream/GenericWorker");i.prototype={internalStream:function(t){var e=null,r="string";try{if(!t)throw Error("No output type specified.");var i="string"===(r=t.toLowerCase())||"text"===r;"binarystring"!==r&&"text"!==r||(r="string"),e=this._decompressWorker();var n=!this._dataBinary;n&&!i&&(e=e.pipe(new s.Utf8EncodeWorker)),!n&&i&&(e=e.pipe(new s.Utf8DecodeWorker))}catch(t){(e=new h("error")).error(t)}return new a(e,r,"")},async:function(t,e){return this.internalStream(t).accumulate(e)},nodeStream:function(t,e){return this.internalStream(t||"nodebuffer").toNodejsStream(e)},_compressWorker:function(t,e){if(this._data instanceof o&&this._data.compression.magic===t.magic)return this._data.getCompressedWorker();var r=this._decompressWorker();return this._dataBinary||(r=r.pipe(new s.Utf8EncodeWorker)),o.createWorkerFrom(r,t,e)},_decompressWorker:function(){return this._data instanceof o?this._data.getContentWorker():this._data instanceof h?this._data:new n(this._data)}};for(var l=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],d=function(){throw Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},c=0;c<l.length;c++)i.prototype[l[c]]=d;e.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,e,i){(function(t){"use strict";var r,i,a=t.MutationObserver||t.WebKitMutationObserver;if(a){var n=0,s=new a(d),o=t.document.createTextNode("");s.observe(o,{characterData:!0}),r=function(){o.data=n=++n%2}}else if(t.setImmediate||void 0===t.MessageChannel)r="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var e=t.document.createElement("script");e.onreadystatechange=function(){d(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},t.document.documentElement.appendChild(e)}:function(){setTimeout(d,0)};else{var h=new t.MessageChannel;h.port1.onmessage=d,r=function(){h.port2.postMessage(0)}}var l=[];function d(){var t,e;i=!0;for(var r=l.length;r;){for(e=l,l=[],t=-1;++t<r;)e[t]();r=l.length}i=!1}e.exports=function(t){1!==l.push(t)||i||r()}}).call(this,void 0!==r.g?r.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],37:[function(t,e,r){"use strict";var i=t("immediate");function a(){}var n={},s=["REJECTED"],o=["FULFILLED"],h=["PENDING"];function l(t){if("function"!=typeof t)throw TypeError("resolver must be a function");this.state=h,this.queue=[],this.outcome=void 0,t!==a&&f(this,t)}function d(t,e,r){this.promise=t,"function"==typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),"function"==typeof r&&(this.onRejected=r,this.callRejected=this.otherCallRejected)}function c(t,e,r){i(function(){var i;try{i=e(r)}catch(e){return n.reject(t,e)}i===t?n.reject(t,TypeError("Cannot resolve promise with itself")):n.resolve(t,i)})}function u(t){var e=t&&t.then;if(t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof e)return function(){e.apply(t,arguments)}}function f(t,e){var r=!1;function i(e){r||(r=!0,n.reject(t,e))}function a(e){r||(r=!0,n.resolve(t,e))}var s=g(function(){e(a,i)});"error"===s.status&&i(s.value)}function g(t,e){var r={};try{r.value=t(e),r.status="success"}catch(t){r.status="error",r.value=t}return r}(e.exports=l).prototype.finally=function(t){if("function"!=typeof t)return this;var e=this.constructor;return this.then(function(r){return e.resolve(t()).then(function(){return r})},function(r){return e.resolve(t()).then(function(){throw r})})},l.prototype.catch=function(t){return this.then(null,t)},l.prototype.then=function(t,e){if("function"!=typeof t&&this.state===o||"function"!=typeof e&&this.state===s)return this;var r=new this.constructor(a);return this.state!==h?c(r,this.state===o?t:e,this.outcome):this.queue.push(new d(r,t,e)),r},d.prototype.callFulfilled=function(t){n.resolve(this.promise,t)},d.prototype.otherCallFulfilled=function(t){c(this.promise,this.onFulfilled,t)},d.prototype.callRejected=function(t){n.reject(this.promise,t)},d.prototype.otherCallRejected=function(t){c(this.promise,this.onRejected,t)},n.resolve=function(t,e){var r=g(u,e);if("error"===r.status)return n.reject(t,r.value);var i=r.value;if(i)f(t,i);else{t.state=o,t.outcome=e;for(var a=-1,s=t.queue.length;++a<s;)t.queue[a].callFulfilled(e)}return t},n.reject=function(t,e){t.state=s,t.outcome=e;for(var r=-1,i=t.queue.length;++r<i;)t.queue[r].callRejected(e);return t},l.resolve=function(t){return t instanceof this?t:n.resolve(new this(a),t)},l.reject=function(t){var e=new this(a);return n.reject(e,t)},l.all=function(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(TypeError("must be an array"));var r=t.length,i=!1;if(!r)return this.resolve([]);for(var s=Array(r),o=0,h=-1,l=new this(a);++h<r;)(function(t,a){e.resolve(t).then(function(t){s[a]=t,++o!==r||i||(i=!0,n.resolve(l,s))},function(t){i||(i=!0,n.reject(l,t))})})(t[h],h);return l},l.race=function(t){if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(TypeError("must be an array"));var e,r=t.length,i=!1;if(!r)return this.resolve([]);for(var s=-1,o=new this(a);++s<r;)e=t[s],this.resolve(e).then(function(t){i||(i=!0,n.resolve(o,t))},function(t){i||(i=!0,n.reject(o,t))});return o}},{immediate:36}],38:[function(t,e,r){"use strict";var i={};(0,t("./lib/utils/common").assign)(i,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),e.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,e,r){"use strict";var i=t("./zlib/deflate"),a=t("./utils/common"),n=t("./utils/strings"),s=t("./zlib/messages"),o=t("./zlib/zstream"),h=Object.prototype.toString;function l(t){if(!(this instanceof l))return new l(t);this.options=a.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},t||{});var e,r=this.options;r.raw&&0<r.windowBits?r.windowBits=-r.windowBits:r.gzip&&0<r.windowBits&&r.windowBits<16&&(r.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new o,this.strm.avail_out=0;var d=i.deflateInit2(this.strm,r.level,r.method,r.windowBits,r.memLevel,r.strategy);if(0!==d)throw Error(s[d]);if(r.header&&i.deflateSetHeader(this.strm,r.header),r.dictionary){if(e="string"==typeof r.dictionary?n.string2buf(r.dictionary):"[object ArrayBuffer]"===h.call(r.dictionary)?new Uint8Array(r.dictionary):r.dictionary,0!==(d=i.deflateSetDictionary(this.strm,e)))throw Error(s[d]);this._dict_set=!0}}function d(t,e){var r=new l(e);if(r.push(t,!0),r.err)throw r.msg||s[r.err];return r.result}l.prototype.push=function(t,e){var r,s,o=this.strm,l=this.options.chunkSize;if(this.ended)return!1;s=e===~~e?e:!0===e?4:0,"string"==typeof t?o.input=n.string2buf(t):"[object ArrayBuffer]"===h.call(t)?o.input=new Uint8Array(t):o.input=t,o.next_in=0,o.avail_in=o.input.length;do{if(0===o.avail_out&&(o.output=new a.Buf8(l),o.next_out=0,o.avail_out=l),1!==(r=i.deflate(o,s))&&0!==r)return this.onEnd(r),this.ended=!0,!1;0!==o.avail_out&&(0!==o.avail_in||4!==s&&2!==s)||("string"===this.options.to?this.onData(n.buf2binstring(a.shrinkBuf(o.output,o.next_out))):this.onData(a.shrinkBuf(o.output,o.next_out)))}while((0<o.avail_in||0===o.avail_out)&&1!==r);return 4===s?(r=i.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,0===r):2!==s||(this.onEnd(0),o.avail_out=0,!0)},l.prototype.onData=function(t){this.chunks.push(t)},l.prototype.onEnd=function(t){0===t&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},r.Deflate=l,r.deflate=d,r.deflateRaw=function(t,e){return(e=e||{}).raw=!0,d(t,e)},r.gzip=function(t,e){return(e=e||{}).gzip=!0,d(t,e)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,e,r){"use strict";var i=t("./zlib/inflate"),a=t("./utils/common"),n=t("./utils/strings"),s=t("./zlib/constants"),o=t("./zlib/messages"),h=t("./zlib/zstream"),l=t("./zlib/gzheader"),d=Object.prototype.toString;function c(t){if(!(this instanceof c))return new c(t);this.options=a.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&0<=e.windowBits&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(0<=e.windowBits&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),15<e.windowBits&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new h,this.strm.avail_out=0;var r=i.inflateInit2(this.strm,e.windowBits);if(r!==s.Z_OK)throw Error(o[r]);this.header=new l,i.inflateGetHeader(this.strm,this.header)}function u(t,e){var r=new c(e);if(r.push(t,!0),r.err)throw r.msg||o[r.err];return r.result}c.prototype.push=function(t,e){var r,o,h,l,c,u,f=this.strm,g=this.options.chunkSize,p=this.options.dictionary,m=!1;if(this.ended)return!1;o=e===~~e?e:!0===e?s.Z_FINISH:s.Z_NO_FLUSH,"string"==typeof t?f.input=n.binstring2buf(t):"[object ArrayBuffer]"===d.call(t)?f.input=new Uint8Array(t):f.input=t,f.next_in=0,f.avail_in=f.input.length;do{if(0===f.avail_out&&(f.output=new a.Buf8(g),f.next_out=0,f.avail_out=g),(r=i.inflate(f,s.Z_NO_FLUSH))===s.Z_NEED_DICT&&p&&(u="string"==typeof p?n.string2buf(p):"[object ArrayBuffer]"===d.call(p)?new Uint8Array(p):p,r=i.inflateSetDictionary(this.strm,u)),r===s.Z_BUF_ERROR&&!0===m&&(r=s.Z_OK,m=!1),r!==s.Z_STREAM_END&&r!==s.Z_OK)return this.onEnd(r),this.ended=!0,!1;f.next_out&&(0!==f.avail_out&&r!==s.Z_STREAM_END&&(0!==f.avail_in||o!==s.Z_FINISH&&o!==s.Z_SYNC_FLUSH)||("string"===this.options.to?(h=n.utf8border(f.output,f.next_out),l=f.next_out-h,c=n.buf2string(f.output,h),f.next_out=l,f.avail_out=g-l,l&&a.arraySet(f.output,f.output,h,l,0),this.onData(c)):this.onData(a.shrinkBuf(f.output,f.next_out)))),0===f.avail_in&&0===f.avail_out&&(m=!0)}while((0<f.avail_in||0===f.avail_out)&&r!==s.Z_STREAM_END);return r===s.Z_STREAM_END&&(o=s.Z_FINISH),o===s.Z_FINISH?(r=i.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===s.Z_OK):o!==s.Z_SYNC_FLUSH||(this.onEnd(s.Z_OK),f.avail_out=0,!0)},c.prototype.onData=function(t){this.chunks.push(t)},c.prototype.onEnd=function(t){t===s.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},r.Inflate=c,r.inflate=u,r.inflateRaw=function(t,e){return(e=e||{}).raw=!0,u(t,e)},r.ungzip=u},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,e,r){"use strict";var i="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;r.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var r=e.shift();if(r){if("object"!=typeof r)throw TypeError(r+"must be non-object");for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])}}return t},r.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var a={arraySet:function(t,e,r,i,a){if(e.subarray&&t.subarray)t.set(e.subarray(r,r+i),a);else for(var n=0;n<i;n++)t[a+n]=e[r+n]},flattenChunks:function(t){var e,r,i,a,n,s;for(e=i=0,r=t.length;e<r;e++)i+=t[e].length;for(s=new Uint8Array(i),e=a=0,r=t.length;e<r;e++)n=t[e],s.set(n,a),a+=n.length;return s}},n={arraySet:function(t,e,r,i,a){for(var n=0;n<i;n++)t[a+n]=e[r+n]},flattenChunks:function(t){return[].concat.apply([],t)}};r.setTyped=function(t){t?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,a)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,n))},r.setTyped(i)},{}],42:[function(t,e,r){"use strict";var i=t("./common"),a=!0,n=!0;try{String.fromCharCode.apply(null,[0])}catch(t){a=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){n=!1}for(var s=new i.Buf8(256),o=0;o<256;o++)s[o]=252<=o?6:248<=o?5:240<=o?4:224<=o?3:192<=o?2:1;function h(t,e){if(e<65537&&(t.subarray&&n||!t.subarray&&a))return String.fromCharCode.apply(null,i.shrinkBuf(t,e));for(var r="",s=0;s<e;s++)r+=String.fromCharCode(t[s]);return r}s[254]=s[254]=1,r.string2buf=function(t){var e,r,a,n,s,o=t.length,h=0;for(n=0;n<o;n++)55296==(64512&(r=t.charCodeAt(n)))&&n+1<o&&56320==(64512&(a=t.charCodeAt(n+1)))&&(r=65536+(r-55296<<10)+(a-56320),n++),h+=r<128?1:r<2048?2:r<65536?3:4;for(e=new i.Buf8(h),n=s=0;s<h;n++)55296==(64512&(r=t.charCodeAt(n)))&&n+1<o&&56320==(64512&(a=t.charCodeAt(n+1)))&&(r=65536+(r-55296<<10)+(a-56320),n++),r<128?e[s++]=r:(r<2048?e[s++]=192|r>>>6:(r<65536?e[s++]=224|r>>>12:(e[s++]=240|r>>>18,e[s++]=128|r>>>12&63),e[s++]=128|r>>>6&63),e[s++]=128|63&r);return e},r.buf2binstring=function(t){return h(t,t.length)},r.binstring2buf=function(t){for(var e=new i.Buf8(t.length),r=0,a=e.length;r<a;r++)e[r]=t.charCodeAt(r);return e},r.buf2string=function(t,e){var r,i,a,n,o=e||t.length,l=Array(2*o);for(r=i=0;r<o;)if((a=t[r++])<128)l[i++]=a;else if(4<(n=s[a]))l[i++]=65533,r+=n-1;else{for(a&=2===n?31:3===n?15:7;1<n&&r<o;)a=a<<6|63&t[r++],n--;1<n?l[i++]=65533:a<65536?l[i++]=a:(a-=65536,l[i++]=55296|a>>10&1023,l[i++]=56320|1023&a)}return h(l,i)},r.utf8border=function(t,e){var r;for((e=e||t.length)>t.length&&(e=t.length),r=e-1;0<=r&&128==(192&t[r]);)r--;return r<0?e:0===r?e:r+s[t[r]]>e?r:e}},{"./common":41}],43:[function(t,e,r){"use strict";e.exports=function(t,e,r,i){for(var a=65535&t|0,n=t>>>16&65535|0,s=0;0!==r;){for(r-=s=2e3<r?2e3:r;n=n+(a=a+e[i++]|0)|0,--s;);a%=65521,n%=65521}return a|n<<16|0}},{}],44:[function(t,e,r){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,e,r){"use strict";var i=function(){for(var t,e=[],r=0;r<256;r++){t=r;for(var i=0;i<8;i++)t=1&t?3988292384^t>>>1:t>>>1;e[r]=t}return e}();e.exports=function(t,e,r,a){var n=a+r;t^=-1;for(var s=a;s<n;s++)t=t>>>8^i[255&(t^e[s])];return -1^t}},{}],46:[function(t,e,r){"use strict";var i,a=t("../utils/common"),n=t("./trees"),s=t("./adler32"),o=t("./crc32"),h=t("./messages");function l(t,e){return t.msg=h[e],e}function d(t){return(t<<1)-(4<t?9:0)}function c(t){for(var e=t.length;0<=--e;)t[e]=0}function u(t){var e=t.state,r=e.pending;r>t.avail_out&&(r=t.avail_out),0!==r&&(a.arraySet(t.output,e.pending_buf,e.pending_out,r,t.next_out),t.next_out+=r,e.pending_out+=r,t.total_out+=r,t.avail_out-=r,e.pending-=r,0===e.pending&&(e.pending_out=0))}function f(t,e){n._tr_flush_block(t,0<=t.block_start?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,u(t.strm)}function g(t,e){t.pending_buf[t.pending++]=e}function p(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function m(t,e){var r,i,a=t.max_chain_length,n=t.strstart,s=t.prev_length,o=t.nice_match,h=t.strstart>t.w_size-262?t.strstart-(t.w_size-262):0,l=t.window,d=t.w_mask,c=t.prev,u=t.strstart+258,f=l[n+s-1],g=l[n+s];t.prev_length>=t.good_match&&(a>>=2),o>t.lookahead&&(o=t.lookahead);do if(l[(r=e)+s]===g&&l[r+s-1]===f&&l[r]===l[n]&&l[++r]===l[n+1]){n+=2,r++;do;while(l[++n]===l[++r]&&l[++n]===l[++r]&&l[++n]===l[++r]&&l[++n]===l[++r]&&l[++n]===l[++r]&&l[++n]===l[++r]&&l[++n]===l[++r]&&l[++n]===l[++r]&&n<u);if(i=258-(u-n),n=u-258,s<i){if(t.match_start=e,o<=(s=i))break;f=l[n+s-1],g=l[n+s]}}while((e=c[e&d])>h&&0!=--a);return s<=t.lookahead?s:t.lookahead}function v(t){var e,r,i,n,h,l,d,c,u,f,g=t.w_size;do{if(n=t.window_size-t.lookahead-t.strstart,t.strstart>=g+(g-262)){for(a.arraySet(t.window,t.window,g,g,0),t.match_start-=g,t.strstart-=g,t.block_start-=g,e=r=t.hash_size;i=t.head[--e],t.head[e]=g<=i?i-g:0,--r;);for(e=r=g;i=t.prev[--e],t.prev[e]=g<=i?i-g:0,--r;);n+=g}if(0===t.strm.avail_in)break;if(l=t.strm,d=t.window,c=t.strstart+t.lookahead,u=n,f=void 0,f=l.avail_in,u<f&&(f=u),r=0===f?0:(l.avail_in-=f,a.arraySet(d,l.input,l.next_in,f,c),1===l.state.wrap?l.adler=s(l.adler,d,f,c):2===l.state.wrap&&(l.adler=o(l.adler,d,f,c)),l.next_in+=f,l.total_in+=f,f),t.lookahead+=r,t.lookahead+t.insert>=3)for(h=t.strstart-t.insert,t.ins_h=t.window[h],t.ins_h=(t.ins_h<<t.hash_shift^t.window[h+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[h+3-1])&t.hash_mask,t.prev[h&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=h,h++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<262&&0!==t.strm.avail_in)}function _(t,e){for(var r,i;;){if(t.lookahead<262){if(v(t),t.lookahead<262&&0===e)return 1;if(0===t.lookahead)break}if(r=0,t.lookahead>=3&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==r&&t.strstart-r<=t.w_size-262&&(t.match_length=m(t,r)),t.match_length>=3){if(i=n._tr_tally(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){for(t.match_length--;t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart,0!=--t.match_length;);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask}else i=n._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(i&&(f(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,4===e?(f(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(f(t,!1),0===t.strm.avail_out)?1:2}function y(t,e){for(var r,i,a;;){if(t.lookahead<262){if(v(t),t.lookahead<262&&0===e)return 1;if(0===t.lookahead)break}if(r=0,t.lookahead>=3&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==r&&t.prev_length<t.max_lazy_match&&t.strstart-r<=t.w_size-262&&(t.match_length=m(t,r),t.match_length<=5&&(1===t.strategy||3===t.match_length&&4096<t.strstart-t.match_start)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){for(a=t.strstart+t.lookahead-3,i=n._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;++t.strstart<=a&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!=--t.prev_length;);if(t.match_available=0,t.match_length=2,t.strstart++,i&&(f(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if((i=n._tr_tally(t,0,t.window[t.strstart-1]))&&f(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(i=n._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,4===e?(f(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(f(t,!1),0===t.strm.avail_out)?1:2}function b(t,e,r,i,a){this.good_length=t,this.max_lazy=e,this.nice_length=r,this.max_chain=i,this.func=a}function x(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new a.Buf16(1146),this.dyn_dtree=new a.Buf16(122),this.bl_tree=new a.Buf16(78),c(this.dyn_ltree),c(this.dyn_dtree),c(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new a.Buf16(16),this.heap=new a.Buf16(573),c(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new a.Buf16(573),c(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function w(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=2,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?42:113,t.adler=2===e.wrap?0:1,e.last_flush=0,n._tr_init(e),0):l(t,-2)}function S(t){var e,r=w(t);return 0===r&&((e=t.state).window_size=2*e.w_size,c(e.head),e.max_lazy_match=i[e.level].max_lazy,e.good_match=i[e.level].good_length,e.nice_match=i[e.level].nice_length,e.max_chain_length=i[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0),r}function C(t,e,r,i,n,s){if(!t)return -2;var o=1;if(-1===e&&(e=6),i<0?(o=0,i=-i):15<i&&(o=2,i-=16),n<1||9<n||8!==r||i<8||15<i||e<0||9<e||s<0||4<s)return l(t,-2);8===i&&(i=9);var h=new x;return(t.state=h).strm=t,h.wrap=o,h.gzhead=null,h.w_bits=i,h.w_size=1<<h.w_bits,h.w_mask=h.w_size-1,h.hash_bits=n+7,h.hash_size=1<<h.hash_bits,h.hash_mask=h.hash_size-1,h.hash_shift=~~((h.hash_bits+3-1)/3),h.window=new a.Buf8(2*h.w_size),h.head=new a.Buf16(h.hash_size),h.prev=new a.Buf16(h.w_size),h.lit_bufsize=1<<n+6,h.pending_buf_size=4*h.lit_bufsize,h.pending_buf=new a.Buf8(h.pending_buf_size),h.d_buf=1*h.lit_bufsize,h.l_buf=3*h.lit_bufsize,h.level=e,h.strategy=s,h.method=r,S(t)}i=[new b(0,0,0,0,function(t,e){var r=65535;for(65535>t.pending_buf_size-5&&(r=t.pending_buf_size-5);;){if(t.lookahead<=1){if(v(t),0===t.lookahead&&0===e)return 1;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var i=t.block_start+r;if((0===t.strstart||t.strstart>=i)&&(t.lookahead=t.strstart-i,t.strstart=i,f(t,!1),0===t.strm.avail_out)||t.strstart-t.block_start>=t.w_size-262&&(f(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(f(t,!0),0===t.strm.avail_out?3:4):(t.strstart>t.block_start&&(f(t,!1),t.strm.avail_out),1)}),new b(4,4,8,4,_),new b(4,5,16,8,_),new b(4,6,32,32,_),new b(4,4,16,16,y),new b(8,16,32,32,y),new b(8,16,128,128,y),new b(8,32,128,256,y),new b(32,128,258,1024,y),new b(32,258,258,4096,y)],r.deflateInit=function(t,e){return C(t,e,8,15,8,0)},r.deflateInit2=C,r.deflateReset=S,r.deflateResetKeep=w,r.deflateSetHeader=function(t,e){return t&&t.state?2!==t.state.wrap?-2:(t.state.gzhead=e,0):-2},r.deflate=function(t,e){var r,a,s,h;if(!t||!t.state||5<e||e<0)return t?l(t,-2):-2;if(a=t.state,!t.output||!t.input&&0!==t.avail_in||666===a.status&&4!==e)return l(t,0===t.avail_out?-5:-2);if(a.strm=t,r=a.last_flush,a.last_flush=e,42===a.status){if(2===a.wrap)t.adler=0,g(a,31),g(a,139),g(a,8),a.gzhead?(g(a,(a.gzhead.text?1:0)+(a.gzhead.hcrc?2:0)+(a.gzhead.extra?4:0)+(a.gzhead.name?8:0)+(a.gzhead.comment?16:0)),g(a,255&a.gzhead.time),g(a,a.gzhead.time>>8&255),g(a,a.gzhead.time>>16&255),g(a,a.gzhead.time>>24&255),g(a,9===a.level?2:2<=a.strategy||a.level<2?4:0),g(a,255&a.gzhead.os),a.gzhead.extra&&a.gzhead.extra.length&&(g(a,255&a.gzhead.extra.length),g(a,a.gzhead.extra.length>>8&255)),a.gzhead.hcrc&&(t.adler=o(t.adler,a.pending_buf,a.pending,0)),a.gzindex=0,a.status=69):(g(a,0),g(a,0),g(a,0),g(a,0),g(a,0),g(a,9===a.level?2:2<=a.strategy||a.level<2?4:0),g(a,3),a.status=113);else{var m=8+(a.w_bits-8<<4)<<8;m|=(2<=a.strategy||a.level<2?0:a.level<6?1:6===a.level?2:3)<<6,0!==a.strstart&&(m|=32),m+=31-m%31,a.status=113,p(a,m),0!==a.strstart&&(p(a,t.adler>>>16),p(a,65535&t.adler)),t.adler=1}}if(69===a.status){if(a.gzhead.extra){for(s=a.pending;a.gzindex<(65535&a.gzhead.extra.length)&&(a.pending!==a.pending_buf_size||(a.gzhead.hcrc&&a.pending>s&&(t.adler=o(t.adler,a.pending_buf,a.pending-s,s)),u(t),s=a.pending,a.pending!==a.pending_buf_size));)g(a,255&a.gzhead.extra[a.gzindex]),a.gzindex++;a.gzhead.hcrc&&a.pending>s&&(t.adler=o(t.adler,a.pending_buf,a.pending-s,s)),a.gzindex===a.gzhead.extra.length&&(a.gzindex=0,a.status=73)}else a.status=73}if(73===a.status){if(a.gzhead.name){s=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>s&&(t.adler=o(t.adler,a.pending_buf,a.pending-s,s)),u(t),s=a.pending,a.pending===a.pending_buf_size)){h=1;break}h=a.gzindex<a.gzhead.name.length?255&a.gzhead.name.charCodeAt(a.gzindex++):0,g(a,h)}while(0!==h);a.gzhead.hcrc&&a.pending>s&&(t.adler=o(t.adler,a.pending_buf,a.pending-s,s)),0===h&&(a.gzindex=0,a.status=91)}else a.status=91}if(91===a.status){if(a.gzhead.comment){s=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>s&&(t.adler=o(t.adler,a.pending_buf,a.pending-s,s)),u(t),s=a.pending,a.pending===a.pending_buf_size)){h=1;break}h=a.gzindex<a.gzhead.comment.length?255&a.gzhead.comment.charCodeAt(a.gzindex++):0,g(a,h)}while(0!==h);a.gzhead.hcrc&&a.pending>s&&(t.adler=o(t.adler,a.pending_buf,a.pending-s,s)),0===h&&(a.status=103)}else a.status=103}if(103===a.status&&(a.gzhead.hcrc?(a.pending+2>a.pending_buf_size&&u(t),a.pending+2<=a.pending_buf_size&&(g(a,255&t.adler),g(a,t.adler>>8&255),t.adler=0,a.status=113)):a.status=113),0!==a.pending){if(u(t),0===t.avail_out)return a.last_flush=-1,0}else if(0===t.avail_in&&d(e)<=d(r)&&4!==e)return l(t,-5);if(666===a.status&&0!==t.avail_in)return l(t,-5);if(0!==t.avail_in||0!==a.lookahead||0!==e&&666!==a.status){var _=2===a.strategy?function(t,e){for(var r;;){if(0===t.lookahead&&(v(t),0===t.lookahead)){if(0===e)return 1;break}if(t.match_length=0,r=n._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,r&&(f(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(f(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(f(t,!1),0===t.strm.avail_out)?1:2}(a,e):3===a.strategy?function(t,e){for(var r,i,a,s,o=t.window;;){if(t.lookahead<=258){if(v(t),t.lookahead<=258&&0===e)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&0<t.strstart&&(i=o[a=t.strstart-1])===o[++a]&&i===o[++a]&&i===o[++a]){s=t.strstart+258;do;while(i===o[++a]&&i===o[++a]&&i===o[++a]&&i===o[++a]&&i===o[++a]&&i===o[++a]&&i===o[++a]&&i===o[++a]&&a<s);t.match_length=258-(s-a),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(r=n._tr_tally(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(r=n._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),r&&(f(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(f(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(f(t,!1),0===t.strm.avail_out)?1:2}(a,e):i[a.level].func(a,e);if(3!==_&&4!==_||(a.status=666),1===_||3===_)return 0===t.avail_out&&(a.last_flush=-1),0;if(2===_&&(1===e?n._tr_align(a):5!==e&&(n._tr_stored_block(a,0,0,!1),3===e&&(c(a.head),0===a.lookahead&&(a.strstart=0,a.block_start=0,a.insert=0))),u(t),0===t.avail_out))return a.last_flush=-1,0}return 4!==e?0:a.wrap<=0?1:(2===a.wrap?(g(a,255&t.adler),g(a,t.adler>>8&255),g(a,t.adler>>16&255),g(a,t.adler>>24&255),g(a,255&t.total_in),g(a,t.total_in>>8&255),g(a,t.total_in>>16&255),g(a,t.total_in>>24&255)):(p(a,t.adler>>>16),p(a,65535&t.adler)),u(t),0<a.wrap&&(a.wrap=-a.wrap),0!==a.pending?0:1)},r.deflateEnd=function(t){var e;return t&&t.state?42!==(e=t.state.status)&&69!==e&&73!==e&&91!==e&&103!==e&&113!==e&&666!==e?l(t,-2):(t.state=null,113===e?l(t,-3):0):-2},r.deflateSetDictionary=function(t,e){var r,i,n,o,h,l,d,u,f=e.length;if(!t||!t.state||2===(o=(r=t.state).wrap)||1===o&&42!==r.status||r.lookahead)return -2;for(1===o&&(t.adler=s(t.adler,e,f,0)),r.wrap=0,f>=r.w_size&&(0===o&&(c(r.head),r.strstart=0,r.block_start=0,r.insert=0),u=new a.Buf8(r.w_size),a.arraySet(u,e,f-r.w_size,r.w_size,0),e=u,f=r.w_size),h=t.avail_in,l=t.next_in,d=t.input,t.avail_in=f,t.next_in=0,t.input=e,v(r);r.lookahead>=3;){for(i=r.strstart,n=r.lookahead-2;r.ins_h=(r.ins_h<<r.hash_shift^r.window[i+3-1])&r.hash_mask,r.prev[i&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=i,i++,--n;);r.strstart=i,r.lookahead=2,v(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,t.next_in=l,t.input=d,t.avail_in=h,r.wrap=o,0},r.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,e,r){"use strict";e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,e,r){"use strict";e.exports=function(t,e){var r,i,a,n,s,o,h,l,d,c,u,f,g,p,m,v,_,y,b,x,w,S,C,k,A;r=t.state,i=t.next_in,k=t.input,a=i+(t.avail_in-5),n=t.next_out,A=t.output,s=n-(e-t.avail_out),o=n+(t.avail_out-257),h=r.dmax,l=r.wsize,d=r.whave,c=r.wnext,u=r.window,f=r.hold,g=r.bits,p=r.lencode,m=r.distcode,v=(1<<r.lenbits)-1,_=(1<<r.distbits)-1;t:do{g<15&&(f+=k[i++]<<g,g+=8,f+=k[i++]<<g,g+=8),y=p[f&v];e:for(;;){if(f>>>=b=y>>>24,g-=b,0==(b=y>>>16&255))A[n++]=65535&y;else{if(!(16&b)){if(0==(64&b)){y=p[(65535&y)+(f&(1<<b)-1)];continue e}if(32&b){r.mode=12;break t}t.msg="invalid literal/length code",r.mode=30;break t}x=65535&y,(b&=15)&&(g<b&&(f+=k[i++]<<g,g+=8),x+=f&(1<<b)-1,f>>>=b,g-=b),g<15&&(f+=k[i++]<<g,g+=8,f+=k[i++]<<g,g+=8),y=m[f&_];r:for(;;){if(f>>>=b=y>>>24,g-=b,!(16&(b=y>>>16&255))){if(0==(64&b)){y=m[(65535&y)+(f&(1<<b)-1)];continue r}t.msg="invalid distance code",r.mode=30;break t}if(w=65535&y,g<(b&=15)&&(f+=k[i++]<<g,(g+=8)<b&&(f+=k[i++]<<g,g+=8)),h<(w+=f&(1<<b)-1)){t.msg="invalid distance too far back",r.mode=30;break t}if(f>>>=b,g-=b,(b=n-s)<w){if(d<(b=w-b)&&r.sane){t.msg="invalid distance too far back",r.mode=30;break t}if(C=u,(S=0)===c){if(S+=l-b,b<x){for(x-=b;A[n++]=u[S++],--b;);S=n-w,C=A}}else if(c<b){if(S+=l+c-b,(b-=c)<x){for(x-=b;A[n++]=u[S++],--b;);if(S=0,c<x){for(x-=b=c;A[n++]=u[S++],--b;);S=n-w,C=A}}}else if(S+=c-b,b<x){for(x-=b;A[n++]=u[S++],--b;);S=n-w,C=A}for(;2<x;)A[n++]=C[S++],A[n++]=C[S++],A[n++]=C[S++],x-=3;x&&(A[n++]=C[S++],1<x&&(A[n++]=C[S++]))}else{for(S=n-w;A[n++]=A[S++],A[n++]=A[S++],A[n++]=A[S++],2<(x-=3););x&&(A[n++]=A[S++],1<x&&(A[n++]=A[S++]))}break}}break}}while(i<a&&n<o);i-=x=g>>3,f&=(1<<(g-=x<<3))-1,t.next_in=i,t.next_out=n,t.avail_in=i<a?a-i+5:5-(i-a),t.avail_out=n<o?o-n+257:257-(n-o),r.hold=f,r.bits=g}},{}],49:[function(t,e,r){"use strict";var i=t("../utils/common"),a=t("./adler32"),n=t("./crc32"),s=t("./inffast"),o=t("./inftrees");function h(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function l(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function d(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=1,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new i.Buf32(852),e.distcode=e.distdyn=new i.Buf32(592),e.sane=1,e.back=-1,0):-2}function c(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,d(t)):-2}function u(t,e){var r,i;return t&&t.state?(i=t.state,e<0?(r=0,e=-e):(r=1+(e>>4),e<48&&(e&=15)),e&&(e<8||15<e)?-2:(null!==i.window&&i.wbits!==e&&(i.window=null),i.wrap=r,i.wbits=e,c(t))):-2}function f(t,e){var r,i;return t?(i=new l,(t.state=i).window=null,0!==(r=u(t,e))&&(t.state=null),r):-2}var g,p,m=!0;function v(t,e,r,a){var n,s=t.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new i.Buf8(s.wsize)),a>=s.wsize?(i.arraySet(s.window,e,r-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):(a<(n=s.wsize-s.wnext)&&(n=a),i.arraySet(s.window,e,r-a,n,s.wnext),(a-=n)?(i.arraySet(s.window,e,r-a,a,0),s.wnext=a,s.whave=s.wsize):(s.wnext+=n,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=n))),0}r.inflateReset=c,r.inflateReset2=u,r.inflateResetKeep=d,r.inflateInit=function(t){return f(t,15)},r.inflateInit2=f,r.inflate=function(t,e){var r,l,d,c,u,f,_,y,b,x,w,S,C,k,A,P,T,F,E,R,O,D,M,N,I=0,L=new i.Buf8(4),G=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return -2;12===(r=t.state).mode&&(r.mode=13),u=t.next_out,d=t.output,_=t.avail_out,c=t.next_in,l=t.input,f=t.avail_in,y=r.hold,b=r.bits,x=f,w=_,D=0;t:for(;;)switch(r.mode){case 1:if(0===r.wrap){r.mode=13;break}for(;b<16;){if(0===f)break t;f--,y+=l[c++]<<b,b+=8}if(2&r.wrap&&35615===y){L[r.check=0]=255&y,L[1]=y>>>8&255,r.check=n(r.check,L,2,0),b=y=0,r.mode=2;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&y)<<8)+(y>>8))%31){t.msg="incorrect header check",r.mode=30;break}if(8!=(15&y)){t.msg="unknown compression method",r.mode=30;break}if(b-=4,O=8+(15&(y>>>=4)),0===r.wbits)r.wbits=O;else if(O>r.wbits){t.msg="invalid window size",r.mode=30;break}r.dmax=1<<O,t.adler=r.check=1,r.mode=512&y?10:12,b=y=0;break;case 2:for(;b<16;){if(0===f)break t;f--,y+=l[c++]<<b,b+=8}if(r.flags=y,8!=(255&r.flags)){t.msg="unknown compression method",r.mode=30;break}if(57344&r.flags){t.msg="unknown header flags set",r.mode=30;break}r.head&&(r.head.text=y>>8&1),512&r.flags&&(L[0]=255&y,L[1]=y>>>8&255,r.check=n(r.check,L,2,0)),b=y=0,r.mode=3;case 3:for(;b<32;){if(0===f)break t;f--,y+=l[c++]<<b,b+=8}r.head&&(r.head.time=y),512&r.flags&&(L[0]=255&y,L[1]=y>>>8&255,L[2]=y>>>16&255,L[3]=y>>>24&255,r.check=n(r.check,L,4,0)),b=y=0,r.mode=4;case 4:for(;b<16;){if(0===f)break t;f--,y+=l[c++]<<b,b+=8}r.head&&(r.head.xflags=255&y,r.head.os=y>>8),512&r.flags&&(L[0]=255&y,L[1]=y>>>8&255,r.check=n(r.check,L,2,0)),b=y=0,r.mode=5;case 5:if(1024&r.flags){for(;b<16;){if(0===f)break t;f--,y+=l[c++]<<b,b+=8}r.length=y,r.head&&(r.head.extra_len=y),512&r.flags&&(L[0]=255&y,L[1]=y>>>8&255,r.check=n(r.check,L,2,0)),b=y=0}else r.head&&(r.head.extra=null);r.mode=6;case 6:if(1024&r.flags&&(f<(S=r.length)&&(S=f),S&&(r.head&&(O=r.head.extra_len-r.length,r.head.extra||(r.head.extra=Array(r.head.extra_len)),i.arraySet(r.head.extra,l,c,S,O)),512&r.flags&&(r.check=n(r.check,l,S,c)),f-=S,c+=S,r.length-=S),r.length))break t;r.length=0,r.mode=7;case 7:if(2048&r.flags){if(0===f)break t;for(S=0;O=l[c+S++],r.head&&O&&r.length<65536&&(r.head.name+=String.fromCharCode(O)),O&&S<f;);if(512&r.flags&&(r.check=n(r.check,l,S,c)),f-=S,c+=S,O)break t}else r.head&&(r.head.name=null);r.length=0,r.mode=8;case 8:if(4096&r.flags){if(0===f)break t;for(S=0;O=l[c+S++],r.head&&O&&r.length<65536&&(r.head.comment+=String.fromCharCode(O)),O&&S<f;);if(512&r.flags&&(r.check=n(r.check,l,S,c)),f-=S,c+=S,O)break t}else r.head&&(r.head.comment=null);r.mode=9;case 9:if(512&r.flags){for(;b<16;){if(0===f)break t;f--,y+=l[c++]<<b,b+=8}if(y!==(65535&r.check)){t.msg="header crc mismatch",r.mode=30;break}b=y=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=12;break;case 10:for(;b<32;){if(0===f)break t;f--,y+=l[c++]<<b,b+=8}t.adler=r.check=h(y),b=y=0,r.mode=11;case 11:if(0===r.havedict)return t.next_out=u,t.avail_out=_,t.next_in=c,t.avail_in=f,r.hold=y,r.bits=b,2;t.adler=r.check=1,r.mode=12;case 12:if(5===e||6===e)break t;case 13:if(r.last){y>>>=7&b,b-=7&b,r.mode=27;break}for(;b<3;){if(0===f)break t;f--,y+=l[c++]<<b,b+=8}switch(r.last=1&y,b-=1,3&(y>>>=1)){case 0:r.mode=14;break;case 1:if(function(t){if(m){var e;for(g=new i.Buf32(512),p=new i.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(o(1,t.lens,0,288,g,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;o(2,t.lens,0,32,p,0,t.work,{bits:5}),m=!1}t.lencode=g,t.lenbits=9,t.distcode=p,t.distbits=5}(r),r.mode=20,6!==e)break;y>>>=2,b-=2;break t;case 2:r.mode=17;break;case 3:t.msg="invalid block type",r.mode=30}y>>>=2,b-=2;break;case 14:for(y>>>=7&b,b-=7&b;b<32;){if(0===f)break t;f--,y+=l[c++]<<b,b+=8}if((65535&y)!=(y>>>16^65535)){t.msg="invalid stored block lengths",r.mode=30;break}if(r.length=65535&y,b=y=0,r.mode=15,6===e)break t;case 15:r.mode=16;case 16:if(S=r.length){if(f<S&&(S=f),_<S&&(S=_),0===S)break t;i.arraySet(d,l,c,S,u),f-=S,c+=S,_-=S,u+=S,r.length-=S;break}r.mode=12;break;case 17:for(;b<14;){if(0===f)break t;f--,y+=l[c++]<<b,b+=8}if(r.nlen=257+(31&y),y>>>=5,b-=5,r.ndist=1+(31&y),y>>>=5,b-=5,r.ncode=4+(15&y),y>>>=4,b-=4,286<r.nlen||30<r.ndist){t.msg="too many length or distance symbols",r.mode=30;break}r.have=0,r.mode=18;case 18:for(;r.have<r.ncode;){for(;b<3;){if(0===f)break t;f--,y+=l[c++]<<b,b+=8}r.lens[G[r.have++]]=7&y,y>>>=3,b-=3}for(;r.have<19;)r.lens[G[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,M={bits:r.lenbits},D=o(0,r.lens,0,19,r.lencode,0,r.work,M),r.lenbits=M.bits,D){t.msg="invalid code lengths set",r.mode=30;break}r.have=0,r.mode=19;case 19:for(;r.have<r.nlen+r.ndist;){for(;P=(I=r.lencode[y&(1<<r.lenbits)-1])>>>16&255,T=65535&I,!((A=I>>>24)<=b);){if(0===f)break t;f--,y+=l[c++]<<b,b+=8}if(T<16)y>>>=A,b-=A,r.lens[r.have++]=T;else{if(16===T){for(N=A+2;b<N;){if(0===f)break t;f--,y+=l[c++]<<b,b+=8}if(y>>>=A,b-=A,0===r.have){t.msg="invalid bit length repeat",r.mode=30;break}O=r.lens[r.have-1],S=3+(3&y),y>>>=2,b-=2}else if(17===T){for(N=A+3;b<N;){if(0===f)break t;f--,y+=l[c++]<<b,b+=8}b-=A,O=0,S=3+(7&(y>>>=A)),y>>>=3,b-=3}else{for(N=A+7;b<N;){if(0===f)break t;f--,y+=l[c++]<<b,b+=8}b-=A,O=0,S=11+(127&(y>>>=A)),y>>>=7,b-=7}if(r.have+S>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=30;break}for(;S--;)r.lens[r.have++]=O}}if(30===r.mode)break;if(0===r.lens[256]){t.msg="invalid code -- missing end-of-block",r.mode=30;break}if(r.lenbits=9,M={bits:r.lenbits},D=o(1,r.lens,0,r.nlen,r.lencode,0,r.work,M),r.lenbits=M.bits,D){t.msg="invalid literal/lengths set",r.mode=30;break}if(r.distbits=6,r.distcode=r.distdyn,M={bits:r.distbits},D=o(2,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,M),r.distbits=M.bits,D){t.msg="invalid distances set",r.mode=30;break}if(r.mode=20,6===e)break t;case 20:r.mode=21;case 21:if(6<=f&&258<=_){t.next_out=u,t.avail_out=_,t.next_in=c,t.avail_in=f,r.hold=y,r.bits=b,s(t,w),u=t.next_out,d=t.output,_=t.avail_out,c=t.next_in,l=t.input,f=t.avail_in,y=r.hold,b=r.bits,12===r.mode&&(r.back=-1);break}for(r.back=0;P=(I=r.lencode[y&(1<<r.lenbits)-1])>>>16&255,T=65535&I,!((A=I>>>24)<=b);){if(0===f)break t;f--,y+=l[c++]<<b,b+=8}if(P&&0==(240&P)){for(F=A,E=P,R=T;P=(I=r.lencode[R+((y&(1<<F+E)-1)>>F)])>>>16&255,T=65535&I,!(F+(A=I>>>24)<=b);){if(0===f)break t;f--,y+=l[c++]<<b,b+=8}y>>>=F,b-=F,r.back+=F}if(y>>>=A,b-=A,r.back+=A,r.length=T,0===P){r.mode=26;break}if(32&P){r.back=-1,r.mode=12;break}if(64&P){t.msg="invalid literal/length code",r.mode=30;break}r.extra=15&P,r.mode=22;case 22:if(r.extra){for(N=r.extra;b<N;){if(0===f)break t;f--,y+=l[c++]<<b,b+=8}r.length+=y&(1<<r.extra)-1,y>>>=r.extra,b-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=23;case 23:for(;P=(I=r.distcode[y&(1<<r.distbits)-1])>>>16&255,T=65535&I,!((A=I>>>24)<=b);){if(0===f)break t;f--,y+=l[c++]<<b,b+=8}if(0==(240&P)){for(F=A,E=P,R=T;P=(I=r.distcode[R+((y&(1<<F+E)-1)>>F)])>>>16&255,T=65535&I,!(F+(A=I>>>24)<=b);){if(0===f)break t;f--,y+=l[c++]<<b,b+=8}y>>>=F,b-=F,r.back+=F}if(y>>>=A,b-=A,r.back+=A,64&P){t.msg="invalid distance code",r.mode=30;break}r.offset=T,r.extra=15&P,r.mode=24;case 24:if(r.extra){for(N=r.extra;b<N;){if(0===f)break t;f--,y+=l[c++]<<b,b+=8}r.offset+=y&(1<<r.extra)-1,y>>>=r.extra,b-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=30;break}r.mode=25;case 25:if(0===_)break t;if(S=w-_,r.offset>S){if((S=r.offset-S)>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=30;break}C=S>r.wnext?(S-=r.wnext,r.wsize-S):r.wnext-S,S>r.length&&(S=r.length),k=r.window}else k=d,C=u-r.offset,S=r.length;for(_<S&&(S=_),_-=S,r.length-=S;d[u++]=k[C++],--S;);0===r.length&&(r.mode=21);break;case 26:if(0===_)break t;d[u++]=r.length,_--,r.mode=21;break;case 27:if(r.wrap){for(;b<32;){if(0===f)break t;f--,y|=l[c++]<<b,b+=8}if(w-=_,t.total_out+=w,r.total+=w,w&&(t.adler=r.check=r.flags?n(r.check,d,w,u-w):a(r.check,d,w,u-w)),w=_,(r.flags?y:h(y))!==r.check){t.msg="incorrect data check",r.mode=30;break}b=y=0}r.mode=28;case 28:if(r.wrap&&r.flags){for(;b<32;){if(0===f)break t;f--,y+=l[c++]<<b,b+=8}if(y!==(4294967295&r.total)){t.msg="incorrect length check",r.mode=30;break}b=y=0}r.mode=29;case 29:D=1;break t;case 30:D=-3;break t;case 31:return -4;default:return -2}return t.next_out=u,t.avail_out=_,t.next_in=c,t.avail_in=f,r.hold=y,r.bits=b,(r.wsize||w!==t.avail_out&&r.mode<30&&(r.mode<27||4!==e))&&v(t,t.output,t.next_out,w-t.avail_out)?(r.mode=31,-4):(x-=t.avail_in,w-=t.avail_out,t.total_in+=x,t.total_out+=w,r.total+=w,r.wrap&&w&&(t.adler=r.check=r.flags?n(r.check,d,w,t.next_out-w):a(r.check,d,w,t.next_out-w)),t.data_type=r.bits+(r.last?64:0)+(12===r.mode?128:0)+(20===r.mode||15===r.mode?256:0),(0==x&&0===w||4===e)&&0===D&&(D=-5),D)},r.inflateEnd=function(t){if(!t||!t.state)return -2;var e=t.state;return e.window&&(e.window=null),t.state=null,0},r.inflateGetHeader=function(t,e){var r;return t&&t.state?0==(2&(r=t.state).wrap)?-2:((r.head=e).done=!1,0):-2},r.inflateSetDictionary=function(t,e){var r,i=e.length;return t&&t.state?0!==(r=t.state).wrap&&11!==r.mode?-2:11===r.mode&&a(1,e,i,0)!==r.check?-3:v(t,e,i,i)?(r.mode=31,-4):(r.havedict=1,0):-2},r.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,e,r){"use strict";var i=t("../utils/common"),a=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],n=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],s=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],o=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(t,e,r,h,l,d,c,u){var f,g,p,m,v,_,y,b,x,w=u.bits,S=0,C=0,k=0,A=0,P=0,T=0,F=0,E=0,R=0,O=0,D=null,M=0,N=new i.Buf16(16),I=new i.Buf16(16),L=null,G=0;for(S=0;S<=15;S++)N[S]=0;for(C=0;C<h;C++)N[e[r+C]]++;for(P=w,A=15;1<=A&&0===N[A];A--);if(A<P&&(P=A),0===A)return l[d++]=20971520,l[d++]=20971520,u.bits=1,0;for(k=1;k<A&&0===N[k];k++);for(P<k&&(P=k),S=E=1;S<=15;S++)if(E<<=1,(E-=N[S])<0)return -1;if(0<E&&(0===t||1!==A))return -1;for(I[1]=0,S=1;S<15;S++)I[S+1]=I[S]+N[S];for(C=0;C<h;C++)0!==e[r+C]&&(c[I[e[r+C]]++]=C);if(_=0===t?(D=L=c,19):1===t?(D=a,M-=257,L=n,G-=257,256):(D=s,L=o,-1),S=k,v=d,F=C=O=0,p=-1,m=(R=1<<(T=P))-1,1===t&&852<R||2===t&&592<R)return 1;for(;;){for(y=S-F,x=c[C]<_?(b=0,c[C]):c[C]>_?(b=L[G+c[C]],D[M+c[C]]):(b=96,0),f=1<<S-F,k=g=1<<T;l[v+(O>>F)+(g-=f)]=y<<24|b<<16|x|0,0!==g;);for(f=1<<S-1;O&f;)f>>=1;if(0!==f?(O&=f-1,O+=f):O=0,C++,0==--N[S]){if(S===A)break;S=e[r+c[C]]}if(P<S&&(O&m)!==p){for(0===F&&(F=P),v+=k,E=1<<(T=S-F);T+F<A&&!((E-=N[T+F])<=0);)T++,E<<=1;if(R+=1<<T,1===t&&852<R||2===t&&592<R)return 1;l[p=O&m]=P<<24|T<<16|v-d|0}}return 0!==O&&(l[v+O]=S-F<<24|4194304),u.bits=P,0}},{"../utils/common":41}],51:[function(t,e,r){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,e,r){"use strict";var i=t("../utils/common");function a(t){for(var e=t.length;0<=--e;)t[e]=0}var n=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],s=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],h=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],l=Array(576);a(l);var d=Array(60);a(d);var c=Array(512);a(c);var u=Array(256);a(u);var f=Array(29);a(f);var g,p,m,v=Array(30);function _(t,e,r,i,a){this.static_tree=t,this.extra_bits=e,this.extra_base=r,this.elems=i,this.max_length=a,this.has_stree=t&&t.length}function y(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function b(t){return t<256?c[t]:c[256+(t>>>7)]}function x(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function w(t,e,r){t.bi_valid>16-r?(t.bi_buf|=e<<t.bi_valid&65535,x(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=r-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=r)}function S(t,e,r){w(t,r[2*e],r[2*e+1])}function C(t,e){for(var r=0;r|=1&t,t>>>=1,r<<=1,0<--e;);return r>>>1}function k(t,e,r){var i,a,n=Array(16),s=0;for(i=1;i<=15;i++)n[i]=s=s+r[i-1]<<1;for(a=0;a<=e;a++){var o=t[2*a+1];0!==o&&(t[2*a]=C(n[o]++,o))}}function A(t){var e;for(e=0;e<286;e++)t.dyn_ltree[2*e]=0;for(e=0;e<30;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function P(t){8<t.bi_valid?x(t,t.bi_buf):0<t.bi_valid&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function T(t,e,r,i){var a=2*e,n=2*r;return t[a]<t[n]||t[a]===t[n]&&i[e]<=i[r]}function F(t,e,r){for(var i=t.heap[r],a=r<<1;a<=t.heap_len&&(a<t.heap_len&&T(e,t.heap[a+1],t.heap[a],t.depth)&&a++,!T(e,i,t.heap[a],t.depth));)t.heap[r]=t.heap[a],r=a,a<<=1;t.heap[r]=i}function E(t,e,r){var i,a,o,h,l=0;if(0!==t.last_lit)for(;i=t.pending_buf[t.d_buf+2*l]<<8|t.pending_buf[t.d_buf+2*l+1],a=t.pending_buf[t.l_buf+l],l++,0===i?S(t,a,e):(S(t,(o=u[a])+256+1,e),0!==(h=n[o])&&w(t,a-=f[o],h),S(t,o=b(--i),r),0!==(h=s[o])&&w(t,i-=v[o],h)),l<t.last_lit;);S(t,256,e)}function R(t,e){var r,i,a,n=e.dyn_tree,s=e.stat_desc.static_tree,o=e.stat_desc.has_stree,h=e.stat_desc.elems,l=-1;for(t.heap_len=0,t.heap_max=573,r=0;r<h;r++)0!==n[2*r]?(t.heap[++t.heap_len]=l=r,t.depth[r]=0):n[2*r+1]=0;for(;t.heap_len<2;)n[2*(a=t.heap[++t.heap_len]=l<2?++l:0)]=1,t.depth[a]=0,t.opt_len--,o&&(t.static_len-=s[2*a+1]);for(e.max_code=l,r=t.heap_len>>1;1<=r;r--)F(t,n,r);for(a=h;r=t.heap[1],t.heap[1]=t.heap[t.heap_len--],F(t,n,1),i=t.heap[1],t.heap[--t.heap_max]=r,t.heap[--t.heap_max]=i,n[2*a]=n[2*r]+n[2*i],t.depth[a]=(t.depth[r]>=t.depth[i]?t.depth[r]:t.depth[i])+1,n[2*r+1]=n[2*i+1]=a,t.heap[1]=a++,F(t,n,1),2<=t.heap_len;);t.heap[--t.heap_max]=t.heap[1],function(t,e){var r,i,a,n,s,o,h=e.dyn_tree,l=e.max_code,d=e.stat_desc.static_tree,c=e.stat_desc.has_stree,u=e.stat_desc.extra_bits,f=e.stat_desc.extra_base,g=e.stat_desc.max_length,p=0;for(n=0;n<=15;n++)t.bl_count[n]=0;for(h[2*t.heap[t.heap_max]+1]=0,r=t.heap_max+1;r<573;r++)g<(n=h[2*h[2*(i=t.heap[r])+1]+1]+1)&&(n=g,p++),h[2*i+1]=n,l<i||(t.bl_count[n]++,s=0,f<=i&&(s=u[i-f]),o=h[2*i],t.opt_len+=o*(n+s),c&&(t.static_len+=o*(d[2*i+1]+s)));if(0!==p){do{for(n=g-1;0===t.bl_count[n];)n--;t.bl_count[n]--,t.bl_count[n+1]+=2,t.bl_count[g]--,p-=2}while(0<p);for(n=g;0!==n;n--)for(i=t.bl_count[n];0!==i;)l<(a=t.heap[--r])||(h[2*a+1]!==n&&(t.opt_len+=(n-h[2*a+1])*h[2*a],h[2*a+1]=n),i--)}}(t,e),k(n,l,t.bl_count)}function O(t,e,r){var i,a,n=-1,s=e[1],o=0,h=7,l=4;for(0===s&&(h=138,l=3),e[2*(r+1)+1]=65535,i=0;i<=r;i++)a=s,s=e[2*(i+1)+1],++o<h&&a===s||(o<l?t.bl_tree[2*a]+=o:0!==a?(a!==n&&t.bl_tree[2*a]++,t.bl_tree[32]++):o<=10?t.bl_tree[34]++:t.bl_tree[36]++,n=a,l=(o=0)===s?(h=138,3):a===s?(h=6,3):(h=7,4))}function D(t,e,r){var i,a,n=-1,s=e[1],o=0,h=7,l=4;for(0===s&&(h=138,l=3),i=0;i<=r;i++)if(a=s,s=e[2*(i+1)+1],!(++o<h&&a===s)){if(o<l)for(;S(t,a,t.bl_tree),0!=--o;);else 0!==a?(a!==n&&(S(t,a,t.bl_tree),o--),S(t,16,t.bl_tree),w(t,o-3,2)):o<=10?(S(t,17,t.bl_tree),w(t,o-3,3)):(S(t,18,t.bl_tree),w(t,o-11,7));n=a,l=(o=0)===s?(h=138,3):a===s?(h=6,3):(h=7,4)}}a(v);var M=!1;function N(t,e,r,a){var n;w(t,0+(a?1:0),3),P(n=t),x(n,r),x(n,~r),i.arraySet(n.pending_buf,n.window,e,r,n.pending),n.pending+=r}r._tr_init=function(t){M||(function(){var t,e,r,i,a,h=Array(16);for(i=r=0;i<28;i++)for(f[i]=r,t=0;t<1<<n[i];t++)u[r++]=i;for(u[r-1]=i,i=a=0;i<16;i++)for(v[i]=a,t=0;t<1<<s[i];t++)c[a++]=i;for(a>>=7;i<30;i++)for(v[i]=a<<7,t=0;t<1<<s[i]-7;t++)c[256+a++]=i;for(e=0;e<=15;e++)h[e]=0;for(t=0;t<=143;)l[2*t+1]=8,t++,h[8]++;for(;t<=255;)l[2*t+1]=9,t++,h[9]++;for(;t<=279;)l[2*t+1]=7,t++,h[7]++;for(;t<=287;)l[2*t+1]=8,t++,h[8]++;for(k(l,287,h),t=0;t<30;t++)d[2*t+1]=5,d[2*t]=C(t,5);g=new _(l,n,257,286,15),p=new _(d,s,0,30,15),m=new _([],o,0,19,7)}(),M=!0),t.l_desc=new y(t.dyn_ltree,g),t.d_desc=new y(t.dyn_dtree,p),t.bl_desc=new y(t.bl_tree,m),t.bi_buf=0,t.bi_valid=0,A(t)},r._tr_stored_block=N,r._tr_flush_block=function(t,e,r,i){var a,n,s=0;0<t.level?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,r=4093624447;for(e=0;e<=31;e++,r>>>=1)if(1&r&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<256;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0}(t)),R(t,t.l_desc),R(t,t.d_desc),s=function(t){var e;for(O(t,t.dyn_ltree,t.l_desc.max_code),O(t,t.dyn_dtree,t.d_desc.max_code),R(t,t.bl_desc),e=18;3<=e&&0===t.bl_tree[2*h[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),a=t.opt_len+3+7>>>3,(n=t.static_len+3+7>>>3)<=a&&(a=n)):a=n=r+5,r+4<=a&&-1!==e?N(t,e,r,i):4===t.strategy||n===a?(w(t,2+(i?1:0),3),E(t,l,d)):(w(t,4+(i?1:0),3),function(t,e,r,i){var a;for(w(t,e-257,5),w(t,r-1,5),w(t,i-4,4),a=0;a<i;a++)w(t,t.bl_tree[2*h[a]+1],3);D(t,t.dyn_ltree,e-1),D(t,t.dyn_dtree,r-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,s+1),E(t,t.dyn_ltree,t.dyn_dtree)),A(t),i&&P(t)},r._tr_tally=function(t,e,r){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&r,t.last_lit++,0===e?t.dyn_ltree[2*r]++:(t.matches++,e--,t.dyn_ltree[2*(u[r]+256+1)]++,t.dyn_dtree[2*b(e)]++),t.last_lit===t.lit_bufsize-1},r._tr_align=function(t){var e;w(t,2,3),S(t,256,l),16===(e=t).bi_valid?(x(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):8<=e.bi_valid&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}},{"../utils/common":41}],53:[function(t,e,r){"use strict";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,e,i){(function(t){!function(t,e){"use strict";if(!t.setImmediate){var r,i,n,s,o=1,h={},l=!1,d=t.document,c=Object.getPrototypeOf&&Object.getPrototypeOf(t);c=c&&c.setTimeout?c:t,r="[object process]"===({}).toString.call(t.process)?function(t){a.nextTick(function(){f(t)})}:!function(){if(t.postMessage&&!t.importScripts){var e=!0,r=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=r,e}}()?t.MessageChannel?((n=new MessageChannel).port1.onmessage=function(t){f(t.data)},function(t){n.port2.postMessage(t)}):d&&"onreadystatechange"in d.createElement("script")?(i=d.documentElement,function(t){var e=d.createElement("script");e.onreadystatechange=function(){f(t),e.onreadystatechange=null,i.removeChild(e),e=null},i.appendChild(e)}):function(t){setTimeout(f,0,t)}:(s="setImmediate$"+Math.random()+"$",t.addEventListener?t.addEventListener("message",g,!1):t.attachEvent("onmessage",g),function(e){t.postMessage(s+e,"*")}),c.setImmediate=function(t){"function"!=typeof t&&(t=Function(""+t));for(var e=Array(arguments.length-1),i=0;i<e.length;i++)e[i]=arguments[i+1];var a={callback:t,args:e};return h[o]=a,r(o),o++},c.clearImmediate=u}function u(t){delete h[t]}function f(t){if(l)setTimeout(f,0,t);else{var e=h[t];if(e){l=!0;try{!function(t){var e=t.callback,r=t.args;switch(r.length){case 0:e();break;case 1:e(r[0]);break;case 2:e(r[0],r[1]);break;case 3:e(r[0],r[1],r[2]);break;default:e.apply(void 0,r)}}(e)}finally{u(t),l=!1}}}}function g(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(s)&&f(+e.data.slice(s.length))}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,void 0!==r.g?r.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[10])(10)},16745:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Animation=void 0;let i=r(54417),a=r(68588),n=i.glob.performance&&i.glob.performance.now?function(){return i.glob.performance.now()}:function(){return new Date().getTime()};class s{constructor(t,e){this.id=s.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:n(),frameRate:0},this.func=t,this.setLayers(e)}setLayers(t){let e=[];return t&&(e=Array.isArray(t)?t:[t]),this.layers=e,this}getLayers(){return this.layers}addLayer(t){let e=this.layers,r=e.length;for(let i=0;i<r;i++)if(e[i]._id===t._id)return!1;return this.layers.push(t),!0}isRunning(){let t=s.animations,e=t.length;for(let r=0;r<e;r++)if(t[r].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=n(),s._addAnimation(this),this}stop(){return s._removeAnimation(this),this}_updateFrameObject(t){this.frame.timeDiff=t-this.frame.lastTime,this.frame.lastTime=t,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(t){this.animations.push(t),this._handleAnimation()}static _removeAnimation(t){let e=t.id,r=this.animations,i=r.length;for(let t=0;t<i;t++)if(r[t].id===e){this.animations.splice(t,1);break}}static _runFrames(){let t={},e=this.animations;for(let r=0;r<e.length;r++){let i=e[r],a=i.layers,s=i.func;i._updateFrameObject(n());let o=a.length;if(!s||!1!==s.call(i,i.frame))for(let e=0;e<o;e++){let r=a[e];void 0!==r._id&&(t[r._id]=r)}}for(let e in t)t.hasOwnProperty(e)&&t[e].batchDraw()}static _animationLoop(){let t=s;t.animations.length?(t._runFrames(),a.Util.requestAnimFrame(t._animationLoop)):t.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,a.Util.requestAnimFrame(this._animationLoop))}}e.Animation=s,s.animations=[],s.animIdCounter=0,s.animRunning=!1},54135:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.t2length=e.getQuadraticArcLength=e.getCubicArcLength=e.binomialCoefficients=e.cValues=e.tValues=void 0,e.tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],e.cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],e.binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]];let r=(t,r,i)=>{let n,s,o;n=i/2,s=0;for(let i=0;i<20;i++)o=n*e.tValues[20][i]+n,s+=e.cValues[20][i]*function(t,e,r){let i=a(1,r,t),n=a(1,r,e);return Math.sqrt(i*i+n*n)}(t,r,o);return n*s};e.getCubicArcLength=r;let i=(t,e,r)=>{void 0===r&&(r=1);let i=t[0]-2*t[1]+t[2],a=e[0]-2*e[1]+e[2],n=2*t[1]-2*t[0],s=2*e[1]-2*e[0],o=4*(i*i+a*a);if(0===o)return r*Math.sqrt(Math.pow(t[2]-t[0],2)+Math.pow(e[2]-e[0],2));let h=4*(i*n+a*s)/(2*o),l=r+h,d=(n*n+s*s)/o-h*h,c=l*l+d>0?Math.sqrt(l*l+d):0,u=h*h+d>0?Math.sqrt(h*h+d):0;return Math.sqrt(o)/2*(l*c-h*u+(h+Math.sqrt(h*h+d)!==0?d*Math.log(Math.abs((l+c)/(h+u))):0))};e.getQuadraticArcLength=i;let a=(t,r,i)=>{let n,s;let o=i.length-1;if(0===o)return 0;if(0===t){s=0;for(let t=0;t<=o;t++)s+=e.binomialCoefficients[o][t]*Math.pow(1-r,o-t)*Math.pow(r,t)*i[t];return s}n=Array(o);for(let t=0;t<o;t++)n[t]=o*(i[t+1]-i[t]);return a(t-1,r,n)},n=(t,e,r)=>{let i=1,a=t/e,n=(t-r(a))/e,s=0;for(;i>.001;){let o=r(a+n),h=Math.abs(t-o)/e;if(h<i)i=h,a+=n;else{let s=r(a-n),o=Math.abs(t-s)/e;o<i?(i=o,a-=n):n/=2}if(++s>500)break}return a};e.t2length=n},11278:function(t,e,r){"use strict";var i;Object.defineProperty(e,"__esModule",{value:!0}),e.HitCanvas=e.SceneCanvas=e.Canvas=void 0;let a=r(68588),n=r(23442),s=r(54417),o=r(1455),h=r(53774);class l{constructor(t){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;var e=(t||{}).pixelRatio||s.Konva.pixelRatio||function(){if(i)return i;var t=a.Util.createCanvasElement(),e=t.getContext("2d");return i=(s.Konva._global.devicePixelRatio||1)/(e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1),a.Util.releaseCanvas(t),i}();this.pixelRatio=e,this._canvas=a.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(t){var e=this.pixelRatio;this.pixelRatio=t,this.setSize(this.getWidth()/e,this.getHeight()/e)}setWidth(t){this.width=this._canvas.width=t*this.pixelRatio,this._canvas.style.width=t+"px";var e=this.pixelRatio;this.getContext()._context.scale(e,e)}setHeight(t){this.height=this._canvas.height=t*this.pixelRatio,this._canvas.style.height=t+"px";var e=this.pixelRatio;this.getContext()._context.scale(e,e)}getWidth(){return this.width}getHeight(){return this.height}setSize(t,e){this.setWidth(t||0),this.setHeight(e||0)}toDataURL(t,e){try{return this._canvas.toDataURL(t,e)}catch(t){try{return this._canvas.toDataURL()}catch(t){return a.Util.error("Unable to get data URL. "+t.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}e.Canvas=l,o.Factory.addGetterSetter(l,"pixelRatio",void 0,(0,h.getNumberValidator)()),e.SceneCanvas=class extends l{constructor(t={width:0,height:0,willReadFrequently:!1}){super(t),this.context=new n.SceneContext(this,{willReadFrequently:t.willReadFrequently}),this.setSize(t.width,t.height)}},e.HitCanvas=class extends l{constructor(t={width:0,height:0}){super(t),this.hitCanvas=!0,this.context=new n.HitContext(this),this.setSize(t.width,t.height)}}},28783:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Container=void 0;let i=r(1455),a=r(77939),n=r(53774);class s extends a.Node{constructor(){super(...arguments),this.children=[]}getChildren(t){if(!t)return this.children||[];let e=this.children||[];var r=[];return e.forEach(function(e){t(e)&&r.push(e)}),r}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(t=>{t.parent=null,t.index=0,t.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(t=>{t.parent=null,t.index=0,t.destroy()}),this.children=[],this._requestDraw(),this}add(...t){if(0===t.length)return this;if(t.length>1){for(var e=0;e<t.length;e++)this.add(t[e]);return this}let r=t[0];return r.getParent()?(r.moveTo(this),this):(this._validateAdd(r),r.index=this.getChildren().length,r.parent=this,r._clearCaches(),this.getChildren().push(r),this._fire("add",{child:r}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(t){return this._generalFind(t,!1)}findOne(t){var e=this._generalFind(t,!0);return e.length>0?e[0]:void 0}_generalFind(t,e){var r=[];return this._descendants(i=>{let a=i._isMatch(t);return a&&r.push(i),!!a&&!!e}),r}_descendants(t){let e=this.getChildren();for(let r of e)if(t(r)||r.hasChildren()&&r._descendants(t))return!0;return!1}toObject(){var t=a.Node.prototype.toObject.call(this);return t.children=[],this.getChildren().forEach(e=>{t.children.push(e.toObject())}),t}isAncestorOf(t){for(var e=t.getParent();e;){if(e._id===this._id)return!0;e=e.getParent()}return!1}clone(t){var e=a.Node.prototype.clone.call(this,t);return this.getChildren().forEach(function(t){e.add(t.clone())}),e}getAllIntersections(t){var e=[];return this.find("Shape").forEach(r=>{r.isVisible()&&r.intersects(t)&&e.push(r)}),e}_clearSelfAndDescendantCache(t){var e;super._clearSelfAndDescendantCache(t),this.isCached()||null===(e=this.children)||void 0===e||e.forEach(function(e){e._clearSelfAndDescendantCache(t)})}_setChildrenIndices(){var t;null===(t=this.children)||void 0===t||t.forEach(function(t,e){t.index=e}),this._requestDraw()}drawScene(t,e,r){var i=this.getLayer(),a=t||i&&i.getCanvas(),n=a&&a.getContext(),s=this._getCanvasCache(),o=s&&s.scene,h=a&&a.isCache;if(!this.isVisible()&&!h)return this;if(o){n.save();var l=this.getAbsoluteTransform(e).getMatrix();n.transform(l[0],l[1],l[2],l[3],l[4],l[5]),this._drawCachedSceneCanvas(n),n.restore()}else this._drawChildren("drawScene",a,e,r);return this}drawHit(t,e){if(!this.shouldDrawHit(e))return this;var r=this.getLayer(),i=t||r&&r.hitCanvas,a=i&&i.getContext(),n=this._getCanvasCache();if(n&&n.hit){a.save();var s=this.getAbsoluteTransform(e).getMatrix();a.transform(s[0],s[1],s[2],s[3],s[4],s[5]),this._drawCachedHitCanvas(a),a.restore()}else this._drawChildren("drawHit",i,e);return this}_drawChildren(t,e,r,i){var a,n=e&&e.getContext(),s=this.clipWidth(),o=this.clipHeight(),h=this.clipFunc(),l="number"==typeof s&&"number"==typeof o||h;if(l){let t;n.save();var d=this.getAbsoluteTransform(r),c=d.getMatrix();if(n.transform(c[0],c[1],c[2],c[3],c[4],c[5]),n.beginPath(),h)t=h.call(this,n,this);else{var u=this.clipX(),f=this.clipY();n.rect(u||0,f||0,s,o)}n.clip.apply(n,t),c=d.copy().invert().getMatrix(),n.transform(c[0],c[1],c[2],c[3],c[4],c[5])}var g=r!==this&&"source-over"!==this.globalCompositeOperation()&&"drawScene"===t;g&&(n.save(),n._applyGlobalCompositeOperation(this)),null===(a=this.children)||void 0===a||a.forEach(function(a){a[t](e,r,i)}),g&&n.restore(),l&&n.restore()}getClientRect(t={}){var e,r,i,a,n,s=t.skipTransform,o=t.relativeTo,h={x:1/0,y:1/0,width:0,height:0},l=this;null===(e=this.children)||void 0===e||e.forEach(function(e){if(e.visible()){var s=e.getClientRect({relativeTo:l,skipShadow:t.skipShadow,skipStroke:t.skipStroke});(0!==s.width||0!==s.height)&&(void 0===r?(r=s.x,i=s.y,a=s.x+s.width,n=s.y+s.height):(r=Math.min(r,s.x),i=Math.min(i,s.y),a=Math.max(a,s.x+s.width),n=Math.max(n,s.y+s.height)))}});for(var d=this.find("Shape"),c=!1,u=0;u<d.length;u++)if(d[u]._isVisible(this)){c=!0;break}return(h=c&&void 0!==r?{x:r,y:i,width:a-r,height:n-i}:{x:0,y:0,width:0,height:0},s)?h:this._transformedRect(h,o)}}e.Container=s,i.Factory.addComponentsGetterSetter(s,"clip",["x","y","width","height"]),i.Factory.addGetterSetter(s,"clipX",void 0,(0,n.getNumberValidator)()),i.Factory.addGetterSetter(s,"clipY",void 0,(0,n.getNumberValidator)()),i.Factory.addGetterSetter(s,"clipWidth",void 0,(0,n.getNumberValidator)()),i.Factory.addGetterSetter(s,"clipHeight",void 0,(0,n.getNumberValidator)()),i.Factory.addGetterSetter(s,"clipFunc")},23442:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HitContext=e.SceneContext=e.Context=void 0;let i=r(68588),a=r(54417);var n=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"];class s{constructor(t){this.canvas=t,a.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(t){t.fillEnabled()&&this._fill(t)}_fill(t){}strokeShape(t){t.hasStroke()&&this._stroke(t)}_stroke(t){}fillStrokeShape(t){t.attrs.fillAfterStrokeEnabled?(this.strokeShape(t),this.fillShape(t)):(this.fillShape(t),this.strokeShape(t))}getTrace(t,e){var r,a,n,s,o=this.traceArr,h=o.length,l="";for(r=0;r<h;r++)(n=(a=o[r]).method)?(s=a.args,l+=n,t?l+="()":i.Util._isArray(s[0])?l+="(["+s.join(",")+"])":(e&&(s=s.map(t=>"number"==typeof t?Math.floor(t):t)),l+="("+s.join(",")+")")):(l+=a.property,t||(l+="="+a.val)),l+=";";return l}clearTrace(){this.traceArr=[]}_trace(t){var e=this.traceArr;e.push(t),e.length>=100&&e.shift()}reset(){var t=this.getCanvas().getPixelRatio();this.setTransform(1*t,0,0,1*t,0,0)}getCanvas(){return this.canvas}clear(t){var e=this.getCanvas();t?this.clearRect(t.x||0,t.y||0,t.width||0,t.height||0):this.clearRect(0,0,e.getWidth()/e.pixelRatio,e.getHeight()/e.pixelRatio)}_applyLineCap(t){let e=t.attrs.lineCap;e&&this.setAttr("lineCap",e)}_applyOpacity(t){var e=t.getAbsoluteOpacity();1!==e&&this.setAttr("globalAlpha",e)}_applyLineJoin(t){let e=t.attrs.lineJoin;e&&this.setAttr("lineJoin",e)}setAttr(t,e){this._context[t]=e}arc(t,e,r,i,a,n){this._context.arc(t,e,r,i,a,n)}arcTo(t,e,r,i,a){this._context.arcTo(t,e,r,i,a)}beginPath(){this._context.beginPath()}bezierCurveTo(t,e,r,i,a,n){this._context.bezierCurveTo(t,e,r,i,a,n)}clearRect(t,e,r,i){this._context.clearRect(t,e,r,i)}clip(...t){this._context.clip.apply(this._context,t)}closePath(){this._context.closePath()}createImageData(t,e){var r=arguments;return 2===r.length?this._context.createImageData(t,e):1===r.length?this._context.createImageData(t):void 0}createLinearGradient(t,e,r,i){return this._context.createLinearGradient(t,e,r,i)}createPattern(t,e){return this._context.createPattern(t,e)}createRadialGradient(t,e,r,i,a,n){return this._context.createRadialGradient(t,e,r,i,a,n)}drawImage(t,e,r,i,a,n,s,o,h){var l=arguments,d=this._context;3===l.length?d.drawImage(t,e,r):5===l.length?d.drawImage(t,e,r,i,a):9===l.length&&d.drawImage(t,e,r,i,a,n,s,o,h)}ellipse(t,e,r,i,a,n,s,o){this._context.ellipse(t,e,r,i,a,n,s,o)}isPointInPath(t,e,r,i){return r?this._context.isPointInPath(r,t,e,i):this._context.isPointInPath(t,e,i)}fill(...t){this._context.fill.apply(this._context,t)}fillRect(t,e,r,i){this._context.fillRect(t,e,r,i)}strokeRect(t,e,r,i){this._context.strokeRect(t,e,r,i)}fillText(t,e,r,i){i?this._context.fillText(t,e,r,i):this._context.fillText(t,e,r)}measureText(t){return this._context.measureText(t)}getImageData(t,e,r,i){return this._context.getImageData(t,e,r,i)}lineTo(t,e){this._context.lineTo(t,e)}moveTo(t,e){this._context.moveTo(t,e)}rect(t,e,r,i){this._context.rect(t,e,r,i)}roundRect(t,e,r,i,a){this._context.roundRect(t,e,r,i,a)}putImageData(t,e,r){this._context.putImageData(t,e,r)}quadraticCurveTo(t,e,r,i){this._context.quadraticCurveTo(t,e,r,i)}restore(){this._context.restore()}rotate(t){this._context.rotate(t)}save(){this._context.save()}scale(t,e){this._context.scale(t,e)}setLineDash(t){this._context.setLineDash?this._context.setLineDash(t):"mozDash"in this._context?this._context.mozDash=t:"webkitLineDash"in this._context&&(this._context.webkitLineDash=t)}getLineDash(){return this._context.getLineDash()}setTransform(t,e,r,i,a,n){this._context.setTransform(t,e,r,i,a,n)}stroke(t){t?this._context.stroke(t):this._context.stroke()}strokeText(t,e,r,i){this._context.strokeText(t,e,r,i)}transform(t,e,r,i,a,n){this._context.transform(t,e,r,i,a,n)}translate(t,e){this._context.translate(t,e)}_enableTrace(){var t,e,r=this,a=n.length,s=this.setAttr,o=function(t){var a,n=r[t];r[t]=function(){return e=function(t){var e,r,a=[],n=t.length,s=i.Util;for(e=0;e<n;e++)r=t[e],s._isNumber(r)?r=Math.round(1e3*r)/1e3:s._isString(r)||(r+=""),a.push(r);return a}(Array.prototype.slice.call(arguments,0)),a=n.apply(r,arguments),r._trace({method:t,args:e}),a}};for(t=0;t<a;t++)o(n[t]);r.setAttr=function(){s.apply(r,arguments);var t=arguments[0],e=arguments[1];("shadowOffsetX"===t||"shadowOffsetY"===t||"shadowBlur"===t)&&(e/=this.canvas.getPixelRatio()),r._trace({property:t,val:e})}}_applyGlobalCompositeOperation(t){let e=t.attrs.globalCompositeOperation;e&&"source-over"!==e&&this.setAttr("globalCompositeOperation",e)}}e.Context=s,["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"].forEach(function(t){Object.defineProperty(s.prototype,t,{get(){return this._context[t]},set(e){this._context[t]=e}})}),e.SceneContext=class extends s{constructor(t,{willReadFrequently:e=!1}={}){super(t),this._context=t._canvas.getContext("2d",{willReadFrequently:e})}_fillColor(t){var e=t.fill();this.setAttr("fillStyle",e),t._fillFunc(this)}_fillPattern(t){this.setAttr("fillStyle",t._getFillPattern()),t._fillFunc(this)}_fillLinearGradient(t){var e=t._getLinearGradient();e&&(this.setAttr("fillStyle",e),t._fillFunc(this))}_fillRadialGradient(t){let e=t._getRadialGradient();e&&(this.setAttr("fillStyle",e),t._fillFunc(this))}_fill(t){let e=t.fill(),r=t.getFillPriority();if(e&&"color"===r){this._fillColor(t);return}let i=t.getFillPatternImage();if(i&&"pattern"===r){this._fillPattern(t);return}let a=t.getFillLinearGradientColorStops();if(a&&"linear-gradient"===r){this._fillLinearGradient(t);return}let n=t.getFillRadialGradientColorStops();if(n&&"radial-gradient"===r){this._fillRadialGradient(t);return}e?this._fillColor(t):i?this._fillPattern(t):a?this._fillLinearGradient(t):n&&this._fillRadialGradient(t)}_strokeLinearGradient(t){let e=t.getStrokeLinearGradientStartPoint(),r=t.getStrokeLinearGradientEndPoint(),i=t.getStrokeLinearGradientColorStops(),a=this.createLinearGradient(e.x,e.y,r.x,r.y);if(i){for(var n=0;n<i.length;n+=2)a.addColorStop(i[n],i[n+1]);this.setAttr("strokeStyle",a)}}_stroke(t){var e=t.dash(),r=t.getStrokeScaleEnabled();if(t.hasStroke()){if(!r){this.save();var i=this.getCanvas().getPixelRatio();this.setTransform(i,0,0,i,0,0)}this._applyLineCap(t),e&&t.dashEnabled()&&(this.setLineDash(e),this.setAttr("lineDashOffset",t.dashOffset())),this.setAttr("lineWidth",t.strokeWidth()),t.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),t.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(t):this.setAttr("strokeStyle",t.stroke()),t._strokeFunc(this),r||this.restore()}}_applyShadow(t){var e,r,i,a=null!==(e=t.getShadowRGBA())&&void 0!==e?e:"black",n=null!==(r=t.getShadowBlur())&&void 0!==r?r:5,s=null!==(i=t.getShadowOffset())&&void 0!==i?i:{x:0,y:0},o=t.getAbsoluteScale(),h=this.canvas.getPixelRatio(),l=o.x*h,d=o.y*h;this.setAttr("shadowColor",a),this.setAttr("shadowBlur",n*Math.min(Math.abs(l),Math.abs(d))),this.setAttr("shadowOffsetX",s.x*l),this.setAttr("shadowOffsetY",s.y*d)}},e.HitContext=class extends s{constructor(t){super(t),this._context=t._canvas.getContext("2d",{willReadFrequently:!0})}_fill(t){this.save(),this.setAttr("fillStyle",t.colorKey),t._fillFuncHit(this),this.restore()}strokeShape(t){t.hasHitStroke()&&this._stroke(t)}_stroke(t){if(t.hasHitStroke()){let a=t.getStrokeScaleEnabled();if(!a){this.save();var e=this.getCanvas().getPixelRatio();this.setTransform(e,0,0,e,0,0)}this._applyLineCap(t);var r=t.hitStrokeWidth(),i="auto"===r?t.strokeWidth():r;this.setAttr("lineWidth",i),this.setAttr("strokeStyle",t.colorKey),t._strokeFuncHit(this),a||this.restore()}}}},70210:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DD=void 0;let i=r(54417),a=r(68588);e.DD={get isDragging(){var n=!1;return e.DD._dragElements.forEach(t=>{"dragging"===t.dragStatus&&(n=!0)}),n},justDragged:!1,get node(){var s;return e.DD._dragElements.forEach(t=>{s=t.node}),s},_dragElements:new Map,_drag(t){let r=[];e.DD._dragElements.forEach((e,i)=>{let{node:n}=e,s=n.getStage();s.setPointersPositions(t),void 0===e.pointerId&&(e.pointerId=a.Util._getFirstPointerId(t));let o=s._changedPointerPositions.find(t=>t.id===e.pointerId);if(o){if("dragging"!==e.dragStatus){var h=n.dragDistance();if(Math.max(Math.abs(o.x-e.startPointerPos.x),Math.abs(o.y-e.startPointerPos.y))<h||(n.startDrag({evt:t}),!n.isDragging()))return}n._setDragPosition(t,e),r.push(n)}}),r.forEach(e=>{e.fire("dragmove",{type:"dragmove",target:e,evt:t},!0)})},_endDragBefore(t){let r=[];e.DD._dragElements.forEach(a=>{let{node:n}=a,s=n.getStage();t&&s.setPointersPositions(t);let o=s._changedPointerPositions.find(t=>t.id===a.pointerId);if(!o)return;("dragging"===a.dragStatus||"stopped"===a.dragStatus)&&(e.DD.justDragged=!0,i.Konva._mouseListenClick=!1,i.Konva._touchListenClick=!1,i.Konva._pointerListenClick=!1,a.dragStatus="stopped");let h=a.node.getLayer()||a.node instanceof i.Konva.Stage&&a.node;h&&-1===r.indexOf(h)&&r.push(h)}),r.forEach(t=>{t.draw()})},_endDragAfter(t){e.DD._dragElements.forEach((r,i)=>{"stopped"===r.dragStatus&&r.node.fire("dragend",{type:"dragend",target:r.node,evt:t},!0),"dragging"!==r.dragStatus&&e.DD._dragElements.delete(i)})}},i.Konva.isBrowser&&(window.addEventListener("mouseup",e.DD._endDragBefore,!0),window.addEventListener("touchend",e.DD._endDragBefore,!0),window.addEventListener("mousemove",e.DD._drag),window.addEventListener("touchmove",e.DD._drag),window.addEventListener("mouseup",e.DD._endDragAfter,!1),window.addEventListener("touchend",e.DD._endDragAfter,!1))},1455:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Factory=void 0;let i=r(68588),a=r(53774);e.Factory={addGetterSetter(t,r,i,a,n){e.Factory.addGetter(t,r,i),e.Factory.addSetter(t,r,a,n),e.Factory.addOverloadedGetterSetter(t,r)},addGetter(t,e,r){var a="get"+i.Util._capitalize(e);t.prototype[a]=t.prototype[a]||function(){var t=this.attrs[e];return void 0===t?r:t}},addSetter(t,r,a,n){var s="set"+i.Util._capitalize(r);t.prototype[s]||e.Factory.overWriteSetter(t,r,a,n)},overWriteSetter(t,e,r,a){var n="set"+i.Util._capitalize(e);t.prototype[n]=function(t){return r&&null!=t&&(t=r.call(this,t,e)),this._setAttr(e,t),a&&a.call(this),this}},addComponentsGetterSetter(t,r,n,s,o){var h,l,d=n.length,c=i.Util._capitalize,u="get"+c(r),f="set"+c(r);t.prototype[u]=function(){var t={};for(h=0;h<d;h++)t[l=n[h]]=this.getAttr(r+c(l));return t};var g=(0,a.getComponentValidator)(n);t.prototype[f]=function(t){var e,i=this.attrs[r];for(e in s&&(t=s.call(this,t)),g&&g.call(this,t,r),t)t.hasOwnProperty(e)&&this._setAttr(r+c(e),t[e]);return t||n.forEach(t=>{this._setAttr(r+c(t),void 0)}),this._fireChangeEvent(r,i,t),o&&o.call(this),this},e.Factory.addOverloadedGetterSetter(t,r)},addOverloadedGetterSetter(t,e){var r=i.Util._capitalize(e),a="set"+r,n="get"+r;t.prototype[e]=function(){return arguments.length?(this[a](arguments[0]),this):this[n]()}},addDeprecatedGetterSetter(t,r,a,n){i.Util.error("Adding deprecated "+r);var s="get"+i.Util._capitalize(r),o=r+" property is deprecated and will be removed soon. Look at Konva change log for more information.";t.prototype[s]=function(){i.Util.error(o);var t=this.attrs[r];return void 0===t?a:t},e.Factory.addSetter(t,r,n,function(){i.Util.error(o)}),e.Factory.addOverloadedGetterSetter(t,r)},backCompat(t,e){i.Util.each(e,function(e,r){var a=t.prototype[r],n="get"+i.Util._capitalize(e),s="set"+i.Util._capitalize(e);function o(){a.apply(this,arguments),i.Util.error('"'+e+'" method is deprecated and will be removed soon. Use ""'+r+'" instead.')}t.prototype[e]=o,t.prototype[n]=o,t.prototype[s]=o})},afterSetFilter(){this._filterUpToDate=!1}}},73980:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FastLayer=void 0;let i=r(68588),a=r(44415),n=r(54417);class s extends a.Layer{constructor(t){super(t),this.listening(!1),i.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}e.FastLayer=s,s.prototype.nodeType="FastLayer",(0,n._registerNode)(s)},54417:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e._registerNode=e.Konva=e.glob=void 0;let i=Math.PI/180;e.glob=void 0!==r.g?r.g:"undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope?self:{},e.Konva={_global:e.glob,version:"9.3.12",isBrowser:"undefined"!=typeof window&&("[object Window]"===({}).toString.call(window)||"[object global]"===({}).toString.call(window)),isUnminified:/param/.test((function(t){}).toString()),dblClickWindow:400,getAngle:t=>e.Konva.angleDeg?t*i:t,enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_fixTextRendering:!1,pixelRatio:"undefined"!=typeof window&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging:()=>e.Konva.DD.isDragging,isTransforming(){var t;return null===(t=e.Konva.Transformer)||void 0===t?void 0:t.isTransforming()},isDragReady:()=>!!e.Konva.DD.node,releaseCanvasOnDestroy:!0,document:e.glob.document,_injectGlobal(t){e.glob.Konva=t}};let a=t=>{e.Konva[t.prototype.getClassName()]=t};e._registerNode=a,e.Konva._injectGlobal(e.Konva)},58985:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Group=void 0;let i=r(68588),a=r(28783),n=r(54417);class s extends a.Container{_validateAdd(t){var e=t.getType();"Group"!==e&&"Shape"!==e&&i.Util.throw("You may only add groups and shapes to groups.")}}e.Group=s,s.prototype.nodeType="Group",(0,n._registerNode)(s)},44415:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Layer=void 0;let i=r(68588),a=r(28783),n=r(77939),s=r(1455),o=r(11278),h=r(53774),l=r(97955),d=r(54417);var c=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],u=c.length;class f extends a.Container{constructor(t){super(t),this.canvas=new o.SceneCanvas,this.hitCanvas=new o.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){let t=this.canvas._canvas;return t.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(t){return this.getContext().clear(t),this.getHitCanvas().getContext().clear(t),this}setZIndex(t){super.setZIndex(t);var e=this.getStage();return e&&e.content&&(e.content.removeChild(this.getNativeCanvasElement()),t<e.children.length-1?e.content.insertBefore(this.getNativeCanvasElement(),e.children[t+1].getCanvas()._canvas):e.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){n.Node.prototype.moveToTop.call(this);var t=this.getStage();return t&&t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!n.Node.prototype.moveUp.call(this))return!1;var t=this.getStage();return!!t&&!!t.content&&(t.content.removeChild(this.getNativeCanvasElement()),this.index<t.children.length-1?t.content.insertBefore(this.getNativeCanvasElement(),t.children[this.index+1].getCanvas()._canvas):t.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(n.Node.prototype.moveDown.call(this)){var t=this.getStage();if(t){var e=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),e[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(n.Node.prototype.moveToBottom.call(this)){var t=this.getStage();if(t){var e=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),e[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){var t=this.getNativeCanvasElement();return n.Node.prototype.remove.call(this),t&&t.parentNode&&i.Util._isInDocument(t)&&t.parentNode.removeChild(t),this}getStage(){return this.parent}setSize({width:t,height:e}){return this.canvas.setSize(t,e),this.hitCanvas.setSize(t,e),this._setSmoothEnabled(),this}_validateAdd(t){var e=t.getType();"Group"!==e&&"Shape"!==e&&i.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(t){return(t=t||{}).width=t.width||this.getWidth(),t.height=t.height||this.getHeight(),t.x=void 0!==t.x?t.x:this.x(),t.y=void 0!==t.y?t.y:this.y(),n.Node.prototype._toKonvaCanvas.call(this,t)}_checkVisibility(){let t=this.visible();t?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){i.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){i.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,i.Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(t){if(!this.isListening()||!this.isVisible())return null;for(var e=1,r=!1;;){for(let i=0;i<u;i++){let a=c[i],n=this._getIntersection({x:t.x+a.x*e,y:t.y+a.y*e}),s=n.shape;if(s)return s;if(r=!!n.antialiased,!n.antialiased)break}if(!r)return null;e+=1}}_getIntersection(t){let e=this.hitCanvas.pixelRatio,r=this.hitCanvas.context.getImageData(Math.round(t.x*e),Math.round(t.y*e),1,1).data,a=r[3];if(255===a){let t=i.Util._rgbToHex(r[0],r[1],r[2]),e=l.shapes["#"+t];return e?{shape:e}:{antialiased:!0}}return a>0?{antialiased:!0}:{}}drawScene(t,e){var r=this.getLayer(),i=t||r&&r.getCanvas();return this._fire("beforeDraw",{node:this}),this.clearBeforeDraw()&&i.getContext().clear(),a.Container.prototype.drawScene.call(this,i,e),this._fire("draw",{node:this}),this}drawHit(t,e){var r=this.getLayer(),i=t||r&&r.hitCanvas;return r&&r.clearBeforeDraw()&&r.getHitCanvas().getContext().clear(),a.Container.prototype.drawHit.call(this,i,e),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(t){i.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(t)}getHitGraphEnabled(t){return i.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(this.parent&&this.parent.content){var t=this.parent;this.hitCanvas._canvas.parentNode?t.content.removeChild(this.hitCanvas._canvas):t.content.appendChild(this.hitCanvas._canvas)}}destroy(){return i.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}}e.Layer=f,f.prototype.nodeType="Layer",(0,d._registerNode)(f),s.Factory.addGetterSetter(f,"imageSmoothingEnabled",!0),s.Factory.addGetterSetter(f,"clearBeforeDraw",!0),s.Factory.addGetterSetter(f,"hitGraphEnabled",!0,(0,h.getBooleanValidator)())},77939:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Node=void 0;let i=r(68588),a=r(1455),n=r(11278),s=r(54417),o=r(70210),h=r(53774);var l="absoluteOpacity",d="allEventListeners",c="absoluteTransform",u="absoluteScale",f="canvas",g="listening",p="mouseenter",m="mouseleave",v="Shape",_="stage",y="transform",b="visible";let x=1;class w{constructor(t){this._id=x++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(t),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(t){(t===y||t===c)&&this._cache.get(t)?this._cache.get(t).dirty=!0:t?this._cache.delete(t):this._cache.clear()}_getCache(t,e){var r=this._cache.get(t);return(void 0===r||(t===y||t===c)&&!0===r.dirty)&&(r=e.call(this),this._cache.set(t,r)),r}_calculate(t,e,r){if(!this._attachedDepsListeners.get(t)){let r=e.map(t=>t+"Change.konva").join(" ");this.on(r,()=>{this._clearCache(t)}),this._attachedDepsListeners.set(t,!0)}return this._getCache(t,r)}_getCanvasCache(){return this._cache.get(f)}_clearSelfAndDescendantCache(t){this._clearCache(t),t===c&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(f)){let{scene:t,filter:e,hit:r}=this._cache.get(f);i.Util.releaseCanvas(t,e,r),this._cache.delete(f)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(t){var e=t||{},r={};(void 0===e.x||void 0===e.y||void 0===e.width||void 0===e.height)&&(r=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));var a=Math.ceil(e.width||r.width),s=Math.ceil(e.height||r.height),o=e.pixelRatio,h=void 0===e.x?Math.floor(r.x):e.x,d=void 0===e.y?Math.floor(r.y):e.y,c=e.offset||0,g=e.drawBorder||!1,p=e.hitCanvasPixelRatio||1;if(!a||!s){i.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}let m=Math.abs(Math.round(r.x)-h)>.5?1:0,v=Math.abs(Math.round(r.y)-d)>.5?1:0;a+=2*c+m,s+=2*c+v,h-=c,d-=c;var _=new n.SceneCanvas({pixelRatio:o,width:a,height:s}),y=new n.SceneCanvas({pixelRatio:o,width:0,height:0,willReadFrequently:!0}),b=new n.HitCanvas({pixelRatio:p,width:a,height:s}),x=_.getContext(),w=b.getContext();return b.isCache=!0,_.isCache=!0,this._cache.delete(f),this._filterUpToDate=!1,!1===e.imageSmoothingEnabled&&(_.getContext()._context.imageSmoothingEnabled=!1,y.getContext()._context.imageSmoothingEnabled=!1),x.save(),w.save(),x.translate(-h,-d),w.translate(-h,-d),this._isUnderCache=!0,this._clearSelfAndDescendantCache(l),this._clearSelfAndDescendantCache(u),this.drawScene(_,this),this.drawHit(b,this),this._isUnderCache=!1,x.restore(),w.restore(),g&&(x.save(),x.beginPath(),x.rect(0,0,a,s),x.closePath(),x.setAttr("strokeStyle","red"),x.setAttr("lineWidth",5),x.stroke(),x.restore()),this._cache.set(f,{scene:_,filter:y,hit:b,x:h,y:d}),this._requestDraw(),this}isCached(){return this._cache.has(f)}getClientRect(t){throw Error('abstract "getClientRect" method call')}_transformedRect(t,e){var r=[{x:t.x,y:t.y},{x:t.x+t.width,y:t.y},{x:t.x+t.width,y:t.y+t.height},{x:t.x,y:t.y+t.height}],i=1/0,a=1/0,n=-1/0,s=-1/0,o=this.getAbsoluteTransform(e);return r.forEach(function(t){var e=o.point(t);void 0===i&&(i=n=e.x,a=s=e.y),i=Math.min(i,e.x),a=Math.min(a,e.y),n=Math.max(n,e.x),s=Math.max(s,e.y)}),{x:i,y:a,width:n-i,height:s-a}}_drawCachedSceneCanvas(t){t.save(),t._applyOpacity(this),t._applyGlobalCompositeOperation(this);let e=this._getCanvasCache();t.translate(e.x,e.y);var r=this._getCachedSceneCanvas(),i=r.pixelRatio;t.drawImage(r._canvas,0,0,r.width/i,r.height/i),t.restore()}_drawCachedHitCanvas(t){var e=this._getCanvasCache(),r=e.hit;t.save(),t.translate(e.x,e.y),t.drawImage(r._canvas,0,0,r.width/r.pixelRatio,r.height/r.pixelRatio),t.restore()}_getCachedSceneCanvas(){var t,e,r,a,n=this.filters(),s=this._getCanvasCache(),o=s.scene,h=s.filter,l=h.getContext();if(n){if(!this._filterUpToDate){var d=o.pixelRatio;h.setSize(o.width/o.pixelRatio,o.height/o.pixelRatio);try{for(t=n.length,l.clear(),l.drawImage(o._canvas,0,0,o.getWidth()/d,o.getHeight()/d),e=l.getImageData(0,0,h.getWidth(),h.getHeight()),r=0;r<t;r++){if(a=n[r],"function"!=typeof a){i.Util.error("Filter should be type of function, but got "+typeof a+" instead. Please check correct filters");continue}a.call(this,e),l.putImageData(e,0,0)}}catch(t){i.Util.error("Unable to apply filter. "+t.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return h}return o}on(t,e){if(this._cache&&this._cache.delete(d),3==arguments.length)return this._delegate.apply(this,arguments);var r,i,a,n,s=t.split(" "),o=s.length;for(r=0;r<o;r++)a=(i=s[r].split("."))[0],n=i[1]||"",this.eventListeners[a]||(this.eventListeners[a]=[]),this.eventListeners[a].push({name:n,handler:e});return this}off(t,e){var r,i,a,n,s,o=(t||"").split(" "),h=o.length;if(this._cache&&this._cache.delete(d),!t)for(i in this.eventListeners)this._off(i);for(r=0;r<h;r++)if(n=(a=o[r].split("."))[0],s=a[1],n)this.eventListeners[n]&&this._off(n,s,e);else for(i in this.eventListeners)this._off(i,s,e);return this}dispatchEvent(t){var e={target:this,type:t.type,evt:t};return this.fire(t.type,e),this}addEventListener(t,e){return this.on(t,function(t){e.call(this,t.evt)}),this}removeEventListener(t){return this.off(t),this}_delegate(t,e,r){var a=this;this.on(t,function(t){for(var n=t.target.findAncestors(e,!0,a),s=0;s<n.length;s++)(t=i.Util.cloneObject(t)).currentTarget=n[s],r.call(n[s],t)})}remove(){return this.isDragging()&&this.stopDrag(),o.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(c),this._clearSelfAndDescendantCache(l),this._clearSelfAndDescendantCache(u),this._clearSelfAndDescendantCache(_),this._clearSelfAndDescendantCache(b),this._clearSelfAndDescendantCache(g)}_remove(){this._clearCaches();var t=this.getParent();t&&t.children&&(t.children.splice(this.index,1),t._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(t){var e="get"+i.Util._capitalize(t);return i.Util._isFunction(this[e])?this[e]():this.attrs[t]}getAncestors(){for(var t=this.getParent(),e=[];t;)e.push(t),t=t.getParent();return e}getAttrs(){return this.attrs||{}}setAttrs(t){return this._batchTransformChanges(()=>{var e,r;if(!t)return this;for(e in t)"children"!==e&&(r="set"+i.Util._capitalize(e),i.Util._isFunction(this[r])?this[r](t[e]):this._setAttr(e,t[e]))}),this}isListening(){return this._getCache(g,this._isListening)}_isListening(t){let e=this.listening();if(!e)return!1;let r=this.getParent();return!r||r===t||this===t||r._isListening(t)}isVisible(){return this._getCache(b,this._isVisible)}_isVisible(t){let e=this.visible();if(!e)return!1;let r=this.getParent();return!r||r===t||this===t||r._isVisible(t)}shouldDrawHit(t,e=!1){if(t)return this._isVisible(t)&&this._isListening(t);var r=this.getLayer(),i=!1;o.DD._dragElements.forEach(t=>{"dragging"===t.dragStatus&&("Stage"===t.node.nodeType?i=!0:t.node.getLayer()===r&&(i=!0))});var a=!e&&!s.Konva.hitOnDragEnabled&&(i||s.Konva.isTransforming());return this.isListening()&&this.isVisible()&&!a}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){var t,e,r,i,a=this.getDepth(),n=this,s=0;let o=this.getStage();return"Stage"!==n.nodeType&&o&&function o(h){for(r=0,t=[],e=h.length;r<e;r++)i=h[r],s++,i.nodeType!==v&&(t=t.concat(i.getChildren().slice())),i._id===n._id&&(r=e);t.length>0&&t[0].getDepth()<=a&&o(t)}(o.getChildren()),s}getDepth(){for(var t=0,e=this.parent;e;)t++,e=e.parent;return t}_batchTransformChanges(t){this._batchingTransformChange=!0,t(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(y),this._clearSelfAndDescendantCache(c)),this._needClearTransformCache=!1}setPosition(t){return this._batchTransformChanges(()=>{this.x(t.x),this.y(t.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){let t=this.getStage();if(!t)return null;var e=t.getPointerPosition();if(!e)return null;var r=this.getAbsoluteTransform().copy();return r.invert(),r.point(e)}getAbsolutePosition(t){let e=!1,r=this.parent;for(;r;){if(r.isCached()){e=!0;break}r=r.parent}e&&!t&&(t=!0);var a=this.getAbsoluteTransform(t).getMatrix(),n=new i.Transform,s=this.offset();return n.m=a.slice(),n.translate(s.x,s.y),n.getTranslation()}setAbsolutePosition(t){let{x:e,y:r,...i}=this._clearTransform();this.attrs.x=e,this.attrs.y=r,this._clearCache(y);var a=this._getAbsoluteTransform().copy();return a.invert(),a.translate(t.x,t.y),t={x:this.attrs.x+a.getTranslation().x,y:this.attrs.y+a.getTranslation().y},this._setTransform(i),this.setPosition({x:t.x,y:t.y}),this._clearCache(y),this._clearSelfAndDescendantCache(c),this}_setTransform(t){var e;for(e in t)this.attrs[e]=t[e]}_clearTransform(){var t={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,t}move(t){var e=t.x,r=t.y,i=this.x(),a=this.y();return void 0!==e&&(i+=e),void 0!==r&&(a+=r),this.setPosition({x:i,y:a}),this}_eachAncestorReverse(t,e){var r,i,a=[],n=this.getParent();if(!e||e._id!==this._id){for(a.unshift(this);n&&(!e||n._id!==e._id);)a.unshift(n),n=n.parent;for(i=0,r=a.length;i<r;i++)t(a[i])}}rotate(t){return this.rotation(this.rotation()+t),this}moveToTop(){if(!this.parent)return i.Util.warn("Node has no parent. moveToTop function is ignored."),!1;var t=this.index;return t<this.parent.getChildren().length-1&&(this.parent.children.splice(t,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0)}moveUp(){if(!this.parent)return i.Util.warn("Node has no parent. moveUp function is ignored."),!1;var t=this.index;return t<this.parent.getChildren().length-1&&(this.parent.children.splice(t,1),this.parent.children.splice(t+1,0,this),this.parent._setChildrenIndices(),!0)}moveDown(){if(!this.parent)return i.Util.warn("Node has no parent. moveDown function is ignored."),!1;var t=this.index;return t>0&&(this.parent.children.splice(t,1),this.parent.children.splice(t-1,0,this),this.parent._setChildrenIndices(),!0)}moveToBottom(){if(!this.parent)return i.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;var t=this.index;return t>0&&(this.parent.children.splice(t,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0)}setZIndex(t){if(!this.parent)return i.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(t<0||t>=this.parent.children.length)&&i.Util.warn("Unexpected value "+t+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");var e=this.index;return this.parent.children.splice(e,1),this.parent.children.splice(t,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(l,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){var t=this.opacity(),e=this.getParent();return e&&!e._isUnderCache&&(t*=e.getAbsoluteOpacity()),t}moveTo(t){return this.getParent()!==t&&(this._remove(),t.add(this)),this}toObject(){var t,e,r,a,n=this.getAttrs();let s={attrs:{},className:this.getClassName()};for(t in n)e=n[t],(!i.Util.isObject(e)||i.Util._isPlainObject(e)||i.Util._isArray(e))&&(r="function"==typeof this[t]&&this[t],delete n[t],a=r?r.call(this):null,n[t]=e,a!==e&&(s.attrs[t]=e));return i.Util._prepareToStringify(s)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(t,e,r){var i=[];e&&this._isMatch(t)&&i.push(this);for(var a=this.parent;a&&a!==r;)a._isMatch(t)&&i.push(a),a=a.parent;return i}isAncestorOf(t){return!1}findAncestor(t,e,r){return this.findAncestors(t,e,r)[0]}_isMatch(t){if(!t)return!1;if("function"==typeof t)return t(this);var e,r,a=t.replace(/ /g,"").split(","),n=a.length;for(e=0;e<n;e++)if(r=a[e],i.Util.isValidSelector(r)||(i.Util.warn('Selector "'+r+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),i.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),i.Util.warn("Konva is awesome, right?")),"#"===r.charAt(0)){if(this.id()===r.slice(1))return!0}else if("."===r.charAt(0)){if(this.hasName(r.slice(1)))return!0}else if(this.className===r||this.nodeType===r)return!0;return!1}getLayer(){var t=this.getParent();return t?t.getLayer():null}getStage(){return this._getCache(_,this._getStage)}_getStage(){var t=this.getParent();return t?t.getStage():null}fire(t,e={},r){return e.target=e.target||this,r?this._fireAndBubble(t,e):this._fire(t,e),this}getAbsoluteTransform(t){return t?this._getAbsoluteTransform(t):this._getCache(c,this._getAbsoluteTransform)}_getAbsoluteTransform(t){if(t)return e=new i.Transform,this._eachAncestorReverse(function(t){var r=t.transformsEnabled();"all"===r?e.multiply(t.getTransform()):"position"===r&&e.translate(t.x()-t.offsetX(),t.y()-t.offsetY())},t),e;e=this._cache.get(c)||new i.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(e):e.reset();var e,r=this.transformsEnabled();if("all"===r)e.multiply(this.getTransform());else if("position"===r){let t=this.attrs.x||0,r=this.attrs.y||0,i=this.attrs.offsetX||0,a=this.attrs.offsetY||0;e.translate(t-i,r-a)}return e.dirty=!1,e}getAbsoluteScale(t){for(var e=this;e;)e._isUnderCache&&(t=e),e=e.getParent();let r=this.getAbsoluteTransform(t),i=r.decompose();return{x:i.scaleX,y:i.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(y,this._getTransform)}_getTransform(){var t,e,r=this._cache.get(y)||new i.Transform;r.reset();var a=this.x(),n=this.y(),o=s.Konva.getAngle(this.rotation()),h=null!==(t=this.attrs.scaleX)&&void 0!==t?t:1,l=null!==(e=this.attrs.scaleY)&&void 0!==e?e:1,d=this.attrs.skewX||0,c=this.attrs.skewY||0,u=this.attrs.offsetX||0,f=this.attrs.offsetY||0;return(0!==a||0!==n)&&r.translate(a,n),0!==o&&r.rotate(o),(0!==d||0!==c)&&r.skew(d,c),(1!==h||1!==l)&&r.scale(h,l),(0!==u||0!==f)&&r.translate(-1*u,-1*f),r.dirty=!1,r}clone(t){var e,r,a,n,s,o=i.Util.cloneObject(this.attrs);for(e in t)o[e]=t[e];var h=new this.constructor(o);for(e in this.eventListeners)for(n=0,a=(r=this.eventListeners[e]).length;n<a;n++)0>(s=r[n]).name.indexOf("konva")&&(h.eventListeners[e]||(h.eventListeners[e]=[]),h.eventListeners[e].push(s));return h}_toKonvaCanvas(t){t=t||{};var e=this.getClientRect(),r=this.getStage(),i=void 0!==t.x?t.x:Math.floor(e.x),a=void 0!==t.y?t.y:Math.floor(e.y),s=t.pixelRatio||1,o=new n.SceneCanvas({width:t.width||Math.ceil(e.width)||(r?r.width():0),height:t.height||Math.ceil(e.height)||(r?r.height():0),pixelRatio:s}),h=o.getContext();let l=new n.SceneCanvas({width:o.width/o.pixelRatio+Math.abs(i),height:o.height/o.pixelRatio+Math.abs(a),pixelRatio:o.pixelRatio});return!1===t.imageSmoothingEnabled&&(h._context.imageSmoothingEnabled=!1),h.save(),(i||a)&&h.translate(-1*i,-1*a),this.drawScene(o,void 0,l),h.restore(),o}toCanvas(t){return this._toKonvaCanvas(t)._canvas}toDataURL(t){var e=(t=t||{}).mimeType||null,r=t.quality||null,i=this._toKonvaCanvas(t).toDataURL(e,r);return t.callback&&t.callback(i),i}toImage(t){return new Promise((e,r)=>{try{let r=null==t?void 0:t.callback;r&&delete t.callback,i.Util._urlToImage(this.toDataURL(t),function(t){e(t),null==r||r(t)})}catch(t){r(t)}})}toBlob(t){return new Promise((e,r)=>{try{let r=null==t?void 0:t.callback;r&&delete t.callback,this.toCanvas(t).toBlob(t=>{e(t),null==r||r(t)},null==t?void 0:t.mimeType,null==t?void 0:t.quality)}catch(t){r(t)}})}setSize(t){return this.width(t.width),this.height(t.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return void 0!==this.attrs.dragDistance?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():s.Konva.dragDistance}_off(t,e,r){var i,a,n,s=this.eventListeners[t];for(i=0;i<s.length;i++)if(a=s[i].name,n=s[i].handler,("konva"!==a||"konva"===e)&&(!e||a===e)&&(!r||r===n)){if(s.splice(i,1),0===s.length){delete this.eventListeners[t];break}i--}}_fireChangeEvent(t,e,r){this._fire(t+"Change",{oldVal:e,newVal:r})}addName(t){if(!this.hasName(t)){var e=this.name();this.name(e?e+" "+t:t)}return this}hasName(t){if(!t)return!1;let e=this.name();return!!e&&-1!==(e||"").split(/\s/g).indexOf(t)}removeName(t){var e=(this.name()||"").split(/\s/g),r=e.indexOf(t);return -1!==r&&(e.splice(r,1),this.name(e.join(" "))),this}setAttr(t,e){var r=this["set"+i.Util._capitalize(t)];return i.Util._isFunction(r)?r.call(this,e):this._setAttr(t,e),this}_requestDraw(){if(s.Konva.autoDrawEnabled){let t=this.getLayer()||this.getStage();null==t||t.batchDraw()}}_setAttr(t,e){var r=this.attrs[t];(r!==e||i.Util.isObject(e))&&(null==e?delete this.attrs[t]:this.attrs[t]=e,this._shouldFireChangeEvents&&this._fireChangeEvent(t,r,e),this._requestDraw())}_setComponentAttr(t,e,r){var i;void 0!==r&&((i=this.attrs[t])||(this.attrs[t]=this.getAttr(t)),this.attrs[t][e]=r,this._fireChangeEvent(t,i,r))}_fireAndBubble(t,e,r){if(e&&this.nodeType===v&&(e.target=this),!((t===p||t===m)&&(r&&(this===r||this.isAncestorOf&&this.isAncestorOf(r))||"Stage"===this.nodeType&&!r))){this._fire(t,e);var i=(t===p||t===m)&&r&&r.isAncestorOf&&r.isAncestorOf(this)&&!r.isAncestorOf(this.parent);(e&&!e.cancelBubble||!e)&&this.parent&&this.parent.isListening()&&!i&&(r&&r.parent?this._fireAndBubble.call(this.parent,t,e,r):this._fireAndBubble.call(this.parent,t,e))}}_getProtoListeners(t){var e,r,i;let a=null!==(e=this._cache.get(d))&&void 0!==e?e:{},n=null==a?void 0:a[t];if(void 0===n){n=[];let e=Object.getPrototypeOf(this);for(;e;){let a=null!==(i=null===(r=e.eventListeners)||void 0===r?void 0:r[t])&&void 0!==i?i:[];n.push(...a),e=Object.getPrototypeOf(e)}a[t]=n,this._cache.set(d,a)}return n}_fire(t,e){(e=e||{}).currentTarget=this,e.type=t;let r=this._getProtoListeners(t);if(r)for(var i=0;i<r.length;i++)r[i].handler.call(this,e);let a=this.eventListeners[t];if(a)for(var i=0;i<a.length;i++)a[i].handler.call(this,e)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(t){var e=t?t.pointerId:void 0,r=this.getStage(),i=this.getAbsolutePosition();if(r){var a=r._getPointerById(e)||r._changedPointerPositions[0]||i;o.DD._dragElements.set(this._id,{node:this,startPointerPos:a,offset:{x:a.x-i.x,y:a.y-i.y},dragStatus:"ready",pointerId:e})}}startDrag(t,e=!0){o.DD._dragElements.has(this._id)||this._createDragElement(t);let r=o.DD._dragElements.get(this._id);r.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:t&&t.evt},e)}_setDragPosition(t,e){let r=this.getStage()._getPointerById(e.pointerId);if(r){var a={x:r.x-e.offset.x,y:r.y-e.offset.y},n=this.dragBoundFunc();if(void 0!==n){let e=n.call(this,a,t);e?a=e:i.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}this._lastPos&&this._lastPos.x===a.x&&this._lastPos.y===a.y||(this.setAbsolutePosition(a),this._requestDraw()),this._lastPos=a}}stopDrag(t){let e=o.DD._dragElements.get(this._id);e&&(e.dragStatus="stopped"),o.DD._endDragBefore(t),o.DD._endDragAfter(t)}setDraggable(t){this._setAttr("draggable",t),this._dragChange()}isDragging(){let t=o.DD._dragElements.get(this._id);return!!t&&"dragging"===t.dragStatus}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(t){if(!(!(!(void 0!==t.evt.button)||s.Konva.dragButtons.indexOf(t.evt.button)>=0)||this.isDragging())){var e=!1;o.DD._dragElements.forEach(t=>{this.isAncestorOf(t.node)&&(e=!0)}),e||this._createDragElement(t)}})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;let t=o.DD._dragElements.get(this._id),e=t&&"dragging"===t.dragStatus,r=t&&"ready"===t.dragStatus;e?this.stopDrag():r&&o.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(t={x:0,y:0}){let e=this.getStage();if(!e)return!1;let r={x:-t.x,y:-t.y,width:e.width()+2*t.x,height:e.height()+2*t.y};return i.Util.haveIntersection(r,this.getClientRect())}static create(t,e){return i.Util._isString(t)&&(t=JSON.parse(t)),this._createNode(t,e)}static _createNode(t,e){var r,a,n,o=w.prototype.getClassName.call(t),h=t.children;e&&(t.attrs.container=e),s.Konva[o]||(i.Util.warn('Can not find a node with class name "'+o+'". Fallback to "Shape".'),o="Shape");let l=s.Konva[o];if(r=new l(t.attrs),h)for(n=0,a=h.length;n<a;n++)r.add(w._createNode(h[n]));return r}}e.Node=w,w.prototype.nodeType="Node",w.prototype._attrsAffectingSize=[],w.prototype.eventListeners={},w.prototype.on.call(w.prototype,"xChange.konva yChange.konva scaleXChange.konva scaleYChange.konva skewXChange.konva skewYChange.konva rotationChange.konva offsetXChange.konva offsetYChange.konva transformsEnabledChange.konva",function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(y),this._clearSelfAndDescendantCache(c)}),w.prototype.on.call(w.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(b)}),w.prototype.on.call(w.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(g)}),w.prototype.on.call(w.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(l)});let S=a.Factory.addGetterSetter;S(w,"zIndex"),S(w,"absolutePosition"),S(w,"position"),S(w,"x",0,(0,h.getNumberValidator)()),S(w,"y",0,(0,h.getNumberValidator)()),S(w,"globalCompositeOperation","source-over",(0,h.getStringValidator)()),S(w,"opacity",1,(0,h.getNumberValidator)()),S(w,"name","",(0,h.getStringValidator)()),S(w,"id","",(0,h.getStringValidator)()),S(w,"rotation",0,(0,h.getNumberValidator)()),a.Factory.addComponentsGetterSetter(w,"scale",["x","y"]),S(w,"scaleX",1,(0,h.getNumberValidator)()),S(w,"scaleY",1,(0,h.getNumberValidator)()),a.Factory.addComponentsGetterSetter(w,"skew",["x","y"]),S(w,"skewX",0,(0,h.getNumberValidator)()),S(w,"skewY",0,(0,h.getNumberValidator)()),a.Factory.addComponentsGetterSetter(w,"offset",["x","y"]),S(w,"offsetX",0,(0,h.getNumberValidator)()),S(w,"offsetY",0,(0,h.getNumberValidator)()),S(w,"dragDistance",null,(0,h.getNumberValidator)()),S(w,"width",0,(0,h.getNumberValidator)()),S(w,"height",0,(0,h.getNumberValidator)()),S(w,"listening",!0,(0,h.getBooleanValidator)()),S(w,"preventDefault",!0,(0,h.getBooleanValidator)()),S(w,"filters",null,function(t){return this._filterUpToDate=!1,t}),S(w,"visible",!0,(0,h.getBooleanValidator)()),S(w,"transformsEnabled","all",(0,h.getStringValidator)()),S(w,"size"),S(w,"dragBoundFunc"),S(w,"draggable",!1,(0,h.getBooleanValidator)()),a.Factory.backCompat(w,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"})},98479:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.releaseCapture=e.setPointerCapture=e.hasPointerCapture=e.createEvent=e.getCapturedShape=void 0;let i=r(54417),a=new Map,n=void 0!==i.Konva._global.PointerEvent;function s(t){return{evt:t,pointerId:t.pointerId}}function o(t,e){let r=a.get(t);if(!r)return;let i=r.getStage();i&&i.content,a.delete(t),n&&r._fire("lostpointercapture",s(new PointerEvent("lostpointercapture")))}e.getCapturedShape=function(t){return a.get(t)},e.createEvent=s,e.hasPointerCapture=function(t,e){return a.get(t)===e},e.setPointerCapture=function(t,e){o(t);let r=e.getStage();r&&(a.set(t,e),n&&e._fire("gotpointercapture",s(new PointerEvent("gotpointercapture"))))},e.releaseCapture=o},97955:function(t,e,r){"use strict";let i;Object.defineProperty(e,"__esModule",{value:!0}),e.Shape=e.shapes=void 0;let a=r(54417),n=r(68588),s=r(1455),o=r(77939),h=r(53774),l=r(54417),d=r(98479);var c="hasShadow",u="shadowRGBA",f="patternImage",g="linearGradient",p="radialGradient";function m(){return i||(i=n.Util.createCanvasElement().getContext("2d"))}e.shapes={};class v extends o.Node{constructor(t){let r;for(super(t);!(r=n.Util.getRandomColor())||(r in e.shapes););this.colorKey=r,e.shapes[r]=this}getContext(){return n.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return n.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(c,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&0!==this.shadowOpacity()&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(f,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){var t=m();let e=t.createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(e&&e.setTransform){let t=new n.Transform;t.translate(this.fillPatternX(),this.fillPatternY()),t.rotate(a.Konva.getAngle(this.fillPatternRotation())),t.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),t.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());let r=t.getMatrix(),i="undefined"==typeof DOMMatrix?{a:r[0],b:r[1],c:r[2],d:r[3],e:r[4],f:r[5]}:new DOMMatrix(r);e.setTransform(i)}return e}}_getLinearGradient(){return this._getCache(g,this.__getLinearGradient)}__getLinearGradient(){var t=this.fillLinearGradientColorStops();if(t){for(var e=m(),r=this.fillLinearGradientStartPoint(),i=this.fillLinearGradientEndPoint(),a=e.createLinearGradient(r.x,r.y,i.x,i.y),n=0;n<t.length;n+=2)a.addColorStop(t[n],t[n+1]);return a}}_getRadialGradient(){return this._getCache(p,this.__getRadialGradient)}__getRadialGradient(){var t=this.fillRadialGradientColorStops();if(t){for(var e=m(),r=this.fillRadialGradientStartPoint(),i=this.fillRadialGradientEndPoint(),a=e.createRadialGradient(r.x,r.y,this.fillRadialGradientStartRadius(),i.x,i.y,this.fillRadialGradientEndRadius()),n=0;n<t.length;n+=2)a.addColorStop(t[n],t[n+1]);return a}}getShadowRGBA(){return this._getCache(u,this._getShadowRGBA)}_getShadowRGBA(){if(this.hasShadow()){var t=n.Util.colorToRGBA(this.shadowColor());if(t)return"rgba("+t.r+","+t.g+","+t.b+","+t.a*(this.shadowOpacity()||1)+")"}}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){let t=this.hitStrokeWidth();return"auto"===t?this.hasStroke():this.strokeEnabled()&&!!t}intersects(t){var e=this.getStage();if(!e)return!1;let r=e.bufferHitCanvas;r.getContext().clear(),this.drawHit(r,void 0,!0);let i=r.context.getImageData(Math.round(t.x),Math.round(t.y),1,1).data;return i[3]>0}destroy(){return o.Node.prototype.destroy.call(this),delete e.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(t){var e;let r=null===(e=this.attrs.perfectDrawEnabled)||void 0===e||e;if(!r)return!1;let i=t||this.hasFill(),a=this.hasStroke(),n=1!==this.getAbsoluteOpacity();if(i&&a&&n)return!0;let s=this.hasShadow(),o=this.shadowForStrokeEnabled();return!!i&&!!a&&!!s&&!!o}setStrokeHitEnabled(t){n.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),t?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return 0!==this.hitStrokeWidth()}getSelfRect(){var t=this.size();return{x:this._centroid?-t.width/2:0,y:this._centroid?-t.height/2:0,width:t.width,height:t.height}}getClientRect(t={}){let e=!1,r=this.getParent();for(;r;){if(r.isCached()){e=!0;break}r=r.getParent()}let i=t.skipTransform,a=t.relativeTo||e&&this.getStage()||void 0,n=this.getSelfRect(),s=!t.skipStroke&&this.hasStroke(),o=s&&this.strokeWidth()||0,h=n.width+o,l=n.height+o,d=!t.skipShadow&&this.hasShadow(),c=d?this.shadowOffsetX():0,u=d?this.shadowOffsetY():0,f=d&&this.shadowBlur()||0,g={width:h+Math.abs(c)+2*f,height:l+Math.abs(u)+2*f,x:-(o/2+f)+Math.min(c,0)+n.x,y:-(o/2+f)+Math.min(u,0)+n.y};return i?g:this._transformedRect(g,a)}drawScene(t,e,r){var i,a,n=this.getLayer(),s=t||n.getCanvas(),o=s.getContext(),h=this._getCanvasCache(),l=this.getSceneFunc(),d=this.hasShadow(),c=s.isCache,u=e===this;if(!this.isVisible()&&!u)return this;if(h){o.save();var f=this.getAbsoluteTransform(e).getMatrix();return o.transform(f[0],f[1],f[2],f[3],f[4],f[5]),this._drawCachedSceneCanvas(o),o.restore(),this}if(!l)return this;if(o.save(),this._useBufferCanvas()&&!c){i=this.getStage();let t=r||i.bufferCanvas;(a=t.getContext()).clear(),a.save(),a._applyLineJoin(this);var g=this.getAbsoluteTransform(e).getMatrix();a.transform(g[0],g[1],g[2],g[3],g[4],g[5]),l.call(this,a,this),a.restore();var p=t.pixelRatio;d&&o._applyShadow(this),o._applyOpacity(this),o._applyGlobalCompositeOperation(this),o.drawImage(t._canvas,0,0,t.width/p,t.height/p)}else{if(o._applyLineJoin(this),!u){var g=this.getAbsoluteTransform(e).getMatrix();o.transform(g[0],g[1],g[2],g[3],g[4],g[5]),o._applyOpacity(this),o._applyGlobalCompositeOperation(this)}d&&o._applyShadow(this),l.call(this,o,this)}return o.restore(),this}drawHit(t,e,r=!1){if(!this.shouldDrawHit(e,r))return this;var i=this.getLayer(),a=t||i.hitCanvas,s=a&&a.getContext(),o=this.hitFunc()||this.sceneFunc(),h=this._getCanvasCache(),l=h&&h.hit;if(this.colorKey||n.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),l){s.save();var d=this.getAbsoluteTransform(e).getMatrix();return s.transform(d[0],d[1],d[2],d[3],d[4],d[5]),this._drawCachedHitCanvas(s),s.restore(),this}if(!o)return this;if(s.save(),s._applyLineJoin(this),this!==e){var c=this.getAbsoluteTransform(e).getMatrix();s.transform(c[0],c[1],c[2],c[3],c[4],c[5])}return o.call(this,s,this),s.restore(),this}drawHitFromCache(t=0){var e,r,i,a,s,o=this._getCanvasCache(),h=this._getCachedSceneCanvas(),l=o.hit,d=l.getContext(),c=l.getWidth(),u=l.getHeight();d.clear(),d.drawImage(h._canvas,0,0,c,u);try{for(s=0,i=(r=(e=d.getImageData(0,0,c,u)).data).length,a=n.Util._hexToRgb(this.colorKey);s<i;s+=4)r[s+3]>t?(r[s]=a.r,r[s+1]=a.g,r[s+2]=a.b,r[s+3]=255):r[s+3]=0;d.putImageData(e,0,0)}catch(t){n.Util.error("Unable to draw hit graph from cached scene canvas. "+t.message)}return this}hasPointerCapture(t){return d.hasPointerCapture(t,this)}setPointerCapture(t){d.setPointerCapture(t,this)}releaseCapture(t){d.releaseCapture(t,this)}}e.Shape=v,v.prototype._fillFunc=function(t){let e=this.attrs.fillRule;e?t.fill(e):t.fill()},v.prototype._strokeFunc=function(t){t.stroke()},v.prototype._fillFuncHit=function(t){t.fill()},v.prototype._strokeFuncHit=function(t){t.stroke()},v.prototype._centroid=!1,v.prototype.nodeType="Shape",(0,l._registerNode)(v),v.prototype.eventListeners={},v.prototype.on.call(v.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",function(){this._clearCache(c)}),v.prototype.on.call(v.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",function(){this._clearCache(u)}),v.prototype.on.call(v.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",function(){this._clearCache(f)}),v.prototype.on.call(v.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",function(){this._clearCache(g)}),v.prototype.on.call(v.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",function(){this._clearCache(p)}),s.Factory.addGetterSetter(v,"stroke",void 0,(0,h.getStringOrGradientValidator)()),s.Factory.addGetterSetter(v,"strokeWidth",2,(0,h.getNumberValidator)()),s.Factory.addGetterSetter(v,"fillAfterStrokeEnabled",!1),s.Factory.addGetterSetter(v,"hitStrokeWidth","auto",(0,h.getNumberOrAutoValidator)()),s.Factory.addGetterSetter(v,"strokeHitEnabled",!0,(0,h.getBooleanValidator)()),s.Factory.addGetterSetter(v,"perfectDrawEnabled",!0,(0,h.getBooleanValidator)()),s.Factory.addGetterSetter(v,"shadowForStrokeEnabled",!0,(0,h.getBooleanValidator)()),s.Factory.addGetterSetter(v,"lineJoin"),s.Factory.addGetterSetter(v,"lineCap"),s.Factory.addGetterSetter(v,"sceneFunc"),s.Factory.addGetterSetter(v,"hitFunc"),s.Factory.addGetterSetter(v,"dash"),s.Factory.addGetterSetter(v,"dashOffset",0,(0,h.getNumberValidator)()),s.Factory.addGetterSetter(v,"shadowColor",void 0,(0,h.getStringValidator)()),s.Factory.addGetterSetter(v,"shadowBlur",0,(0,h.getNumberValidator)()),s.Factory.addGetterSetter(v,"shadowOpacity",1,(0,h.getNumberValidator)()),s.Factory.addComponentsGetterSetter(v,"shadowOffset",["x","y"]),s.Factory.addGetterSetter(v,"shadowOffsetX",0,(0,h.getNumberValidator)()),s.Factory.addGetterSetter(v,"shadowOffsetY",0,(0,h.getNumberValidator)()),s.Factory.addGetterSetter(v,"fillPatternImage"),s.Factory.addGetterSetter(v,"fill",void 0,(0,h.getStringOrGradientValidator)()),s.Factory.addGetterSetter(v,"fillPatternX",0,(0,h.getNumberValidator)()),s.Factory.addGetterSetter(v,"fillPatternY",0,(0,h.getNumberValidator)()),s.Factory.addGetterSetter(v,"fillLinearGradientColorStops"),s.Factory.addGetterSetter(v,"strokeLinearGradientColorStops"),s.Factory.addGetterSetter(v,"fillRadialGradientStartRadius",0),s.Factory.addGetterSetter(v,"fillRadialGradientEndRadius",0),s.Factory.addGetterSetter(v,"fillRadialGradientColorStops"),s.Factory.addGetterSetter(v,"fillPatternRepeat","repeat"),s.Factory.addGetterSetter(v,"fillEnabled",!0),s.Factory.addGetterSetter(v,"strokeEnabled",!0),s.Factory.addGetterSetter(v,"shadowEnabled",!0),s.Factory.addGetterSetter(v,"dashEnabled",!0),s.Factory.addGetterSetter(v,"strokeScaleEnabled",!0),s.Factory.addGetterSetter(v,"fillPriority","color"),s.Factory.addComponentsGetterSetter(v,"fillPatternOffset",["x","y"]),s.Factory.addGetterSetter(v,"fillPatternOffsetX",0,(0,h.getNumberValidator)()),s.Factory.addGetterSetter(v,"fillPatternOffsetY",0,(0,h.getNumberValidator)()),s.Factory.addComponentsGetterSetter(v,"fillPatternScale",["x","y"]),s.Factory.addGetterSetter(v,"fillPatternScaleX",1,(0,h.getNumberValidator)()),s.Factory.addGetterSetter(v,"fillPatternScaleY",1,(0,h.getNumberValidator)()),s.Factory.addComponentsGetterSetter(v,"fillLinearGradientStartPoint",["x","y"]),s.Factory.addComponentsGetterSetter(v,"strokeLinearGradientStartPoint",["x","y"]),s.Factory.addGetterSetter(v,"fillLinearGradientStartPointX",0),s.Factory.addGetterSetter(v,"strokeLinearGradientStartPointX",0),s.Factory.addGetterSetter(v,"fillLinearGradientStartPointY",0),s.Factory.addGetterSetter(v,"strokeLinearGradientStartPointY",0),s.Factory.addComponentsGetterSetter(v,"fillLinearGradientEndPoint",["x","y"]),s.Factory.addComponentsGetterSetter(v,"strokeLinearGradientEndPoint",["x","y"]),s.Factory.addGetterSetter(v,"fillLinearGradientEndPointX",0),s.Factory.addGetterSetter(v,"strokeLinearGradientEndPointX",0),s.Factory.addGetterSetter(v,"fillLinearGradientEndPointY",0),s.Factory.addGetterSetter(v,"strokeLinearGradientEndPointY",0),s.Factory.addComponentsGetterSetter(v,"fillRadialGradientStartPoint",["x","y"]),s.Factory.addGetterSetter(v,"fillRadialGradientStartPointX",0),s.Factory.addGetterSetter(v,"fillRadialGradientStartPointY",0),s.Factory.addComponentsGetterSetter(v,"fillRadialGradientEndPoint",["x","y"]),s.Factory.addGetterSetter(v,"fillRadialGradientEndPointX",0),s.Factory.addGetterSetter(v,"fillRadialGradientEndPointY",0),s.Factory.addGetterSetter(v,"fillPatternRotation",0),s.Factory.addGetterSetter(v,"fillRule",void 0,(0,h.getStringValidator)()),s.Factory.backCompat(v,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})},28342:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Stage=e.stages=void 0;let i=r(68588),a=r(1455),n=r(28783),s=r(54417),o=r(11278),h=r(70210),l=r(54417),d=r(98479);var c="mouseleave",u="mouseover",f="mouseenter",g="mousemove",p="mousedown",m="mouseup",v="pointermove",_="pointerdown",y="pointerup",b="pointercancel",x="pointerout",w="pointerleave",S="pointerover",C="pointerenter",k="contextmenu",A="touchstart",P="touchend",T="touchmove",F="touchcancel",E="wheel",R=[[f,"_pointerenter"],[p,"_pointerdown"],[g,"_pointermove"],[m,"_pointerup"],[c,"_pointerleave"],[A,"_pointerdown"],[T,"_pointermove"],[P,"_pointerup"],[F,"_pointercancel"],[u,"_pointerover"],[E,"_wheel"],[k,"_contextmenu"],[_,"_pointerdown"],[v,"_pointermove"],[y,"_pointerup"],[b,"_pointercancel"],["lostpointercapture","_lostpointercapture"]];let O={mouse:{[x]:"mouseout",[w]:c,[S]:u,[C]:f,[v]:g,[_]:p,[y]:m,[b]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[x]:"touchout",[w]:"touchleave",[S]:"touchover",[C]:"touchenter",[v]:T,[_]:A,[y]:P,[b]:F,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[x]:x,[w]:w,[S]:S,[C]:C,[v]:v,[_]:_,[y]:y,[b]:b,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},D=t=>t.indexOf("pointer")>=0?"pointer":t.indexOf("touch")>=0?"touch":"mouse",M=t=>{let e=D(t);return"pointer"===e?s.Konva.pointerEventsEnabled&&O.pointer:"touch"===e?O.touch:"mouse"===e?O.mouse:void 0};function N(t={}){return(t.clipFunc||t.clipWidth||t.clipHeight)&&i.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),t}e.stages=[];class I extends n.Container{constructor(t){super(N(t)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),e.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{N(this.attrs)}),this._checkVisibility()}_validateAdd(t){let e="Layer"===t.getType(),r="FastLayer"===t.getType();e||r||i.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;let t=this.visible()?"":"none";this.content.style.display=t}setContainer(t){if("string"==typeof t){if("."===t.charAt(0)){var e,r=t.slice(1);t=document.getElementsByClassName(r)[0]}else e="#"!==t.charAt(0)?t:t.slice(1),t=document.getElementById(e);if(!t)throw"Can not find container in document with id "+e}return this._setAttr("container",t),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),t.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){var t,e=this.children,r=e.length;for(t=0;t<r;t++)e[t].clear();return this}clone(t){return t||(t={}),t.container="undefined"!=typeof document&&document.createElement("div"),n.Container.prototype.clone.call(this,t)}destroy(){super.destroy();var t=this.content;t&&i.Util._isInDocument(t)&&this.container().removeChild(t);var r=e.stages.indexOf(this);return r>-1&&e.stages.splice(r,1),i.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){let t=this._pointerPositions[0]||this._changedPointerPositions[0];return t?{x:t.x,y:t.y}:(i.Util.warn("Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);"),null)}_getPointerById(t){return this._pointerPositions.find(e=>e.id===t)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(t){(t=t||{}).x=t.x||0,t.y=t.y||0,t.width=t.width||this.width(),t.height=t.height||this.height();var e=new o.SceneCanvas({width:t.width,height:t.height,pixelRatio:t.pixelRatio||1}),r=e.getContext()._context,i=this.children;return(t.x||t.y)&&r.translate(-1*t.x,-1*t.y),i.forEach(function(e){if(e.isVisible()){var i=e._toKonvaCanvas(t);r.drawImage(i._canvas,t.x,t.y,i.getWidth()/i.getPixelRatio(),i.getHeight()/i.getPixelRatio())}}),e}getIntersection(t){if(!t)return null;var e,r=this.children;for(e=r.length-1;e>=0;e--){let i=r[e].getIntersection(t);if(i)return i}return null}_resizeDOM(){var t=this.width(),e=this.height();this.content&&(this.content.style.width=t+"px",this.content.style.height=e+"px"),this.bufferCanvas.setSize(t,e),this.bufferHitCanvas.setSize(t,e),this.children.forEach(r=>{r.setSize({width:t,height:e}),r.draw()})}add(t,...e){if(arguments.length>1){for(var r=0;r<arguments.length;r++)this.add(arguments[r]);return this}super.add(t);var a=this.children.length;return a>5&&i.Util.warn("The stage has "+a+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),t.setSize({width:this.width(),height:this.height()}),t.draw(),s.Konva.isBrowser&&this.content.appendChild(t.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(t){return d.hasPointerCapture(t,this)}setPointerCapture(t){d.setPointerCapture(t,this)}releaseCapture(t){d.releaseCapture(t,this)}getLayers(){return this.children}_bindContentEvents(){s.Konva.isBrowser&&R.forEach(([t,e])=>{this.content.addEventListener(t,t=>{this[e](t)},{passive:!1})})}_pointerenter(t){this.setPointersPositions(t);let e=M(t.type);e&&this._fire(e.pointerenter,{evt:t,target:this,currentTarget:this})}_pointerover(t){this.setPointersPositions(t);let e=M(t.type);e&&this._fire(e.pointerover,{evt:t,target:this,currentTarget:this})}_getTargetShape(t){let e=this[t+"targetShape"];return e&&!e.getStage()&&(e=null),e}_pointerleave(t){let e=M(t.type),r=D(t.type);if(e){this.setPointersPositions(t);var i=this._getTargetShape(r),a=!(s.Konva.isDragging()||s.Konva.isTransforming())||s.Konva.hitOnDragEnabled;i&&a?(i._fireAndBubble(e.pointerout,{evt:t}),i._fireAndBubble(e.pointerleave,{evt:t}),this._fire(e.pointerleave,{evt:t,target:this,currentTarget:this}),this[r+"targetShape"]=null):a&&(this._fire(e.pointerleave,{evt:t,target:this,currentTarget:this}),this._fire(e.pointerout,{evt:t,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}}_pointerdown(t){let e=M(t.type),r=D(t.type);if(e){this.setPointersPositions(t);var i=!1;this._changedPointerPositions.forEach(a=>{var n=this.getIntersection(a);if(h.DD.justDragged=!1,s.Konva["_"+r+"ListenClick"]=!0,!n||!n.isListening()){this[r+"ClickStartShape"]=void 0;return}s.Konva.capturePointerEventsEnabled&&n.setPointerCapture(a.id),this[r+"ClickStartShape"]=n,n._fireAndBubble(e.pointerdown,{evt:t,pointerId:a.id}),i=!0;let o=t.type.indexOf("touch")>=0;n.preventDefault()&&t.cancelable&&o&&t.preventDefault()}),i||this._fire(e.pointerdown,{evt:t,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}}_pointermove(t){let e=M(t.type),r=D(t.type);if(!e||(s.Konva.isDragging()&&h.DD.node.preventDefault()&&t.cancelable&&t.preventDefault(),this.setPointersPositions(t),!(!(s.Konva.isDragging()||s.Konva.isTransforming())||s.Konva.hitOnDragEnabled)))return;var i={};let a=!1;var n=this._getTargetShape(r);this._changedPointerPositions.forEach(s=>{let o=d.getCapturedShape(s.id)||this.getIntersection(s),h=s.id,l={evt:t,pointerId:h};var c=n!==o;if(c&&n&&(n._fireAndBubble(e.pointerout,{...l},o),n._fireAndBubble(e.pointerleave,{...l},o)),o){if(i[o._id])return;i[o._id]=!0}o&&o.isListening()?(a=!0,c&&(o._fireAndBubble(e.pointerover,{...l},n),o._fireAndBubble(e.pointerenter,{...l},n),this[r+"targetShape"]=o),o._fireAndBubble(e.pointermove,{...l})):n&&(this._fire(e.pointerover,{evt:t,target:this,currentTarget:this,pointerId:h}),this[r+"targetShape"]=null)}),a||this._fire(e.pointermove,{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(t){let e=M(t.type),r=D(t.type);if(!e)return;this.setPointersPositions(t);let i=this[r+"ClickStartShape"],a=this[r+"ClickEndShape"];var n={};let o=!1;this._changedPointerPositions.forEach(l=>{let c=d.getCapturedShape(l.id)||this.getIntersection(l);if(c){if(c.releaseCapture(l.id),n[c._id])return;n[c._id]=!0}let u=l.id,f={evt:t,pointerId:u},g=!1;s.Konva["_"+r+"InDblClickWindow"]?(g=!0,clearTimeout(this[r+"DblTimeout"])):h.DD.justDragged||(s.Konva["_"+r+"InDblClickWindow"]=!0,clearTimeout(this[r+"DblTimeout"])),this[r+"DblTimeout"]=setTimeout(function(){s.Konva["_"+r+"InDblClickWindow"]=!1},s.Konva.dblClickWindow),c&&c.isListening()?(o=!0,this[r+"ClickEndShape"]=c,c._fireAndBubble(e.pointerup,{...f}),s.Konva["_"+r+"ListenClick"]&&i&&i===c&&(c._fireAndBubble(e.pointerclick,{...f}),g&&a&&a===c&&c._fireAndBubble(e.pointerdblclick,{...f}))):(this[r+"ClickEndShape"]=null,s.Konva["_"+r+"ListenClick"]&&this._fire(e.pointerclick,{evt:t,target:this,currentTarget:this,pointerId:u}),g&&this._fire(e.pointerdblclick,{evt:t,target:this,currentTarget:this,pointerId:u}))}),o||this._fire(e.pointerup,{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),s.Konva["_"+r+"ListenClick"]=!1,t.cancelable&&"touch"!==r&&t.preventDefault()}_contextmenu(t){this.setPointersPositions(t);var e=this.getIntersection(this.getPointerPosition());e&&e.isListening()?e._fireAndBubble(k,{evt:t}):this._fire(k,{evt:t,target:this,currentTarget:this})}_wheel(t){this.setPointersPositions(t);var e=this.getIntersection(this.getPointerPosition());e&&e.isListening()?e._fireAndBubble(E,{evt:t}):this._fire(E,{evt:t,target:this,currentTarget:this})}_pointercancel(t){this.setPointersPositions(t);let e=d.getCapturedShape(t.pointerId)||this.getIntersection(this.getPointerPosition());e&&e._fireAndBubble(y,d.createEvent(t)),d.releaseCapture(t.pointerId)}_lostpointercapture(t){d.releaseCapture(t.pointerId)}setPointersPositions(t){var e=this._getContentPosition(),r=null,a=null;void 0!==(t=t||window.event).touches?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(t.touches,t=>{this._pointerPositions.push({id:t.identifier,x:(t.clientX-e.left)/e.scaleX,y:(t.clientY-e.top)/e.scaleY})}),Array.prototype.forEach.call(t.changedTouches||t.touches,t=>{this._changedPointerPositions.push({id:t.identifier,x:(t.clientX-e.left)/e.scaleX,y:(t.clientY-e.top)/e.scaleY})})):(r=(t.clientX-e.left)/e.scaleX,a=(t.clientY-e.top)/e.scaleY,this.pointerPos={x:r,y:a},this._pointerPositions=[{x:r,y:a,id:i.Util._getFirstPointerId(t)}],this._changedPointerPositions=[{x:r,y:a,id:i.Util._getFirstPointerId(t)}])}_setPointerPosition(t){i.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(t)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};var t=this.content.getBoundingClientRect();return{top:t.top,left:t.left,scaleX:t.width/this.content.clientWidth||1,scaleY:t.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new o.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new o.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),s.Konva.isBrowser){var t=this.container();if(!t)throw"Stage has no container. A container is required.";t.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),t.appendChild(this.content),this._resizeDOM()}}cache(){return i.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(t){t.batchDraw()}),this}}e.Stage=I,I.prototype.nodeType="Stage",(0,l._registerNode)(I),a.Factory.addGetterSetter(I,"container"),s.Konva.isBrowser&&document.addEventListener("visibilitychange",()=>{e.stages.forEach(t=>{t.batchDraw()})})},48017:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Easings=e.Tween=void 0;let i=r(68588),a=r(16745),n=r(77939),s=r(54417);var o={node:1,duration:1,easing:1,onFinish:1,yoyo:1},h=0,l=["fill","stroke","shadowColor"];class d{constructor(t,e,r,i,a,n,s){this.prop=t,this.propFunc=e,this.begin=i,this._pos=i,this.duration=n,this._change=0,this.prevPos=0,this.yoyo=s,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=r,this._change=a-this.begin,this.pause()}fire(t){var e=this[t];e&&e()}setTime(t){t>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():t<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=t,this.update())}getTime(){return this._time}setPosition(t){this.prevPos=this._pos,this.propFunc(t),this._pos=t}getPosition(t){return void 0===t&&(t=this._time),this.func(t,this.begin,this._change,this.duration)}play(){this.state=2,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=3,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(t){this.pause(),this._time=t,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){var t=this.getTimer()-this._startTime;2===this.state?this.setTime(t):3===this.state&&this.setTime(this.duration-t)}pause(){this.state=1,this.fire("onPause")}getTimer(){return new Date().getTime()}}class c{constructor(t){var r,n,l=this,u=t.node,f=u._id,g=t.easing||e.Easings.Linear,p=!!t.yoyo;r=void 0===t.duration?.3:0===t.duration?.001:t.duration,this.node=u,this._id=h++;var m=u.getLayer()||(u instanceof s.Konva.Stage?u.getLayers():null);for(n in m||i.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new a.Animation(function(){l.tween.onEnterFrame()},m),this.tween=new d(n,function(t){l._tweenFunc(t)},g,0,1,1e3*r,p),this._addListeners(),c.attrs[f]||(c.attrs[f]={}),c.attrs[f][this._id]||(c.attrs[f][this._id]={}),c.tweens[f]||(c.tweens[f]={}),t)void 0===o[n]&&this._addAttr(n,t[n]);this.reset(),this.onFinish=t.onFinish,this.onReset=t.onReset,this.onUpdate=t.onUpdate}_addAttr(t,e){var r,a,n,s,o,h,d,u,f=this.node,g=f._id;if((n=c.tweens[g][t])&&delete c.attrs[g][n][t],r=f.getAttr(t),i.Util._isArray(e)){if(a=[],o=Math.max(e.length,r.length),"points"===t&&e.length!==r.length&&(e.length>r.length?(d=r,r=i.Util._prepareArrayForTween(r,e,f.closed())):(h=e,e=i.Util._prepareArrayForTween(e,r,f.closed()))),0===t.indexOf("fill"))for(s=0;s<o;s++)if(s%2==0)a.push(e[s]-r[s]);else{var p=i.Util.colorToRGBA(r[s]);u=i.Util.colorToRGBA(e[s]),r[s]=p,a.push({r:u.r-p.r,g:u.g-p.g,b:u.b-p.b,a:u.a-p.a})}else for(s=0;s<o;s++)a.push(e[s]-r[s])}else -1!==l.indexOf(t)?(r=i.Util.colorToRGBA(r),a={r:(u=i.Util.colorToRGBA(e)).r-r.r,g:u.g-r.g,b:u.b-r.b,a:u.a-r.a}):a=e-r;c.attrs[g][this._id][t]={start:r,diff:a,end:e,trueEnd:h,trueStart:d},c.tweens[g][t]=this._id}_tweenFunc(t){var e,r,a,n,s,o,h,d,u=this.node,f=c.attrs[u._id][this._id];for(e in f){if(a=(r=f[e]).start,n=r.diff,d=r.end,i.Util._isArray(a)){if(s=[],h=Math.max(a.length,d.length),0===e.indexOf("fill"))for(o=0;o<h;o++)o%2==0?s.push((a[o]||0)+n[o]*t):s.push("rgba("+Math.round(a[o].r+n[o].r*t)+","+Math.round(a[o].g+n[o].g*t)+","+Math.round(a[o].b+n[o].b*t)+","+(a[o].a+n[o].a*t)+")");else for(o=0;o<h;o++)s.push((a[o]||0)+n[o]*t)}else s=-1!==l.indexOf(e)?"rgba("+Math.round(a.r+n.r*t)+","+Math.round(a.g+n.g*t)+","+Math.round(a.b+n.b*t)+","+(a.a+n.a*t)+")":a+n*t;u.setAttr(e,s)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{var t=this.node,e=c.attrs[t._id][this._id];e.points&&e.points.trueEnd&&t.setAttr("points",e.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{var t=this.node,e=c.attrs[t._id][this._id];e.points&&e.points.trueStart&&t.points(e.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(t){return this.tween.seek(1e3*t),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){var t,e=this.node._id,r=this._id,i=c.tweens[e];for(t in this.pause(),i)delete c.tweens[e][t];delete c.attrs[e][r]}}e.Tween=c,c.attrs={},c.tweens={},n.Node.prototype.to=function(t){var e=t.onFinish;t.node=this,t.onFinish=function(){this.destroy(),e&&e()},new c(t).play()},e.Easings={BackEaseIn:(t,e,r,i)=>r*(t/=i)*t*(2.70158*t-1.70158)+e,BackEaseOut:(t,e,r,i)=>r*((t=t/i-1)*t*(2.70158*t+1.70158)+1)+e,BackEaseInOut(t,e,r,i){var a=1.70158;return(t/=i/2)<1?r/2*(t*t*(((a*=1.525)+1)*t-a))+e:r/2*((t-=2)*t*(((a*=1.525)+1)*t+a)+2)+e},ElasticEaseIn(t,e,r,i,a,n){var s=0;return 0===t?e:1==(t/=i)?e+r:(n||(n=.3*i),!a||a<Math.abs(r)?(a=r,s=n/4):s=n/(2*Math.PI)*Math.asin(r/a),-(a*Math.pow(2,10*(t-=1))*Math.sin((t*i-s)*(2*Math.PI)/n))+e)},ElasticEaseOut(t,e,r,i,a,n){var s=0;return 0===t?e:1==(t/=i)?e+r:(n||(n=.3*i),!a||a<Math.abs(r)?(a=r,s=n/4):s=n/(2*Math.PI)*Math.asin(r/a),a*Math.pow(2,-10*t)*Math.sin((t*i-s)*(2*Math.PI)/n)+r+e)},ElasticEaseInOut(t,e,r,i,a,n){var s=0;return 0===t?e:2==(t/=i/2)?e+r:(n||(n=i*(.3*1.5)),!a||a<Math.abs(r)?(a=r,s=n/4):s=n/(2*Math.PI)*Math.asin(r/a),t<1)?-.5*(a*Math.pow(2,10*(t-=1))*Math.sin((t*i-s)*(2*Math.PI)/n))+e:a*Math.pow(2,-10*(t-=1))*Math.sin((t*i-s)*(2*Math.PI)/n)*.5+r+e},BounceEaseOut:(t,e,r,i)=>(t/=i)<1/2.75?r*(7.5625*t*t)+e:t<2/2.75?r*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?r*(7.5625*(t-=2.25/2.75)*t+.9375)+e:r*(7.5625*(t-=2.625/2.75)*t+.984375)+e,BounceEaseIn:(t,r,i,a)=>i-e.Easings.BounceEaseOut(a-t,0,i,a)+r,BounceEaseInOut:(t,r,i,a)=>t<a/2?.5*e.Easings.BounceEaseIn(2*t,0,i,a)+r:.5*e.Easings.BounceEaseOut(2*t-a,0,i,a)+.5*i+r,EaseIn:(t,e,r,i)=>r*(t/=i)*t+e,EaseOut:(t,e,r,i)=>-r*(t/=i)*(t-2)+e,EaseInOut:(t,e,r,i)=>(t/=i/2)<1?r/2*t*t+e:-r/2*(--t*(t-2)-1)+e,StrongEaseIn:(t,e,r,i)=>r*(t/=i)*t*t*t*t+e,StrongEaseOut:(t,e,r,i)=>r*((t=t/i-1)*t*t*t*t+1)+e,StrongEaseInOut:(t,e,r,i)=>(t/=i/2)<1?r/2*t*t*t*t*t+e:r/2*((t-=2)*t*t*t*t+2)+e,Linear:(t,e,r,i)=>r*t/i+e}},68588:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Util=e.Transform=void 0;let i=r(54417);class a{constructor(t=[1,0,0,1,0,0]){this.dirty=!1,this.m=t&&t.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new a(this.m)}copyInto(t){t.m[0]=this.m[0],t.m[1]=this.m[1],t.m[2]=this.m[2],t.m[3]=this.m[3],t.m[4]=this.m[4],t.m[5]=this.m[5]}point(t){var e=this.m;return{x:e[0]*t.x+e[2]*t.y+e[4],y:e[1]*t.x+e[3]*t.y+e[5]}}translate(t,e){return this.m[4]+=this.m[0]*t+this.m[2]*e,this.m[5]+=this.m[1]*t+this.m[3]*e,this}scale(t,e){return this.m[0]*=t,this.m[1]*=t,this.m[2]*=e,this.m[3]*=e,this}rotate(t){var e=Math.cos(t),r=Math.sin(t),i=this.m[0]*e+this.m[2]*r,a=this.m[1]*e+this.m[3]*r,n=-(this.m[0]*r)+this.m[2]*e,s=-(this.m[1]*r)+this.m[3]*e;return this.m[0]=i,this.m[1]=a,this.m[2]=n,this.m[3]=s,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(t,e){var r=this.m[0]+this.m[2]*e,i=this.m[1]+this.m[3]*e,a=this.m[2]+this.m[0]*t,n=this.m[3]+this.m[1]*t;return this.m[0]=r,this.m[1]=i,this.m[2]=a,this.m[3]=n,this}multiply(t){var e=this.m[0]*t.m[0]+this.m[2]*t.m[1],r=this.m[1]*t.m[0]+this.m[3]*t.m[1],i=this.m[0]*t.m[2]+this.m[2]*t.m[3],a=this.m[1]*t.m[2]+this.m[3]*t.m[3],n=this.m[0]*t.m[4]+this.m[2]*t.m[5]+this.m[4],s=this.m[1]*t.m[4]+this.m[3]*t.m[5]+this.m[5];return this.m[0]=e,this.m[1]=r,this.m[2]=i,this.m[3]=a,this.m[4]=n,this.m[5]=s,this}invert(){var t=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),e=this.m[3]*t,r=-this.m[1]*t,i=-this.m[2]*t,a=this.m[0]*t,n=t*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),s=t*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=e,this.m[1]=r,this.m[2]=i,this.m[3]=a,this.m[4]=n,this.m[5]=s,this}getMatrix(){return this.m}decompose(){var t=this.m[0],r=this.m[1],i=this.m[2],a=this.m[3],n=this.m[4],s=this.m[5],o=t*a-r*i;let h={x:n,y:s,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(0!=t||0!=r){var l=Math.sqrt(t*t+r*r);h.rotation=r>0?Math.acos(t/l):-Math.acos(t/l),h.scaleX=l,h.scaleY=o/l,h.skewX=(t*i+r*a)/o,h.skewY=0}else if(0!=i||0!=a){var d=Math.sqrt(i*i+a*a);h.rotation=Math.PI/2-(a>0?Math.acos(-i/d):-Math.acos(i/d)),h.scaleX=o/d,h.scaleY=d,h.skewX=0,h.skewY=(t*i+r*a)/o}return h.rotation=e.Util._getRotation(h.rotation),h}}e.Transform=a;var n=Math.PI/180,s=180/Math.PI,o="Konva error: ",h={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},l=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/,d=[];let c="undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||function(t){setTimeout(t,60)};e.Util={_isElement:t=>!!(t&&1==t.nodeType),_isFunction:t=>!!(t&&t.constructor&&t.call&&t.apply),_isPlainObject:t=>!!t&&t.constructor===Object,_isArray:t=>"[object Array]"===Object.prototype.toString.call(t),_isNumber:t=>"[object Number]"===Object.prototype.toString.call(t)&&!isNaN(t)&&isFinite(t),_isString:t=>"[object String]"===Object.prototype.toString.call(t),_isBoolean:t=>"[object Boolean]"===Object.prototype.toString.call(t),isObject:t=>t instanceof Object,isValidSelector(t){if("string"!=typeof t)return!1;var e=t[0];return"#"===e||"."===e||e===e.toUpperCase()},_sign:t=>0===t?1:t>0?1:-1,requestAnimFrame(t){d.push(t),1===d.length&&c(function(){let t=d;d=[],t.forEach(function(t){t()})})},createCanvasElement(){var t=document.createElement("canvas");try{t.style=t.style||{}}catch(t){}return t},createImageElement:()=>document.createElement("img"),_isInDocument(t){for(;t=t.parentNode;)if(t==document)return!0;return!1},_urlToImage(t,r){var i=e.Util.createImageElement();i.onload=function(){r(i)},i.src=t},_rgbToHex:(t,e,r)=>(16777216+(t<<16)+(e<<8)+r).toString(16).slice(1),_hexToRgb(t){var e=parseInt(t=t.replace("#",""),16);return{r:e>>16&255,g:e>>8&255,b:255&e}},getRandomColor(){for(var t=(16777215*Math.random()<<0).toString(16);t.length<6;)t="0"+t;return"#"+t},getRGB(t){var e;return t in h?{r:(e=h[t])[0],g:e[1],b:e[2]}:"#"===t[0]?this._hexToRgb(t.substring(1)):"rgb("===t.substr(0,4)?{r:parseInt((e=l.exec(t.replace(/ /g,"")))[1],10),g:parseInt(e[2],10),b:parseInt(e[3],10)}:{r:0,g:0,b:0}},colorToRGBA:t=>(t=t||"black",e.Util._namedColorToRBA(t)||e.Util._hex3ColorToRGBA(t)||e.Util._hex4ColorToRGBA(t)||e.Util._hex6ColorToRGBA(t)||e.Util._hex8ColorToRGBA(t)||e.Util._rgbColorToRGBA(t)||e.Util._rgbaColorToRGBA(t)||e.Util._hslColorToRGBA(t)),_namedColorToRBA(t){var e=h[t.toLowerCase()];return e?{r:e[0],g:e[1],b:e[2],a:1}:null},_rgbColorToRGBA(t){if(0===t.indexOf("rgb(")){var e=(t=t.match(/rgb\(([^)]+)\)/)[1]).split(/ *, */).map(Number);return{r:e[0],g:e[1],b:e[2],a:1}}},_rgbaColorToRGBA(t){if(0===t.indexOf("rgba(")){var e=(t=t.match(/rgba\(([^)]+)\)/)[1]).split(/ *, */).map((t,e)=>"%"===t.slice(-1)?3===e?parseInt(t)/100:parseInt(t)/100*255:Number(t));return{r:e[0],g:e[1],b:e[2],a:e[3]}}},_hex8ColorToRGBA(t){if("#"===t[0]&&9===t.length)return{r:parseInt(t.slice(1,3),16),g:parseInt(t.slice(3,5),16),b:parseInt(t.slice(5,7),16),a:parseInt(t.slice(7,9),16)/255}},_hex6ColorToRGBA(t){if("#"===t[0]&&7===t.length)return{r:parseInt(t.slice(1,3),16),g:parseInt(t.slice(3,5),16),b:parseInt(t.slice(5,7),16),a:1}},_hex4ColorToRGBA(t){if("#"===t[0]&&5===t.length)return{r:parseInt(t[1]+t[1],16),g:parseInt(t[2]+t[2],16),b:parseInt(t[3]+t[3],16),a:parseInt(t[4]+t[4],16)/255}},_hex3ColorToRGBA(t){if("#"===t[0]&&4===t.length)return{r:parseInt(t[1]+t[1],16),g:parseInt(t[2]+t[2],16),b:parseInt(t[3]+t[3],16),a:1}},_hslColorToRGBA(t){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(t)){let e,r,i;let[a,...n]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(t),s=Number(n[0])/360,o=Number(n[1])/100,h=Number(n[2])/100;if(0===o)return{r:Math.round(i=255*h),g:Math.round(i),b:Math.round(i),a:1};e=h<.5?h*(1+o):h+o-h*o;let l=2*h-e,d=[0,0,0];for(let t=0;t<3;t++)(r=s+-(1/3*(t-1)))<0&&r++,r>1&&r--,i=6*r<1?l+(e-l)*6*r:2*r<1?e:3*r<2?l+(e-l)*(2/3-r)*6:l,d[t]=255*i;return{r:Math.round(d[0]),g:Math.round(d[1]),b:Math.round(d[2]),a:1}}},haveIntersection:(t,e)=>!(e.x>t.x+t.width||e.x+e.width<t.x||e.y>t.y+t.height||e.y+e.height<t.y),cloneObject(t){var e={};for(var r in t)this._isPlainObject(t[r])?e[r]=this.cloneObject(t[r]):this._isArray(t[r])?e[r]=this.cloneArray(t[r]):e[r]=t[r];return e},cloneArray:t=>t.slice(0),degToRad:t=>t*n,radToDeg:t=>t*s,_degToRad:t=>(e.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),e.Util.degToRad(t)),_radToDeg:t=>(e.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),e.Util.radToDeg(t)),_getRotation:t=>i.Konva.angleDeg?e.Util.radToDeg(t):t,_capitalize:t=>t.charAt(0).toUpperCase()+t.slice(1),throw(t){throw Error(o+t)},error(t){console.error(o+t)},warn(t){i.Konva.showWarnings&&console.warn("Konva warning: "+t)},each(t,e){for(var r in t)e(r,t[r])},_inRange:(t,e,r)=>e<=t&&t<r,_getProjectionToSegment(t,e,r,i,a,n){var s,o,h,l=(t-r)*(t-r)+(e-i)*(e-i);if(0==l)s=t,o=e,h=(a-r)*(a-r)+(n-i)*(n-i);else{var d=((a-t)*(r-t)+(n-e)*(i-e))/l;d<0?(s=t,o=e,h=(t-a)*(t-a)+(e-n)*(e-n)):d>1?(s=r,o=i,h=(r-a)*(r-a)+(i-n)*(i-n)):h=((s=t+d*(r-t))-a)*(s-a)+((o=e+d*(i-e))-n)*(o-n)}return[s,o,h]},_getProjectionToLine(t,r,i){var a=e.Util.cloneObject(t),n=Number.MAX_VALUE;return r.forEach(function(s,o){if(i||o!==r.length-1){var h=r[(o+1)%r.length],l=e.Util._getProjectionToSegment(s.x,s.y,h.x,h.y,t.x,t.y),d=l[0],c=l[1],u=l[2];u<n&&(a.x=d,a.y=c,n=u)}}),a},_prepareArrayForTween(t,r,i){var a,n=[],s=[];if(t.length>r.length){var o=r;r=t,t=o}for(a=0;a<t.length;a+=2)n.push({x:t[a],y:t[a+1]});for(a=0;a<r.length;a+=2)s.push({x:r[a],y:r[a+1]});var h=[];return s.forEach(function(t){var r=e.Util._getProjectionToLine(t,n,i);h.push(r.x),h.push(r.y)}),h},_prepareToStringify(t){var r;for(var i in t.visitedByCircularReferenceRemoval=!0,t)if(t.hasOwnProperty(i)&&t[i]&&"object"==typeof t[i]){if(r=Object.getOwnPropertyDescriptor(t,i),t[i].visitedByCircularReferenceRemoval||e.Util._isElement(t[i])){if(!r.configurable)return null;delete t[i]}else if(null===e.Util._prepareToStringify(t[i])){if(!r.configurable)return null;delete t[i]}}return delete t.visitedByCircularReferenceRemoval,t},_assign(t,e){for(var r in e)t[r]=e[r];return t},_getFirstPointerId:t=>t.touches?t.changedTouches[0].identifier:t.pointerId||999,releaseCanvas(...t){i.Konva.releaseCanvasOnDestroy&&t.forEach(t=>{t.width=0,t.height=0})},drawRoundedRectPath(t,e,r,i){let a=0,n=0,s=0,o=0;"number"==typeof i?a=n=s=o=Math.min(i,e/2,r/2):(a=Math.min(i[0]||0,e/2,r/2),n=Math.min(i[1]||0,e/2,r/2),o=Math.min(i[2]||0,e/2,r/2),s=Math.min(i[3]||0,e/2,r/2)),t.moveTo(a,0),t.lineTo(e-n,0),t.arc(e-n,n,n,3*Math.PI/2,0,!1),t.lineTo(e,r-o),t.arc(e-o,r-o,o,0,Math.PI/2,!1),t.lineTo(s,r),t.arc(s,r-s,s,Math.PI/2,Math.PI,!1),t.lineTo(0,a),t.arc(a,a,a,Math.PI,3*Math.PI/2,!1)}}},53774:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getComponentValidator=e.getBooleanValidator=e.getNumberArrayValidator=e.getFunctionValidator=e.getStringOrGradientValidator=e.getStringValidator=e.getNumberOrAutoValidator=e.getNumberOrArrayOfNumbersValidator=e.getNumberValidator=e.alphaComponent=e.RGBComponent=void 0;let i=r(54417),a=r(68588);function n(t){return a.Util._isString(t)?'"'+t+'"':"[object Number]"===Object.prototype.toString.call(t)||a.Util._isBoolean(t)?t:Object.prototype.toString.call(t)}e.RGBComponent=function(t){return t>255?255:t<0?0:Math.round(t)},e.alphaComponent=function(t){return t>1?1:t<1e-4?1e-4:t},e.getNumberValidator=function(){if(i.Konva.isUnminified)return function(t,e){return a.Util._isNumber(t)||a.Util.warn(n(t)+' is a not valid value for "'+e+'" attribute. The value should be a number.'),t}},e.getNumberOrArrayOfNumbersValidator=function(t){if(i.Konva.isUnminified)return function(e,r){let i=a.Util._isNumber(e),s=a.Util._isArray(e)&&e.length==t;return i||s||a.Util.warn(n(e)+' is a not valid value for "'+r+'" attribute. The value should be a number or Array<number>('+t+")"),e}},e.getNumberOrAutoValidator=function(){if(i.Konva.isUnminified)return function(t,e){return a.Util._isNumber(t)||"auto"===t||a.Util.warn(n(t)+' is a not valid value for "'+e+'" attribute. The value should be a number or "auto".'),t}},e.getStringValidator=function(){if(i.Konva.isUnminified)return function(t,e){return a.Util._isString(t)||a.Util.warn(n(t)+' is a not valid value for "'+e+'" attribute. The value should be a string.'),t}},e.getStringOrGradientValidator=function(){if(i.Konva.isUnminified)return function(t,e){let r=a.Util._isString(t),i="[object CanvasGradient]"===Object.prototype.toString.call(t)||t&&t.addColorStop;return r||i||a.Util.warn(n(t)+' is a not valid value for "'+e+'" attribute. The value should be a string or a native gradient.'),t}},e.getFunctionValidator=function(){if(i.Konva.isUnminified)return function(t,e){return a.Util._isFunction(t)||a.Util.warn(n(t)+' is a not valid value for "'+e+'" attribute. The value should be a function.'),t}},e.getNumberArrayValidator=function(){if(i.Konva.isUnminified)return function(t,e){let r=Int8Array?Object.getPrototypeOf(Int8Array):null;return r&&t instanceof r||(a.Util._isArray(t)?t.forEach(function(t){a.Util._isNumber(t)||a.Util.warn('"'+e+'" attribute has non numeric element '+t+". Make sure that all elements are numbers.")}):a.Util.warn(n(t)+' is a not valid value for "'+e+'" attribute. The value should be a array of numbers.')),t}},e.getBooleanValidator=function(){if(i.Konva.isUnminified)return function(t,e){return!0===t||!1===t||a.Util.warn(n(t)+' is a not valid value for "'+e+'" attribute. The value should be a boolean.'),t}},e.getComponentValidator=function(t){if(i.Konva.isUnminified)return function(e,r){return null==e||a.Util.isObject(e)||a.Util.warn(n(e)+' is a not valid value for "'+r+'" attribute. The value should be an object with properties '+t),e}}},3986:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Konva=void 0;let i=r(54417),a=r(68588),n=r(77939),s=r(28783),o=r(28342),h=r(44415),l=r(73980),d=r(58985),c=r(70210),u=r(97955),f=r(16745),g=r(48017),p=r(23442),m=r(11278);e.Konva=a.Util._assign(i.Konva,{Util:a.Util,Transform:a.Transform,Node:n.Node,Container:s.Container,Stage:o.Stage,stages:o.stages,Layer:h.Layer,FastLayer:l.FastLayer,Group:d.Group,DD:c.DD,Shape:u.Shape,shapes:u.shapes,Animation:f.Animation,Tween:g.Tween,Easings:g.Easings,Context:p.Context,Canvas:m.Canvas}),e.default=e.Konva},52076:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Konva=void 0;let i=r(3986),a=r(90119),n=r(22064),s=r(7643),o=r(30535),h=r(71298),l=r(56067),d=r(27149),c=r(87339),u=r(75244),f=r(31785),g=r(60657),p=r(88986),m=r(71964),v=r(23787),_=r(82831),y=r(29516),b=r(29846),x=r(52527),w=r(6672),S=r(35309),C=r(71695),k=r(89621),A=r(61179),P=r(67194),T=r(3925),F=r(15751),E=r(66588),R=r(73565),O=r(25929),D=r(47233),M=r(18590),N=r(18280),I=r(3438),L=r(36703),G=r(71665),B=r(31863);e.Konva=i.Konva.Util._assign(i.Konva,{Arc:a.Arc,Arrow:n.Arrow,Circle:s.Circle,Ellipse:o.Ellipse,Image:h.Image,Label:l.Label,Tag:l.Tag,Line:d.Line,Path:c.Path,Rect:u.Rect,RegularPolygon:f.RegularPolygon,Ring:g.Ring,Sprite:p.Sprite,Star:m.Star,Text:v.Text,TextPath:_.TextPath,Transformer:y.Transformer,Wedge:b.Wedge,Filters:{Blur:x.Blur,Brighten:w.Brighten,Contrast:S.Contrast,Emboss:C.Emboss,Enhance:k.Enhance,Grayscale:A.Grayscale,HSL:P.HSL,HSV:T.HSV,Invert:F.Invert,Kaleidoscope:E.Kaleidoscope,Mask:R.Mask,Noise:O.Noise,Pixelate:D.Pixelate,Posterize:M.Posterize,RGB:N.RGB,RGBA:I.RGBA,Sepia:L.Sepia,Solarize:G.Solarize,Threshold:B.Threshold}})},52527:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Blur=void 0;let i=r(1455),a=r(77939),n=r(53774);function s(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}var o=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],h=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];e.Blur=function(t){var e=Math.round(this.blurRadius());e>0&&function(t,e){var r,i,a,n,l,d,c,u,f,g,p,m,v,_,y,b,x,w,S,C,k,A,P,T,F=t.data,E=t.width,R=t.height,O=e+e+1,D=E-1,M=R-1,N=e+1,I=N*(N+1)/2,L=new s,G=null,B=L,z=null,U=null,j=o[e],W=h[e];for(a=1;a<O;a++)B=B.next=new s,a===N&&(G=B);for(i=0,B.next=L,c=d=0;i<R;i++){for(b=x=w=S=u=f=g=p=0,m=N*(C=F[d]),v=N*(k=F[d+1]),_=N*(A=F[d+2]),y=N*(P=F[d+3]),u+=I*C,f+=I*k,g+=I*A,p+=I*P,B=L,a=0;a<N;a++)B.r=C,B.g=k,B.b=A,B.a=P,B=B.next;for(a=1;a<N;a++)n=d+((D<a?D:a)<<2),u+=(B.r=C=F[n])*(T=N-a),f+=(B.g=k=F[n+1])*T,g+=(B.b=A=F[n+2])*T,p+=(B.a=P=F[n+3])*T,b+=C,x+=k,w+=A,S+=P,B=B.next;for(r=0,z=L,U=G;r<E;r++)F[d+3]=P=p*j>>W,0!==P?(P=255/P,F[d]=(u*j>>W)*P,F[d+1]=(f*j>>W)*P,F[d+2]=(g*j>>W)*P):F[d]=F[d+1]=F[d+2]=0,u-=m,f-=v,g-=_,p-=y,m-=z.r,v-=z.g,_-=z.b,y-=z.a,n=c+((n=r+e+1)<D?n:D)<<2,b+=z.r=F[n],x+=z.g=F[n+1],w+=z.b=F[n+2],S+=z.a=F[n+3],u+=b,f+=x,g+=w,p+=S,z=z.next,m+=C=U.r,v+=k=U.g,_+=A=U.b,y+=P=U.a,b-=C,x-=k,w-=A,S-=P,U=U.next,d+=4;c+=E}for(r=0;r<E;r++){for(x=w=S=b=f=g=p=u=0,m=N*(C=F[d=r<<2]),v=N*(k=F[d+1]),_=N*(A=F[d+2]),y=N*(P=F[d+3]),u+=I*C,f+=I*k,g+=I*A,p+=I*P,B=L,a=0;a<N;a++)B.r=C,B.g=k,B.b=A,B.a=P,B=B.next;for(a=1,l=E;a<=e;a++)d=l+r<<2,u+=(B.r=C=F[d])*(T=N-a),f+=(B.g=k=F[d+1])*T,g+=(B.b=A=F[d+2])*T,p+=(B.a=P=F[d+3])*T,b+=C,x+=k,w+=A,S+=P,B=B.next,a<M&&(l+=E);for(i=0,d=r,z=L,U=G;i<R;i++)F[(n=d<<2)+3]=P=p*j>>W,P>0?(P=255/P,F[n]=(u*j>>W)*P,F[n+1]=(f*j>>W)*P,F[n+2]=(g*j>>W)*P):F[n]=F[n+1]=F[n+2]=0,u-=m,f-=v,g-=_,p-=y,m-=z.r,v-=z.g,_-=z.b,y-=z.a,n=r+((n=i+N)<M?n:M)*E<<2,u+=b+=z.r=F[n],f+=x+=z.g=F[n+1],g+=w+=z.b=F[n+2],p+=S+=z.a=F[n+3],z=z.next,m+=C=U.r,v+=k=U.g,_+=A=U.b,y+=P=U.a,b-=C,x-=k,w-=A,S-=P,U=U.next,d+=E}}(t,e)},i.Factory.addGetterSetter(a.Node,"blurRadius",0,(0,n.getNumberValidator)(),i.Factory.afterSetFilter)},6672:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Brighten=void 0;let i=r(1455),a=r(77939),n=r(53774);e.Brighten=function(t){var e,r=255*this.brightness(),i=t.data,a=i.length;for(e=0;e<a;e+=4)i[e]+=r,i[e+1]+=r,i[e+2]+=r},i.Factory.addGetterSetter(a.Node,"brightness",0,(0,n.getNumberValidator)(),i.Factory.afterSetFilter)},35309:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Contrast=void 0;let i=r(1455),a=r(77939),n=r(53774);e.Contrast=function(t){var e,r=Math.pow((this.contrast()+100)/100,2),i=t.data,a=i.length,n=150,s=150,o=150;for(e=0;e<a;e+=4)n=i[e],s=i[e+1],o=i[e+2],n/=255,n-=.5,n*=r,n+=.5,n*=255,s/=255,s-=.5,s*=r,s+=.5,s*=255,o/=255,o-=.5,o*=r,o+=.5,o*=255,n=n<0?0:n>255?255:n,s=s<0?0:s>255?255:s,o=o<0?0:o>255?255:o,i[e]=n,i[e+1]=s,i[e+2]=o},i.Factory.addGetterSetter(a.Node,"contrast",0,(0,n.getNumberValidator)(),i.Factory.afterSetFilter)},71695:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Emboss=void 0;let i=r(1455),a=r(77939),n=r(68588),s=r(53774);e.Emboss=function(t){var e=10*this.embossStrength(),r=255*this.embossWhiteLevel(),i=this.embossDirection(),a=this.embossBlend(),s=0,o=0,h=t.data,l=t.width,d=t.height,c=4*l,u=d;switch(i){case"top-left":s=-1,o=-1;break;case"top":s=-1,o=0;break;case"top-right":s=-1,o=1;break;case"right":s=0,o=1;break;case"bottom-right":s=1,o=1;break;case"bottom":s=1,o=0;break;case"bottom-left":s=1,o=-1;break;case"left":s=0,o=-1;break;default:n.Util.error("Unknown emboss direction: "+i)}do{var f=(u-1)*c,g=s;u+g<1&&(g=0),u+g>d&&(g=0);var p=(u-1+g)*l*4,m=l;do{var v=f+(m-1)*4,_=o;m+_<1&&(_=0),m+_>l&&(_=0);var y=p+(m-1+_)*4,b=h[v]-h[y],x=h[v+1]-h[y+1],w=h[v+2]-h[y+2],S=b,C=S>0?S:-S,k=w>0?w:-w;if((x>0?x:-x)>C&&(S=x),k>C&&(S=w),S*=e,a){var A=h[v]+S,P=h[v+1]+S,T=h[v+2]+S;h[v]=A>255?255:A<0?0:A,h[v+1]=P>255?255:P<0?0:P,h[v+2]=T>255?255:T<0?0:T}else{var F=r-S;F<0?F=0:F>255&&(F=255),h[v]=h[v+1]=h[v+2]=F}}while(--m)}while(--u)},i.Factory.addGetterSetter(a.Node,"embossStrength",.5,(0,s.getNumberValidator)(),i.Factory.afterSetFilter),i.Factory.addGetterSetter(a.Node,"embossWhiteLevel",.5,(0,s.getNumberValidator)(),i.Factory.afterSetFilter),i.Factory.addGetterSetter(a.Node,"embossDirection","top-left",null,i.Factory.afterSetFilter),i.Factory.addGetterSetter(a.Node,"embossBlend",!1,null,i.Factory.afterSetFilter)},89621:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Enhance=void 0;let i=r(1455),a=r(77939),n=r(53774);function s(t,e,r,i,a){var n=r-e,s=a-i;return 0===n?i+s/2:0===s?i:s*((t-e)/n)+i}e.Enhance=function(t){var e,r,i,a,n,o,h,l,d,c,u,f,g,p=t.data,m=p.length,v=p[0],_=v,y=p[1],b=y,x=p[2],w=x,S=this.enhance();if(0!==S){for(g=0;g<m;g+=4)(c=p[g+0])<v?v=c:c>_&&(_=c),(u=p[g+1])<y?y=u:u>b&&(b=u),(f=p[g+2])<x?x=f:f>w&&(w=f);for(_===v&&(_=255,v=0),b===y&&(b=255,y=0),w===x&&(w=255,x=0),S>0?(r=_+S*(255-_),i=v-S*(v-0),n=b+S*(255-b),o=y-S*(y-0),l=w+S*(255-w),d=x-S*(x-0)):(e=(_+v)*.5,r=_+S*(_-e),i=v+S*(v-e),a=(b+y)*.5,n=b+S*(b-a),o=y+S*(y-a),h=(w+x)*.5,l=w+S*(w-h),d=x+S*(x-h)),g=0;g<m;g+=4)p[g+0]=s(p[g+0],v,_,i,r),p[g+1]=s(p[g+1],y,b,o,n),p[g+2]=s(p[g+2],x,w,d,l)}},i.Factory.addGetterSetter(a.Node,"enhance",0,(0,n.getNumberValidator)(),i.Factory.afterSetFilter)},61179:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Grayscale=void 0,e.Grayscale=function(t){var e,r,i=t.data,a=i.length;for(e=0;e<a;e+=4)r=.34*i[e]+.5*i[e+1]+.16*i[e+2],i[e]=r,i[e+1]=r,i[e+2]=r}},67194:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HSL=void 0;let i=r(1455),a=r(77939),n=r(53774);i.Factory.addGetterSetter(a.Node,"hue",0,(0,n.getNumberValidator)(),i.Factory.afterSetFilter),i.Factory.addGetterSetter(a.Node,"saturation",0,(0,n.getNumberValidator)(),i.Factory.afterSetFilter),i.Factory.addGetterSetter(a.Node,"luminance",0,(0,n.getNumberValidator)(),i.Factory.afterSetFilter),e.HSL=function(t){var e,r,i,a,n,s=t.data,o=s.length,h=Math.pow(2,this.saturation()),l=Math.abs(this.hue()+360)%360,d=127*this.luminance(),c=1*h*Math.cos(l*Math.PI/180),u=1*h*Math.sin(l*Math.PI/180),f=.299+.701*c+.167*u,g=.587-.587*c+.33*u,p=.114-.114*c-.497*u,m=.299-.299*c-.328*u,v=.587+.413*c+.035*u,_=.114-.114*c+.293*u,y=.299-.3*c+1.25*u,b=.587-.586*c-1.05*u,x=.114+.886*c-.2*u;for(n=0;n<o;n+=4)e=s[n+0],r=s[n+1],i=s[n+2],a=s[n+3],s[n+0]=f*e+g*r+p*i+d,s[n+1]=m*e+v*r+_*i+d,s[n+2]=y*e+b*r+x*i+d,s[n+3]=a}},3925:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HSV=void 0;let i=r(1455),a=r(77939),n=r(53774);e.HSV=function(t){var e,r,i,a,n,s=t.data,o=s.length,h=Math.pow(2,this.value()),l=Math.pow(2,this.saturation()),d=Math.abs(this.hue()+360)%360,c=h*l*Math.cos(d*Math.PI/180),u=h*l*Math.sin(d*Math.PI/180),f=.299*h+.701*c+.167*u,g=.587*h-.587*c+.33*u,p=.114*h-.114*c-.497*u,m=.299*h-.299*c-.328*u,v=.587*h+.413*c+.035*u,_=.114*h-.114*c+.293*u,y=.299*h-.3*c+1.25*u,b=.587*h-.586*c-1.05*u,x=.114*h+.886*c-.2*u;for(n=0;n<o;n+=4)e=s[n+0],r=s[n+1],i=s[n+2],a=s[n+3],s[n+0]=f*e+g*r+p*i,s[n+1]=m*e+v*r+_*i,s[n+2]=y*e+b*r+x*i,s[n+3]=a},i.Factory.addGetterSetter(a.Node,"hue",0,(0,n.getNumberValidator)(),i.Factory.afterSetFilter),i.Factory.addGetterSetter(a.Node,"saturation",0,(0,n.getNumberValidator)(),i.Factory.afterSetFilter),i.Factory.addGetterSetter(a.Node,"value",0,(0,n.getNumberValidator)(),i.Factory.afterSetFilter)},15751:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Invert=void 0,e.Invert=function(t){var e,r=t.data,i=r.length;for(e=0;e<i;e+=4)r[e]=255-r[e],r[e+1]=255-r[e+1],r[e+2]=255-r[e+2]}},66588:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Kaleidoscope=void 0;let i=r(1455),a=r(77939),n=r(68588),s=r(53774);var o=function(t,e,r){var i,a,n,s,o=t.data,h=e.data,l=t.width,d=t.height,c=r.polarCenterX||l/2,u=r.polarCenterY||d/2,f=0,g=0,p=0,m=0,v=Math.sqrt(c*c+u*u);v=(s=Math.sqrt((a=l-c)*a+(n=d-u)*n))>v?s:v;var _,y,b,x,w=360/l*Math.PI/180;for(y=0;y<l;y+=1)for(_=0,b=Math.sin(y*w),x=Math.cos(y*w);_<d;_+=1)a=Math.floor(c+v*_/d*x),f=o[(i=((n=Math.floor(u+v*_/d*b))*l+a)*4)+0],g=o[i+1],p=o[i+2],m=o[i+3],h[(i=(y+_*l)*4)+0]=f,h[i+1]=g,h[i+2]=p,h[i+3]=m},h=function(t,e,r){var i,a,n,s,o,h,l,d=t.data,c=e.data,u=t.width,f=t.height,g=r.polarCenterX||u/2,p=r.polarCenterY||f/2,m=0,v=0,_=0,y=0,b=Math.sqrt(g*g+p*p);b=(l=Math.sqrt((n=u-g)*n+(s=f-p)*s))>b?l:b;var x,w=r.polarRotation||0;for(n=0;n<u;n+=1)for(s=0;s<f;s+=1)x=Math.sqrt((o=n-g)*o+(h=s-p)*h)*f/b,i=Math.floor((180*Math.atan2(h,o)/Math.PI+360+w)%360*u/360),m=d[(a=(Math.floor(x)*u+i)*4)+0],v=d[a+1],_=d[a+2],y=d[a+3],c[(a=(s*u+n)*4)+0]=m,c[a+1]=v,c[a+2]=_,c[a+3]=y};e.Kaleidoscope=function(t){var e,r,i,a,s,l,d,c,u,f,g=t.width,p=t.height,m=Math.round(this.kaleidoscopePower()),v=Math.floor(g*(Math.round(this.kaleidoscopeAngle())%360)/360);if(!(m<1)){var _=n.Util.createCanvasElement();_.width=g,_.height=p;var y=_.getContext("2d").getImageData(0,0,g,p);n.Util.releaseCanvas(_),o(t,y,{polarCenterX:g/2,polarCenterY:p/2});for(var b=g/Math.pow(2,m);b<=8;)b*=2,m-=1;var x=b=Math.ceil(b),w=0,S=x,C=1;for(v+b>g&&(w=x,S=0,C=-1),r=0;r<p;r+=1)for(e=w;e!==S;e+=C)i=Math.round(e+v)%g,u=(g*r+i)*4,s=y.data[u+0],l=y.data[u+1],d=y.data[u+2],c=y.data[u+3],f=(g*r+e)*4,y.data[f+0]=s,y.data[f+1]=l,y.data[f+2]=d,y.data[f+3]=c;for(r=0;r<p;r+=1)for(a=0,x=Math.floor(b);a<m;a+=1){for(e=0;e<x+1;e+=1)u=(g*r+e)*4,s=y.data[u+0],l=y.data[u+1],d=y.data[u+2],c=y.data[u+3],f=(g*r+2*x-e-1)*4,y.data[f+0]=s,y.data[f+1]=l,y.data[f+2]=d,y.data[f+3]=c;x*=2}h(y,t,{polarRotation:0})}},i.Factory.addGetterSetter(a.Node,"kaleidoscopePower",2,(0,s.getNumberValidator)(),i.Factory.afterSetFilter),i.Factory.addGetterSetter(a.Node,"kaleidoscopeAngle",0,(0,s.getNumberValidator)(),i.Factory.afterSetFilter)},73565:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Mask=void 0;let i=r(1455),a=r(77939),n=r(53774);function s(t,e,r){var i=(r*t.width+e)*4,a=[];return a.push(t.data[i++],t.data[i++],t.data[i++],t.data[i++]),a}function o(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)+Math.pow(t[2]-e[2],2))}e.Mask=function(t){var e=function(t,e){var r=s(t,0,0),i=s(t,t.width-1,0),a=s(t,0,t.height-1),n=s(t,t.width-1,t.height-1),h=e||10;if(o(r,i)<h&&o(i,n)<h&&o(n,a)<h&&o(a,r)<h){for(var l=function(t){for(var e=[0,0,0],r=0;r<t.length;r++)e[0]+=t[r][0],e[1]+=t[r][1],e[2]+=t[r][2];return e[0]/=t.length,e[1]/=t.length,e[2]/=t.length,e}([i,r,n,a]),d=[],c=0;c<t.width*t.height;c++){var u=o(l,[t.data[4*c],t.data[4*c+1],t.data[4*c+2]]);d[c]=u<h?0:255}return d}}(t,this.threshold());return e&&(e=function(t,e,r){for(var i=[1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9],a=Math.round(Math.sqrt(i.length)),n=Math.floor(a/2),s=[],o=0;o<r;o++)for(var h=0;h<e;h++){for(var l=o*e+h,d=0,c=0;c<a;c++)for(var u=0;u<a;u++){var f=o+c-n,g=h+u-n;if(f>=0&&f<r&&g>=0&&g<e){var p=f*e+g,m=i[c*a+u];d+=t[p]*m}}s[l]=d}return s}(e=function(t,e,r){for(var i=[1,1,1,1,1,1,1,1,1],a=Math.round(Math.sqrt(i.length)),n=Math.floor(a/2),s=[],o=0;o<r;o++)for(var h=0;h<e;h++){for(var l=o*e+h,d=0,c=0;c<a;c++)for(var u=0;u<a;u++){var f=o+c-n,g=h+u-n;if(f>=0&&f<r&&g>=0&&g<e){var p=f*e+g,m=i[c*a+u];d+=t[p]*m}}s[l]=d>=1020?255:0}return s}(e=function(t,e,r){for(var i=[1,1,1,1,0,1,1,1,1],a=Math.round(Math.sqrt(i.length)),n=Math.floor(a/2),s=[],o=0;o<r;o++)for(var h=0;h<e;h++){for(var l=o*e+h,d=0,c=0;c<a;c++)for(var u=0;u<a;u++){var f=o+c-n,g=h+u-n;if(f>=0&&f<r&&g>=0&&g<e){var p=f*e+g,m=i[c*a+u];d+=t[p]*m}}s[l]=2040===d?255:0}return s}(e,t.width,t.height),t.width,t.height),t.width,t.height),function(t,e){for(var r=0;r<t.width*t.height;r++)t.data[4*r+3]=e[r]}(t,e)),t},i.Factory.addGetterSetter(a.Node,"threshold",0,(0,n.getNumberValidator)(),i.Factory.afterSetFilter)},25929:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Noise=void 0;let i=r(1455),a=r(77939),n=r(53774);e.Noise=function(t){var e,r=255*this.noise(),i=t.data,a=i.length,n=r/2;for(e=0;e<a;e+=4)i[e+0]+=n-2*n*Math.random(),i[e+1]+=n-2*n*Math.random(),i[e+2]+=n-2*n*Math.random()},i.Factory.addGetterSetter(a.Node,"noise",.2,(0,n.getNumberValidator)(),i.Factory.afterSetFilter)},47233:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Pixelate=void 0;let i=r(1455),a=r(68588),n=r(77939),s=r(53774);e.Pixelate=function(t){var e,r,i,n,s,o,h,l,d,c,u,f,g,p,m=Math.ceil(this.pixelSize()),v=t.width,_=t.height,y=Math.ceil(v/m),b=Math.ceil(_/m),x=t.data;if(m<=0){a.Util.error("pixelSize value can not be <= 0");return}for(f=0;f<y;f+=1)for(g=0;g<b;g+=1){for(n=0,s=0,o=0,h=0,d=(l=f*m)+m,u=(c=g*m)+m,p=0,e=l;e<d;e+=1)if(!(e>=v))for(r=c;r<u;r+=1)r>=_||(n+=x[(i=(v*r+e)*4)+0],s+=x[i+1],o+=x[i+2],h+=x[i+3],p+=1);for(n/=p,s/=p,o/=p,h/=p,e=l;e<d;e+=1)if(!(e>=v))for(r=c;r<u;r+=1)r>=_||(x[(i=(v*r+e)*4)+0]=n,x[i+1]=s,x[i+2]=o,x[i+3]=h)}},i.Factory.addGetterSetter(n.Node,"pixelSize",8,(0,s.getNumberValidator)(),i.Factory.afterSetFilter)},18590:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Posterize=void 0;let i=r(1455),a=r(77939),n=r(53774);e.Posterize=function(t){var e,r=Math.round(254*this.levels())+1,i=t.data,a=i.length,n=255/r;for(e=0;e<a;e+=1)i[e]=Math.floor(i[e]/n)*n},i.Factory.addGetterSetter(a.Node,"levels",.5,(0,n.getNumberValidator)(),i.Factory.afterSetFilter)},18280:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RGB=void 0;let i=r(1455),a=r(77939),n=r(53774);e.RGB=function(t){var e,r,i=t.data,a=i.length,n=this.red(),s=this.green(),o=this.blue();for(e=0;e<a;e+=4)r=(.34*i[e]+.5*i[e+1]+.16*i[e+2])/255,i[e]=r*n,i[e+1]=r*s,i[e+2]=r*o,i[e+3]=i[e+3]},i.Factory.addGetterSetter(a.Node,"red",0,function(t){return(this._filterUpToDate=!1,t>255)?255:t<0?0:Math.round(t)}),i.Factory.addGetterSetter(a.Node,"green",0,function(t){return(this._filterUpToDate=!1,t>255)?255:t<0?0:Math.round(t)}),i.Factory.addGetterSetter(a.Node,"blue",0,n.RGBComponent,i.Factory.afterSetFilter)},3438:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RGBA=void 0;let i=r(1455),a=r(77939),n=r(53774);e.RGBA=function(t){var e,r,i=t.data,a=i.length,n=this.red(),s=this.green(),o=this.blue(),h=this.alpha();for(e=0;e<a;e+=4)r=1-h,i[e]=n*h+i[e]*r,i[e+1]=s*h+i[e+1]*r,i[e+2]=o*h+i[e+2]*r},i.Factory.addGetterSetter(a.Node,"red",0,function(t){return(this._filterUpToDate=!1,t>255)?255:t<0?0:Math.round(t)}),i.Factory.addGetterSetter(a.Node,"green",0,function(t){return(this._filterUpToDate=!1,t>255)?255:t<0?0:Math.round(t)}),i.Factory.addGetterSetter(a.Node,"blue",0,n.RGBComponent,i.Factory.afterSetFilter),i.Factory.addGetterSetter(a.Node,"alpha",1,function(t){return(this._filterUpToDate=!1,t>1)?1:t<0?0:t})},36703:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Sepia=void 0,e.Sepia=function(t){var e,r,i,a,n=t.data,s=n.length;for(e=0;e<s;e+=4)r=n[e+0],i=n[e+1],a=n[e+2],n[e+0]=Math.min(255,.393*r+.769*i+.189*a),n[e+1]=Math.min(255,.349*r+.686*i+.168*a),n[e+2]=Math.min(255,.272*r+.534*i+.131*a)}},71665:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Solarize=void 0,e.Solarize=function(t){var e=t.data,r=t.width,i=t.height,a=4*r,n=i;do{var s=(n-1)*a,o=r;do{var h=s+(o-1)*4,l=e[h],d=e[h+1],c=e[h+2];l>127&&(l=255-l),d>127&&(d=255-d),c>127&&(c=255-c),e[h]=l,e[h+1]=d,e[h+2]=c}while(--o)}while(--n)}},31863:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Threshold=void 0;let i=r(1455),a=r(77939),n=r(53774);e.Threshold=function(t){var e,r=255*this.threshold(),i=t.data,a=i.length;for(e=0;e<a;e+=1)i[e]=i[e]<r?0:255},i.Factory.addGetterSetter(a.Node,"threshold",.5,(0,n.getNumberValidator)(),i.Factory.afterSetFilter)},20185:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});let i=r(52076);t.exports=i.Konva},90119:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Arc=void 0;let i=r(1455),a=r(97955),n=r(54417),s=r(53774),o=r(54417);class h extends a.Shape{_sceneFunc(t){var e=n.Konva.getAngle(this.angle()),r=this.clockwise();t.beginPath(),t.arc(0,0,this.outerRadius(),0,e,r),t.arc(0,0,this.innerRadius(),e,0,!r),t.closePath(),t.fillStrokeShape(this)}getWidth(){return 2*this.outerRadius()}getHeight(){return 2*this.outerRadius()}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}getSelfRect(){let t=this.innerRadius(),e=this.outerRadius(),r=this.clockwise(),i=n.Konva.getAngle(r?360-this.angle():this.angle()),a=Math.cos(Math.min(i,Math.PI)),s=Math.sin(Math.min(Math.max(Math.PI,i),3*Math.PI/2)),o=Math.sin(Math.min(i,Math.PI/2)),h=a*(a>0?t:e),l=s*(s>0?t:e),d=o*(o>0?e:t);return{x:h,y:r?-1*d:l,width:1*e-h,height:d-l}}}e.Arc=h,h.prototype._centroid=!0,h.prototype.className="Arc",h.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,o._registerNode)(h),i.Factory.addGetterSetter(h,"innerRadius",0,(0,s.getNumberValidator)()),i.Factory.addGetterSetter(h,"outerRadius",0,(0,s.getNumberValidator)()),i.Factory.addGetterSetter(h,"angle",0,(0,s.getNumberValidator)()),i.Factory.addGetterSetter(h,"clockwise",!1,(0,s.getBooleanValidator)())},22064:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Arrow=void 0;let i=r(1455),a=r(27149),n=r(53774),s=r(54417),o=r(87339);class h extends a.Line{_sceneFunc(t){super._sceneFunc(t);var e,r,i=2*Math.PI,a=this.points(),n=a,s=0!==this.tension()&&a.length>4;s&&(n=this.getTensionPoints());var h=this.pointerLength(),l=a.length;if(s){let t=[n[n.length-4],n[n.length-3],n[n.length-2],n[n.length-1],a[l-2],a[l-1]],i=o.Path.calcLength(n[n.length-4],n[n.length-3],"C",t),s=o.Path.getPointOnQuadraticBezier(Math.min(1,1-h/i),t[0],t[1],t[2],t[3],t[4],t[5]);e=a[l-2]-s.x,r=a[l-1]-s.y}else e=a[l-2]-a[l-4],r=a[l-1]-a[l-3];var d=(Math.atan2(r,e)+i)%i,c=this.pointerWidth();this.pointerAtEnding()&&(t.save(),t.beginPath(),t.translate(a[l-2],a[l-1]),t.rotate(d),t.moveTo(0,0),t.lineTo(-h,c/2),t.lineTo(-h,-c/2),t.closePath(),t.restore(),this.__fillStroke(t)),this.pointerAtBeginning()&&(t.save(),t.beginPath(),t.translate(a[0],a[1]),s?(e=(n[0]+n[2])/2-a[0],r=(n[1]+n[3])/2-a[1]):(e=a[2]-a[0],r=a[3]-a[1]),t.rotate((Math.atan2(-r,-e)+i)%i),t.moveTo(0,0),t.lineTo(-h,c/2),t.lineTo(-h,-c/2),t.closePath(),t.restore(),this.__fillStroke(t))}__fillStroke(t){var e=this.dashEnabled();e&&(this.attrs.dashEnabled=!1,t.setLineDash([])),t.fillStrokeShape(this),e&&(this.attrs.dashEnabled=!0)}getSelfRect(){let t=super.getSelfRect(),e=this.pointerWidth()/2;return{x:t.x-e,y:t.y-e,width:t.width+2*e,height:t.height+2*e}}}e.Arrow=h,h.prototype.className="Arrow",(0,s._registerNode)(h),i.Factory.addGetterSetter(h,"pointerLength",10,(0,n.getNumberValidator)()),i.Factory.addGetterSetter(h,"pointerWidth",10,(0,n.getNumberValidator)()),i.Factory.addGetterSetter(h,"pointerAtBeginning",!1),i.Factory.addGetterSetter(h,"pointerAtEnding",!0)},7643:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Circle=void 0;let i=r(1455),a=r(97955),n=r(53774),s=r(54417);class o extends a.Shape{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.attrs.radius||0,0,2*Math.PI,!1),t.closePath(),t.fillStrokeShape(this)}getWidth(){return 2*this.radius()}getHeight(){return 2*this.radius()}setWidth(t){this.radius()!==t/2&&this.radius(t/2)}setHeight(t){this.radius()!==t/2&&this.radius(t/2)}}e.Circle=o,o.prototype._centroid=!0,o.prototype.className="Circle",o.prototype._attrsAffectingSize=["radius"],(0,s._registerNode)(o),i.Factory.addGetterSetter(o,"radius",0,(0,n.getNumberValidator)())},30535:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Ellipse=void 0;let i=r(1455),a=r(97955),n=r(53774),s=r(54417);class o extends a.Shape{_sceneFunc(t){var e=this.radiusX(),r=this.radiusY();t.beginPath(),t.save(),e!==r&&t.scale(1,r/e),t.arc(0,0,e,0,2*Math.PI,!1),t.restore(),t.closePath(),t.fillStrokeShape(this)}getWidth(){return 2*this.radiusX()}getHeight(){return 2*this.radiusY()}setWidth(t){this.radiusX(t/2)}setHeight(t){this.radiusY(t/2)}}e.Ellipse=o,o.prototype.className="Ellipse",o.prototype._centroid=!0,o.prototype._attrsAffectingSize=["radiusX","radiusY"],(0,s._registerNode)(o),i.Factory.addComponentsGetterSetter(o,"radius",["x","y"]),i.Factory.addGetterSetter(o,"radiusX",0,(0,n.getNumberValidator)()),i.Factory.addGetterSetter(o,"radiusY",0,(0,n.getNumberValidator)())},71298:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Image=void 0;let i=r(68588),a=r(1455),n=r(97955),s=r(54417),o=r(53774);class h extends n.Shape{constructor(t){super(t),this.on("imageChange.konva",()=>{this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){let t=this.image();t&&t.complete||t&&4===t.readyState||!t||!t.addEventListener||t.addEventListener("load",()=>{this._requestDraw()})}_useBufferCanvas(){return super._useBufferCanvas(!0)}_sceneFunc(t){let e;let r=this.getWidth(),a=this.getHeight(),n=this.cornerRadius(),s=this.attrs.image;if(s){let t=this.attrs.cropWidth,i=this.attrs.cropHeight;e=t&&i?[s,this.cropX(),this.cropY(),t,i,0,0,r,a]:[s,0,0,r,a]}(this.hasFill()||this.hasStroke()||n)&&(t.beginPath(),n?i.Util.drawRoundedRectPath(t,r,a,n):t.rect(0,0,r,a),t.closePath(),t.fillStrokeShape(this)),s&&(n&&t.clip(),t.drawImage.apply(t,e))}_hitFunc(t){var e=this.width(),r=this.height(),a=this.cornerRadius();t.beginPath(),a?i.Util.drawRoundedRectPath(t,e,r,a):t.rect(0,0,e,r),t.closePath(),t.fillStrokeShape(this)}getWidth(){var t,e;return null!==(t=this.attrs.width)&&void 0!==t?t:null===(e=this.image())||void 0===e?void 0:e.width}getHeight(){var t,e;return null!==(t=this.attrs.height)&&void 0!==t?t:null===(e=this.image())||void 0===e?void 0:e.height}static fromURL(t,e,r=null){var a=i.Util.createImageElement();a.onload=function(){e(new h({image:a}))},a.onerror=r,a.crossOrigin="Anonymous",a.src=t}}e.Image=h,h.prototype.className="Image",(0,s._registerNode)(h),a.Factory.addGetterSetter(h,"cornerRadius",0,(0,o.getNumberOrArrayOfNumbersValidator)(4)),a.Factory.addGetterSetter(h,"image"),a.Factory.addComponentsGetterSetter(h,"crop",["x","y","width","height"]),a.Factory.addGetterSetter(h,"cropX",0,(0,o.getNumberValidator)()),a.Factory.addGetterSetter(h,"cropY",0,(0,o.getNumberValidator)()),a.Factory.addGetterSetter(h,"cropWidth",0,(0,o.getNumberValidator)()),a.Factory.addGetterSetter(h,"cropHeight",0,(0,o.getNumberValidator)())},56067:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Tag=e.Label=void 0;let i=r(1455),a=r(97955),n=r(58985),s=r(53774),o=r(54417);var h=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],l="right",d="down",c="left",u=h.length;class f extends n.Group{constructor(t){super(t),this.on("add.konva",function(t){this._addListeners(t.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(t){var e,r=this,i=function(){r._sync()};for(e=0;e<u;e++)t.on(h[e]+"Change.konva",i)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){var t,e,r,i,a,n,s,o=this.getText(),h=this.getTag();if(o&&h){switch(t=o.width(),e=o.height(),r=h.pointerDirection(),i=h.pointerWidth(),s=h.pointerHeight(),a=0,n=0,r){case"up":a=t/2,n=-1*s;break;case l:a=t+i,n=e/2;break;case d:a=t/2,n=e+s;break;case c:a=-1*i,n=e/2}h.setAttrs({x:-1*a,y:-1*n,width:t,height:e}),o.setAttrs({x:-1*a,y:-1*n})}}}e.Label=f,f.prototype.className="Label",(0,o._registerNode)(f);class g extends a.Shape{_sceneFunc(t){var e=this.width(),r=this.height(),i=this.pointerDirection(),a=this.pointerWidth(),n=this.pointerHeight(),s=this.cornerRadius();let o=0,h=0,u=0,f=0;"number"==typeof s?o=h=u=f=Math.min(s,e/2,r/2):(o=Math.min(s[0]||0,e/2,r/2),h=Math.min(s[1]||0,e/2,r/2),f=Math.min(s[2]||0,e/2,r/2),u=Math.min(s[3]||0,e/2,r/2)),t.beginPath(),t.moveTo(o,0),"up"===i&&(t.lineTo((e-a)/2,0),t.lineTo(e/2,-1*n),t.lineTo((e+a)/2,0)),t.lineTo(e-h,0),t.arc(e-h,h,h,3*Math.PI/2,0,!1),i===l&&(t.lineTo(e,(r-n)/2),t.lineTo(e+a,r/2),t.lineTo(e,(r+n)/2)),t.lineTo(e,r-f),t.arc(e-f,r-f,f,0,Math.PI/2,!1),i===d&&(t.lineTo((e+a)/2,r),t.lineTo(e/2,r+n),t.lineTo((e-a)/2,r)),t.lineTo(u,r),t.arc(u,r-u,u,Math.PI/2,Math.PI,!1),i===c&&(t.lineTo(0,(r+n)/2),t.lineTo(-1*a,r/2),t.lineTo(0,(r-n)/2)),t.lineTo(0,o),t.arc(o,o,o,Math.PI,3*Math.PI/2,!1),t.closePath(),t.fillStrokeShape(this)}getSelfRect(){var t=0,e=0,r=this.pointerWidth(),i=this.pointerHeight(),a=this.pointerDirection(),n=this.width(),s=this.height();return"up"===a?(e-=i,s+=i):a===d?s+=i:a===c?(t-=1.5*r,n+=r):a===l&&(n+=1.5*r),{x:t,y:e,width:n,height:s}}}e.Tag=g,g.prototype.className="Tag",(0,o._registerNode)(g),i.Factory.addGetterSetter(g,"pointerDirection","none"),i.Factory.addGetterSetter(g,"pointerWidth",0,(0,s.getNumberValidator)()),i.Factory.addGetterSetter(g,"pointerHeight",0,(0,s.getNumberValidator)()),i.Factory.addGetterSetter(g,"cornerRadius",0,(0,s.getNumberOrArrayOfNumbersValidator)(4))},27149:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Line=void 0;let i=r(1455),a=r(97955),n=r(53774),s=r(54417);function o(t,e,r,i,a,n,s){var o=Math.sqrt(Math.pow(r-t,2)+Math.pow(i-e,2)),h=Math.sqrt(Math.pow(a-r,2)+Math.pow(n-i,2)),l=s*o/(o+h),d=s*h/(o+h);return[r-l*(a-t),i-l*(n-e),r+d*(a-t),i+d*(n-e)]}function h(t,e){var r,i,a=t.length,n=[];for(r=2;r<a-2;r+=2)isNaN((i=o(t[r-2],t[r-1],t[r],t[r+1],t[r+2],t[r+3],e))[0])||(n.push(i[0]),n.push(i[1]),n.push(t[r]),n.push(t[r+1]),n.push(i[2]),n.push(i[3]));return n}class l extends a.Shape{constructor(t){super(t),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(t){var e,r,i,a=this.points(),n=a.length,s=this.tension(),o=this.closed(),h=this.bezier();if(n){if(t.beginPath(),t.moveTo(a[0],a[1]),0!==s&&n>4){for(r=(e=this.getTensionPoints()).length,i=o?0:4,o||t.quadraticCurveTo(e[0],e[1],e[2],e[3]);i<r-2;)t.bezierCurveTo(e[i++],e[i++],e[i++],e[i++],e[i++],e[i++]);o||t.quadraticCurveTo(e[r-2],e[r-1],a[n-2],a[n-1])}else if(h)for(i=2;i<n;)t.bezierCurveTo(a[i++],a[i++],a[i++],a[i++],a[i++],a[i++]);else for(i=2;i<n;i+=2)t.lineTo(a[i],a[i+1]);o?(t.closePath(),t.fillStrokeShape(this)):t.strokeShape(this)}}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():h(this.points(),this.tension())}_getTensionPointsClosed(){var t=this.points(),e=t.length,r=this.tension(),i=o(t[e-2],t[e-1],t[0],t[1],t[2],t[3],r),a=o(t[e-4],t[e-3],t[e-2],t[e-1],t[0],t[1],r);return[i[2],i[3]].concat(h(t,r)).concat([a[0],a[1],t[e-2],t[e-1],a[2],a[3],i[0],i[1],t[0],t[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){var t,e,r=this.points();if(r.length<4)return{x:r[0]||0,y:r[1]||0,width:0,height:0};for(var i=(r=0!==this.tension()?[r[0],r[1],...this._getTensionPoints(),r[r.length-2],r[r.length-1]]:this.points())[0],a=r[0],n=r[1],s=r[1],o=0;o<r.length/2;o++)t=r[2*o],e=r[2*o+1],i=Math.min(i,t),a=Math.max(a,t),n=Math.min(n,e),s=Math.max(s,e);return{x:i,y:n,width:a-i,height:s-n}}}e.Line=l,l.prototype.className="Line",l.prototype._attrsAffectingSize=["points","bezier","tension"],(0,s._registerNode)(l),i.Factory.addGetterSetter(l,"closed",!1),i.Factory.addGetterSetter(l,"bezier",!1),i.Factory.addGetterSetter(l,"tension",0,(0,n.getNumberValidator)()),i.Factory.addGetterSetter(l,"points",[],(0,n.getNumberArrayValidator)())},87339:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Path=void 0;let i=r(1455),a=r(97955),n=r(54417),s=r(54135);class o extends a.Shape{constructor(t){super(t),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=o.parsePathData(this.data()),this.pathLength=o.getPathLength(this.dataArray)}_sceneFunc(t){var e=this.dataArray;t.beginPath();for(var r=!1,i=0;i<e.length;i++){var a=e[i].command,n=e[i].points;switch(a){case"L":t.lineTo(n[0],n[1]);break;case"M":t.moveTo(n[0],n[1]);break;case"C":t.bezierCurveTo(n[0],n[1],n[2],n[3],n[4],n[5]);break;case"Q":t.quadraticCurveTo(n[0],n[1],n[2],n[3]);break;case"A":var s=n[0],o=n[1],h=n[2],l=n[3],d=n[4],c=n[5],u=n[6],f=n[7],g=h>l?h:l,p=h>l?1:h/l,m=h>l?l/h:1;t.translate(s,o),t.rotate(u),t.scale(p,m),t.arc(0,0,g,d,d+c,1-f),t.scale(1/p,1/m),t.rotate(-u),t.translate(-s,-o);break;case"z":r=!0,t.closePath()}}r||this.hasFill()?t.fillStrokeShape(this):t.strokeShape(this)}getSelfRect(){var t,e,r=[];this.dataArray.forEach(function(t){if("A"===t.command){var e=t.points[4],i=t.points[5],a=t.points[4]+i,n=Math.PI/180;if(Math.abs(e-a)<n&&(n=Math.abs(e-a)),i<0)for(let i=e-n;i>a;i-=n){let e=o.getPointOnEllipticalArc(t.points[0],t.points[1],t.points[2],t.points[3],i,0);r.push(e.x,e.y)}else for(let i=e+n;i<a;i+=n){let e=o.getPointOnEllipticalArc(t.points[0],t.points[1],t.points[2],t.points[3],i,0);r.push(e.x,e.y)}}else if("C"===t.command)for(let e=0;e<=1;e+=.01){let i=o.getPointOnCubicBezier(e,t.start.x,t.start.y,t.points[0],t.points[1],t.points[2],t.points[3],t.points[4],t.points[5]);r.push(i.x,i.y)}else r=r.concat(t.points)});for(var i=r[0],a=r[0],n=r[1],s=r[1],h=0;h<r.length/2;h++)t=r[2*h],e=r[2*h+1],isNaN(t)||(i=Math.min(i,t),a=Math.max(a,t)),isNaN(e)||(n=Math.min(n,e),s=Math.max(s,e));return{x:i,y:n,width:a-i,height:s-n}}getLength(){return this.pathLength}getPointAtLength(t){return o.getPointAtLengthOfDataArray(t,this.dataArray)}static getLineLength(t,e,r,i){return Math.sqrt((r-t)*(r-t)+(i-e)*(i-e))}static getPathLength(t){let e=0;for(var r=0;r<t.length;++r)e+=t[r].pathLength;return e}static getPointAtLengthOfDataArray(t,e){var r,i=0,a=e.length;if(!a)return null;for(;i<a&&t>e[i].pathLength;)t-=e[i].pathLength,++i;if(i===a)return{x:(r=e[i-1].points.slice(-2))[0],y:r[1]};if(t<.01)return{x:(r=e[i].points.slice(0,2))[0],y:r[1]};var n=e[i],h=n.points;switch(n.command){case"L":return o.getPointOnLine(t,n.start.x,n.start.y,h[0],h[1]);case"C":return o.getPointOnCubicBezier((0,s.t2length)(t,o.getPathLength(e),t=>(0,s.getCubicArcLength)([n.start.x,h[0],h[2],h[4]],[n.start.y,h[1],h[3],h[5]],t)),n.start.x,n.start.y,h[0],h[1],h[2],h[3],h[4],h[5]);case"Q":return o.getPointOnQuadraticBezier((0,s.t2length)(t,o.getPathLength(e),t=>(0,s.getQuadraticArcLength)([n.start.x,h[0],h[2]],[n.start.y,h[1],h[3]],t)),n.start.x,n.start.y,h[0],h[1],h[2],h[3]);case"A":var l=h[0],d=h[1],c=h[2],u=h[3],f=h[4],g=h[5],p=h[6];return f+=g*t/n.pathLength,o.getPointOnEllipticalArc(l,d,c,u,f,p)}return null}static getPointOnLine(t,e,r,i,a,n,s){n=null!=n?n:e,s=null!=s?s:r;let o=this.getLineLength(e,r,i,a);if(o<1e-10)return{x:e,y:r};if(i===e)return{x:n,y:s+(a>r?t:-t)};let h=(a-r)/(i-e),l=Math.sqrt(t*t/(1+h*h))*(i<e?-1:1);if(1e-10>Math.abs(s-r-h*(n-e)))return{x:n+l,y:s+h*l};let d=((n-e)*(i-e)+(s-r)*(a-r))/(o*o),c=e+d*(i-e),u=r+d*(a-r),f=this.getLineLength(n,s,c,u),g=Math.sqrt(t*t-f*f),p=Math.sqrt(g*g/(1+h*h))*(i<e?-1:1);return{x:c+p,y:u+h*p}}static getPointOnCubicBezier(t,e,r,i,a,n,s,o,h){function l(t){return 3*t*(1-t)*(1-t)}return{x:o*(t*t*t)+n*(3*t*t*(1-t))+i*l(t)+e*((1-t)*(1-t)*(1-t)),y:h*(t*t*t)+s*(3*t*t*(1-t))+a*l(t)+r*((1-t)*(1-t)*(1-t))}}static getPointOnQuadraticBezier(t,e,r,i,a,n,s){return{x:n*(t*t)+i*(2*t*(1-t))+e*((1-t)*(1-t)),y:s*(t*t)+a*(2*t*(1-t))+r*((1-t)*(1-t))}}static getPointOnEllipticalArc(t,e,r,i,a,n){var s=Math.cos(n),o=Math.sin(n),h={x:r*Math.cos(a),y:i*Math.sin(a)};return{x:t+(h.x*s-h.y*o),y:e+(h.x*o+h.y*s)}}static parsePathData(t){if(!t)return[];var e=t,r=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];e=e.replace(RegExp(" ","g"),",");for(var i=0;i<r.length;i++)e=e.replace(RegExp(r[i],"g"),"|"+r[i]);var a=e.split("|"),n=[],s=[],o=0,h=0,l=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;for(i=1;i<a.length;i++){var d=a[i],c=d.charAt(0);for(d=d.slice(1),s.length=0;m=l.exec(d);)s.push(m[0]);for(var u=[],f=0,g=s.length;f<g;f++){if("00"===s[f]){u.push(0,0);continue}var p=parseFloat(s[f]);isNaN(p)?u.push(0):u.push(p)}for(;u.length>0&&!isNaN(u[0]);){var m,v,_,y,b,x,w,S,C,k,A,P="",T=[],F=o,E=h;switch(c){case"l":o+=u.shift(),h+=u.shift(),P="L",T.push(o,h);break;case"L":o=u.shift(),h=u.shift(),T.push(o,h);break;case"m":var R=u.shift(),O=u.shift();if(o+=R,h+=O,P="M",n.length>2&&"z"===n[n.length-1].command){for(var D=n.length-2;D>=0;D--)if("M"===n[D].command){o=n[D].points[0]+R,h=n[D].points[1]+O;break}}T.push(o,h),c="l";break;case"M":o=u.shift(),h=u.shift(),P="M",T.push(o,h),c="L";break;case"h":o+=u.shift(),P="L",T.push(o,h);break;case"H":o=u.shift(),P="L",T.push(o,h);break;case"v":h+=u.shift(),P="L",T.push(o,h);break;case"V":h=u.shift(),P="L",T.push(o,h);break;case"C":T.push(u.shift(),u.shift(),u.shift(),u.shift()),o=u.shift(),h=u.shift(),T.push(o,h);break;case"c":T.push(o+u.shift(),h+u.shift(),o+u.shift(),h+u.shift()),o+=u.shift(),h+=u.shift(),P="C",T.push(o,h);break;case"S":_=o,y=h,"C"===(v=n[n.length-1]).command&&(_=o+(o-v.points[2]),y=h+(h-v.points[3])),T.push(_,y,u.shift(),u.shift()),o=u.shift(),h=u.shift(),P="C",T.push(o,h);break;case"s":_=o,y=h,"C"===(v=n[n.length-1]).command&&(_=o+(o-v.points[2]),y=h+(h-v.points[3])),T.push(_,y,o+u.shift(),h+u.shift()),o+=u.shift(),h+=u.shift(),P="C",T.push(o,h);break;case"Q":T.push(u.shift(),u.shift()),o=u.shift(),h=u.shift(),T.push(o,h);break;case"q":T.push(o+u.shift(),h+u.shift()),o+=u.shift(),h+=u.shift(),P="Q",T.push(o,h);break;case"T":_=o,y=h,"Q"===(v=n[n.length-1]).command&&(_=o+(o-v.points[0]),y=h+(h-v.points[1])),o=u.shift(),h=u.shift(),P="Q",T.push(_,y,o,h);break;case"t":_=o,y=h,"Q"===(v=n[n.length-1]).command&&(_=o+(o-v.points[0]),y=h+(h-v.points[1])),o+=u.shift(),h+=u.shift(),P="Q",T.push(_,y,o,h);break;case"A":b=u.shift(),x=u.shift(),w=u.shift(),S=u.shift(),C=u.shift(),k=o,A=h,o=u.shift(),h=u.shift(),P="A",T=this.convertEndpointToCenterParameterization(k,A,o,h,S,C,b,x,w);break;case"a":b=u.shift(),x=u.shift(),w=u.shift(),S=u.shift(),C=u.shift(),k=o,A=h,o+=u.shift(),h+=u.shift(),P="A",T=this.convertEndpointToCenterParameterization(k,A,o,h,S,C,b,x,w)}n.push({command:P||c,points:T,start:{x:F,y:E},pathLength:this.calcLength(F,E,P||c,T)})}("z"===c||"Z"===c)&&n.push({command:"z",points:[],start:void 0,pathLength:0})}return n}static calcLength(t,e,r,i){var a,n,h,l;switch(r){case"L":return o.getLineLength(t,e,i[0],i[1]);case"C":return(0,s.getCubicArcLength)([t,i[0],i[2],i[4]],[e,i[1],i[3],i[5]],1);case"Q":return(0,s.getQuadraticArcLength)([t,i[0],i[2]],[e,i[1],i[3]],1);case"A":a=0;var d=i[4],c=i[5],u=i[4]+c,f=Math.PI/180;if(Math.abs(d-u)<f&&(f=Math.abs(d-u)),n=o.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],d,0),c<0)for(l=d-f;l>u;l-=f)h=o.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],l,0),a+=o.getLineLength(n.x,n.y,h.x,h.y),n=h;else for(l=d+f;l<u;l+=f)h=o.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],l,0),a+=o.getLineLength(n.x,n.y,h.x,h.y),n=h;return h=o.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],u,0),a+=o.getLineLength(n.x,n.y,h.x,h.y)}return 0}static convertEndpointToCenterParameterization(t,e,r,i,a,n,s,o,h){var l=h*(Math.PI/180),d=Math.cos(l)*(t-r)/2+Math.sin(l)*(e-i)/2,c=-1*Math.sin(l)*(t-r)/2+Math.cos(l)*(e-i)/2,u=d*d/(s*s)+c*c/(o*o);u>1&&(s*=Math.sqrt(u),o*=Math.sqrt(u));var f=Math.sqrt((s*s*(o*o)-s*s*(c*c)-o*o*(d*d))/(s*s*(c*c)+o*o*(d*d)));a===n&&(f*=-1),isNaN(f)&&(f=0);var g=f*s*c/o,p=-(f*o)*d/s,m=function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])},v=function(t,e){return(t[0]*e[0]+t[1]*e[1])/(m(t)*m(e))},_=function(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(v(t,e))},y=_([1,0],[(d-g)/s,(c-p)/o]),b=[(d-g)/s,(c-p)/o],x=[(-1*d-g)/s,(-1*c-p)/o],w=_(b,x);return -1>=v(b,x)&&(w=Math.PI),v(b,x)>=1&&(w=0),0===n&&w>0&&(w-=2*Math.PI),1===n&&w<0&&(w+=2*Math.PI),[(t+r)/2+Math.cos(l)*g-Math.sin(l)*p,(e+i)/2+Math.sin(l)*g+Math.cos(l)*p,s,o,y,w,l,n]}}e.Path=o,o.prototype.className="Path",o.prototype._attrsAffectingSize=["data"],(0,n._registerNode)(o),i.Factory.addGetterSetter(o,"data")},75244:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Rect=void 0;let i=r(1455),a=r(97955),n=r(54417),s=r(68588),o=r(53774);class h extends a.Shape{_sceneFunc(t){var e=this.cornerRadius(),r=this.width(),i=this.height();t.beginPath(),e?s.Util.drawRoundedRectPath(t,r,i,e):t.rect(0,0,r,i),t.closePath(),t.fillStrokeShape(this)}}e.Rect=h,h.prototype.className="Rect",(0,n._registerNode)(h),i.Factory.addGetterSetter(h,"cornerRadius",0,(0,o.getNumberOrArrayOfNumbersValidator)(4))},31785:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RegularPolygon=void 0;let i=r(1455),a=r(97955),n=r(53774),s=r(54417);class o extends a.Shape{_sceneFunc(t){let e=this._getPoints();t.beginPath(),t.moveTo(e[0].x,e[0].y);for(var r=1;r<e.length;r++)t.lineTo(e[r].x,e[r].y);t.closePath(),t.fillStrokeShape(this)}_getPoints(){let t=this.attrs.sides,e=this.attrs.radius||0,r=[];for(var i=0;i<t;i++)r.push({x:e*Math.sin(2*i*Math.PI/t),y:-1*e*Math.cos(2*i*Math.PI/t)});return r}getSelfRect(){let t=this._getPoints();var e=t[0].x,r=t[0].y,i=t[0].x,a=t[0].y;return t.forEach(t=>{e=Math.min(e,t.x),r=Math.max(r,t.x),i=Math.min(i,t.y),a=Math.max(a,t.y)}),{x:e,y:i,width:r-e,height:a-i}}getWidth(){return 2*this.radius()}getHeight(){return 2*this.radius()}setWidth(t){this.radius(t/2)}setHeight(t){this.radius(t/2)}}e.RegularPolygon=o,o.prototype.className="RegularPolygon",o.prototype._centroid=!0,o.prototype._attrsAffectingSize=["radius"],(0,s._registerNode)(o),i.Factory.addGetterSetter(o,"radius",0,(0,n.getNumberValidator)()),i.Factory.addGetterSetter(o,"sides",0,(0,n.getNumberValidator)())},60657:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Ring=void 0;let i=r(1455),a=r(97955),n=r(53774),s=r(54417);var o=2*Math.PI;class h extends a.Shape{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.innerRadius(),0,o,!1),t.moveTo(this.outerRadius(),0),t.arc(0,0,this.outerRadius(),o,0,!0),t.closePath(),t.fillStrokeShape(this)}getWidth(){return 2*this.outerRadius()}getHeight(){return 2*this.outerRadius()}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}}e.Ring=h,h.prototype.className="Ring",h.prototype._centroid=!0,h.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,s._registerNode)(h),i.Factory.addGetterSetter(h,"innerRadius",0,(0,n.getNumberValidator)()),i.Factory.addGetterSetter(h,"outerRadius",0,(0,n.getNumberValidator)())},88986:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Sprite=void 0;let i=r(1455),a=r(97955),n=r(16745),s=r(53774),o=r(54417);class h extends a.Shape{constructor(t){super(t),this._updated=!0,this.anim=new n.Animation(()=>{var t=this._updated;return this._updated=!1,t}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(t){var e=this.animation(),r=this.frameIndex(),i=4*r,a=this.animations()[e],n=this.frameOffsets(),s=a[i+0],o=a[i+1],h=a[i+2],l=a[i+3],d=this.image();if((this.hasFill()||this.hasStroke())&&(t.beginPath(),t.rect(0,0,h,l),t.closePath(),t.fillStrokeShape(this)),d){if(n){var c=n[e],u=2*r;t.drawImage(d,s,o,h,l,c[u+0],c[u+1],h,l)}else t.drawImage(d,s,o,h,l,0,0,h,l)}}_hitFunc(t){var e=this.animation(),r=this.frameIndex(),i=4*r,a=this.animations()[e],n=this.frameOffsets(),s=a[i+2],o=a[i+3];if(t.beginPath(),n){var h=n[e],l=2*r;t.rect(h[l+0],h[l+1],s,o)}else t.rect(0,0,s,o);t.closePath(),t.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){var t=this;this.interval=setInterval(function(){t._updateIndex()},1e3/this.frameRate())}start(){if(!this.isRunning()){var t=this.getLayer();this.anim.setLayers(t),this._setInterval(),this.anim.start()}}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){var t=this.frameIndex(),e=this.animation();t<this.animations()[e].length/4-1?this.frameIndex(t+1):this.frameIndex(0)}}e.Sprite=h,h.prototype.className="Sprite",(0,o._registerNode)(h),i.Factory.addGetterSetter(h,"animation"),i.Factory.addGetterSetter(h,"animations"),i.Factory.addGetterSetter(h,"frameOffsets"),i.Factory.addGetterSetter(h,"image"),i.Factory.addGetterSetter(h,"frameIndex",0,(0,s.getNumberValidator)()),i.Factory.addGetterSetter(h,"frameRate",17,(0,s.getNumberValidator)()),i.Factory.backCompat(h,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"})},71964:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Star=void 0;let i=r(1455),a=r(97955),n=r(53774),s=r(54417);class o extends a.Shape{_sceneFunc(t){var e=this.innerRadius(),r=this.outerRadius(),i=this.numPoints();t.beginPath(),t.moveTo(0,0-r);for(var a=1;a<2*i;a++){var n=a%2==0?r:e,s=n*Math.sin(a*Math.PI/i),o=-1*n*Math.cos(a*Math.PI/i);t.lineTo(s,o)}t.closePath(),t.fillStrokeShape(this)}getWidth(){return 2*this.outerRadius()}getHeight(){return 2*this.outerRadius()}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}}e.Star=o,o.prototype.className="Star",o.prototype._centroid=!0,o.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,s._registerNode)(o),i.Factory.addGetterSetter(o,"numPoints",5,(0,n.getNumberValidator)()),i.Factory.addGetterSetter(o,"innerRadius",0,(0,n.getNumberValidator)()),i.Factory.addGetterSetter(o,"outerRadius",0,(0,n.getNumberValidator)())},23787:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Text=e.stringToArray=void 0;let i=r(68588),a=r(1455),n=r(97955),s=r(54417),o=r(53774),h=r(54417);function l(t){return Array.from(t)}e.stringToArray=l;var d,c="auto",u="inherit",f="justify",g="left",p="middle",m="normal",v="none",_=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],y=_.length;function b(){return d||(d=i.Util.createCanvasElement().getContext("2d"))}class x extends n.Shape{constructor(t){var e;super(((e=(e=t)||{}).fillLinearGradientColorStops||e.fillRadialGradientColorStops||e.fillPatternImage||(e.fill=e.fill||"black"),e)),this._partialTextX=0,this._partialTextY=0;for(var r=0;r<y;r++)this.on(_[r]+"Change.konva",this._setTextData);this._setTextData()}_sceneFunc(t){var e=this.textArr,r=e.length;if(this.text()){var i,a=this.padding(),n=this.fontSize(),o=this.lineHeight()*n,h=this.verticalAlign(),d=this.direction(),c=0,m=this.align(),v=this.getWidth(),_=this.letterSpacing(),y=this.fill(),b=this.textDecoration(),x=-1!==b.indexOf("underline"),w=-1!==b.indexOf("line-through");d=d===u?t.direction:d;var S=o/2,C=p;if(s.Konva._fixTextRendering){var k=this.measureSize("M");C="alphabetic",S=(k.fontBoundingBoxAscent-k.fontBoundingBoxDescent)/2+o/2}var A=0,P=0;for("rtl"===d&&t.setAttr("direction",d),t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",C),t.setAttr("textAlign",g),h===p?c=(this.getHeight()-r*o-2*a)/2:"bottom"===h&&(c=this.getHeight()-r*o-2*a),t.translate(a,c+a),i=0;i<r;i++){var T,F,E,A=0,P=0,R=e[i],O=R.text,D=R.width,M=R.lastInParagraph;if(t.save(),"right"===m?A+=v-D-2*a:"center"===m&&(A+=(v-D-2*a)/2),x){t.save(),t.beginPath();let e=s.Konva._fixTextRendering?Math.round(n/4):Math.round(n/2),r=A,i=S+P+e;t.moveTo(r,i),F=0==(T=O.split(" ").length-1),E=m!==f||M?D:v-2*a,t.lineTo(r+Math.round(E),i),t.lineWidth=n/15;let o=this._getLinearGradient();t.strokeStyle=o||y,t.stroke(),t.restore()}if(w){t.save(),t.beginPath();let e=s.Konva._fixTextRendering?-Math.round(n/4):0;t.moveTo(A,S+P+e),F=0==(T=O.split(" ").length-1),E=m===f&&M&&!F?v-2*a:D,t.lineTo(A+Math.round(E),S+P+e),t.lineWidth=n/15;let r=this._getLinearGradient();t.strokeStyle=r||y,t.stroke(),t.restore()}if("rtl"!==d&&(0!==_||m===f)){T=O.split(" ").length-1;for(var N=l(O),I=0;I<N.length;I++){var L=N[I];" "!==L||M||m!==f||(A+=(v-2*a-D)/T),this._partialTextX=A,this._partialTextY=S+P,this._partialText=L,t.fillStrokeShape(this),A+=this.measureSize(L).width+_}}else 0!==_&&t.setAttr("letterSpacing",`${_}px`),this._partialTextX=A,this._partialTextY=S+P,this._partialText=O,t.fillStrokeShape(this);t.restore(),r>1&&(S+=o)}}}_hitFunc(t){var e=this.getWidth(),r=this.getHeight();t.beginPath(),t.rect(0,0,e,r),t.closePath(),t.fillStrokeShape(this)}setText(t){var e=i.Util._isString(t)?t:null==t?"":t+"";return this._setAttr("text",e),this}getWidth(){return this.attrs.width===c||void 0===this.attrs.width?this.getTextWidth()+2*this.padding():this.attrs.width}getHeight(){return this.attrs.height===c||void 0===this.attrs.height?this.fontSize()*this.textArr.length*this.lineHeight()+2*this.padding():this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return i.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(t){var e,r=b(),i=this.fontSize();return r.save(),r.font=this._getContextFont(),e=r.measureText(t),r.restore(),{actualBoundingBoxAscent:e.actualBoundingBoxAscent,actualBoundingBoxDescent:e.actualBoundingBoxDescent,actualBoundingBoxLeft:e.actualBoundingBoxLeft,actualBoundingBoxRight:e.actualBoundingBoxRight,alphabeticBaseline:e.alphabeticBaseline,emHeightAscent:e.emHeightAscent,emHeightDescent:e.emHeightDescent,fontBoundingBoxAscent:e.fontBoundingBoxAscent,fontBoundingBoxDescent:e.fontBoundingBoxDescent,hangingBaseline:e.hangingBaseline,ideographicBaseline:e.ideographicBaseline,width:e.width,height:i}}_getContextFont(){return this.fontStyle()+" "+this.fontVariant()+" "+this.fontSize()+"px "+this.fontFamily().split(",").map(t=>{t=t.trim();let e=t.indexOf(" ")>=0,r=t.indexOf('"')>=0||t.indexOf("'")>=0;return e&&!r&&(t=`"${t}"`),t}).join(", ")}_addTextLine(t){let e=this.align();e===f&&(t=t.trim());var r=this._getTextWidth(t);return this.textArr.push({text:t,width:r,lastInParagraph:!1})}_getTextWidth(t){var e=this.letterSpacing(),r=t.length;return b().measureText(t).width+(r?e*(r-1):0)}_setTextData(){var t=this.text().split("\n"),e=+this.fontSize(),r=0,i=this.lineHeight()*e,a=this.attrs.width,n=this.attrs.height,s=a!==c&&void 0!==a,o=n!==c&&void 0!==n,h=this.padding(),l=a-2*h,d=n-2*h,u=0,f=this.wrap(),g="char"!==f&&f!==v,p=this.ellipsis();this.textArr=[],b().font=this._getContextFont();for(var m=p?this._getTextWidth("…"):0,_=0,y=t.length;_<y;++_){var x=t[_],w=this._getTextWidth(x);if(s&&w>l)for(;x.length>0;){for(var S=0,C=x.length,k="",A=0;S<C;){var P=S+C>>>1,T=x.slice(0,P+1),F=this._getTextWidth(T)+m;F<=l?(S=P+1,k=T,A=F):C=P}if(k){if(g){var E,R=x[k.length];(E=(" "===R||"-"===R)&&A<=l?k.length:Math.max(k.lastIndexOf(" "),k.lastIndexOf("-"))+1)>0&&(S=E,k=k.slice(0,S),A=this._getTextWidth(k))}if(k=k.trimRight(),this._addTextLine(k),r=Math.max(r,A),u+=i,this._shouldHandleEllipsis(u)){this._tryToAddEllipsisToLastLine();break}if((x=(x=x.slice(S)).trimLeft()).length>0&&(w=this._getTextWidth(x))<=l){this._addTextLine(x),u+=i,r=Math.max(r,w);break}}else break}else this._addTextLine(x),u+=i,r=Math.max(r,w),this._shouldHandleEllipsis(u)&&_<y-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),o&&u+i>d)break}this.textHeight=e,this.textWidth=r}_shouldHandleEllipsis(t){var e=+this.fontSize(),r=this.lineHeight()*e,i=this.attrs.height,a=this.padding();return!(this.wrap()!==v)||i!==c&&void 0!==i&&t+r>i-2*a}_tryToAddEllipsisToLastLine(){var t=this.attrs.width,e=this.padding(),r=this.ellipsis(),i=this.textArr[this.textArr.length-1];i&&r&&(t===c||void 0===t||this._getTextWidth(i.text+"…")<t-2*e||(i.text=i.text.slice(0,i.text.length-3)),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(i.text+"…"))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){let t=-1!==this.textDecoration().indexOf("underline")||-1!==this.textDecoration().indexOf("line-through"),e=this.hasShadow();return!!t&&!!e||super._useBufferCanvas()}}e.Text=x,x.prototype._fillFunc=function(t){t.fillText(this._partialText,this._partialTextX,this._partialTextY)},x.prototype._strokeFunc=function(t){t.setAttr("miterLimit",2),t.strokeText(this._partialText,this._partialTextX,this._partialTextY)},x.prototype.className="Text",x.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"],(0,h._registerNode)(x),a.Factory.overWriteSetter(x,"width",(0,o.getNumberOrAutoValidator)()),a.Factory.overWriteSetter(x,"height",(0,o.getNumberOrAutoValidator)()),a.Factory.addGetterSetter(x,"direction",u),a.Factory.addGetterSetter(x,"fontFamily","Arial"),a.Factory.addGetterSetter(x,"fontSize",12,(0,o.getNumberValidator)()),a.Factory.addGetterSetter(x,"fontStyle",m),a.Factory.addGetterSetter(x,"fontVariant",m),a.Factory.addGetterSetter(x,"padding",0,(0,o.getNumberValidator)()),a.Factory.addGetterSetter(x,"align",g),a.Factory.addGetterSetter(x,"verticalAlign","top"),a.Factory.addGetterSetter(x,"lineHeight",1,(0,o.getNumberValidator)()),a.Factory.addGetterSetter(x,"wrap","word"),a.Factory.addGetterSetter(x,"ellipsis",!1,(0,o.getBooleanValidator)()),a.Factory.addGetterSetter(x,"letterSpacing",0,(0,o.getNumberValidator)()),a.Factory.addGetterSetter(x,"text","",(0,o.getStringValidator)()),a.Factory.addGetterSetter(x,"textDecoration","")},82831:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TextPath=void 0;let i=r(68588),a=r(1455),n=r(97955),s=r(87339),o=r(23787),h=r(53774),l=r(54417);var d="normal";function c(t){t.fillText(this.partialText,0,0)}function u(t){t.strokeText(this.partialText,0,0)}class f extends n.Shape{constructor(t){super(t),this.dummyCanvas=i.Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return s.Path.getPathLength(this.dataArray)}_getPointAtLength(t){if(!this.attrs.data)return null;let e=this.pathLength;return t-1>e?null:s.Path.getPointAtLengthOfDataArray(t,this.dataArray)}_readDataAttribute(){this.dataArray=s.Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(t){t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",this.textBaseline()),t.setAttr("textAlign","left"),t.save();var e=this.textDecoration(),r=this.fill(),i=this.fontSize(),a=this.glyphInfo;"underline"===e&&t.beginPath();for(var n=0;n<a.length;n++){t.save();var s=a[n].p0;t.translate(s.x,s.y),t.rotate(a[n].rotation),this.partialText=a[n].text,t.fillStrokeShape(this),"underline"===e&&(0===n&&t.moveTo(0,i/2+1),t.lineTo(i,i/2+1)),t.restore()}"underline"===e&&(t.strokeStyle=r,t.lineWidth=i/20,t.stroke()),t.restore()}_hitFunc(t){t.beginPath();var e=this.glyphInfo;if(e.length>=1){var r=e[0].p0;t.moveTo(r.x,r.y)}for(var i=0;i<e.length;i++){var a=e[i].p1;t.lineTo(a.x,a.y)}t.setAttr("lineWidth",this.fontSize()),t.setAttr("strokeStyle",this.colorKey),t.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return i.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(t){return o.Text.prototype.setText.call(this,t)}_getContextFont(){return o.Text.prototype._getContextFont.call(this)}_getTextSize(t){var e=this.dummyCanvas.getContext("2d");e.save(),e.font=this._getContextFont();var r=e.measureText(t);return e.restore(),{width:r.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){let{width:t,height:e}=this._getTextSize(this.attrs.text);if(this.textWidth=t,this.textHeight=e,this.glyphInfo=[],!this.attrs.data)return null;let r=this.letterSpacing(),i=this.align(),a=this.kerningFunc(),n=Math.max(this.textWidth+((this.attrs.text||"").length-1)*r,0),h=0;"center"===i&&(h=Math.max(0,this.pathLength/2-n/2)),"right"===i&&(h=Math.max(0,this.pathLength-n));let l=(0,o.stringToArray)(this.text()),d=h;for(var c=0;c<l.length;c++){let t=this._getPointAtLength(d);if(!t)return;let e=this._getTextSize(l[c]).width+r;if(" "===l[c]&&"justify"===i){let t=this.text().split(" ").length-1;e+=(this.pathLength-n)/t}let o=this._getPointAtLength(d+e);if(!o)return;let h=s.Path.getLineLength(t.x,t.y,o.x,o.y),u=0;if(a)try{u=a(l[c-1],l[c])*this.fontSize()}catch(t){u=0}t.x+=u,o.x+=u,this.textWidth+=u;let f=s.Path.getPointOnLine(u+h/2,t.x,t.y,o.x,o.y),g=Math.atan2(o.y-t.y,o.x-t.x);this.glyphInfo.push({transposeX:f.x,transposeY:f.y,text:l[c],rotation:g,p0:t,p1:o}),d+=e}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};var t,e,r=[];this.glyphInfo.forEach(function(t){r.push(t.p0.x),r.push(t.p0.y),r.push(t.p1.x),r.push(t.p1.y)});for(var i=r[0]||0,a=r[0]||0,n=r[1]||0,s=r[1]||0,o=0;o<r.length/2;o++)t=r[2*o],e=r[2*o+1],i=Math.min(i,t),a=Math.max(a,t),n=Math.min(n,e),s=Math.max(s,e);var h=this.fontSize();return{x:i-h/2,y:n-h/2,width:a-i+h,height:s-n+h}}destroy(){return i.Util.releaseCanvas(this.dummyCanvas),super.destroy()}}e.TextPath=f,f.prototype._fillFunc=c,f.prototype._strokeFunc=u,f.prototype._fillFuncHit=c,f.prototype._strokeFuncHit=u,f.prototype.className="TextPath",f.prototype._attrsAffectingSize=["text","fontSize","data"],(0,l._registerNode)(f),a.Factory.addGetterSetter(f,"data"),a.Factory.addGetterSetter(f,"fontFamily","Arial"),a.Factory.addGetterSetter(f,"fontSize",12,(0,h.getNumberValidator)()),a.Factory.addGetterSetter(f,"fontStyle",d),a.Factory.addGetterSetter(f,"align","left"),a.Factory.addGetterSetter(f,"letterSpacing",0,(0,h.getNumberValidator)()),a.Factory.addGetterSetter(f,"textBaseline","middle"),a.Factory.addGetterSetter(f,"fontVariant",d),a.Factory.addGetterSetter(f,"text",""),a.Factory.addGetterSetter(f,"textDecoration",null),a.Factory.addGetterSetter(f,"kerningFunc",null)},29516:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Transformer=void 0;let i=r(68588),a=r(1455),n=r(77939),s=r(97955),o=r(75244),h=r(58985),l=r(54417),d=r(53774),c=r(54417);var u="tr-konva",f=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(t=>t+`.${u}`).join(" "),g="nodesRect",p=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],m={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135};let v="ontouchstart"in l.Konva._global;var _=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function y(t,e,r){let i=r.x+(t.x-r.x)*Math.cos(e)-(t.y-r.y)*Math.sin(e),a=r.y+(t.x-r.x)*Math.sin(e)+(t.y-r.y)*Math.cos(e);return{...t,rotation:t.rotation+e,x:i,y:a}}let b=0;class x extends h.Group{constructor(t){super(t),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(f,this.update),this.getNode()&&this.update()}attachTo(t){return this.setNode(t),this}setNode(t){return i.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([t])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return u+this._id}setNodes(t=[]){this._nodes&&this._nodes.length&&this.detach();let e=t.filter(t=>!t.isAncestorOf(this)||(i.Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1));return this._nodes=t=e,1===t.length&&this.useSingleNodeRotation()?this.rotation(t[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(t=>{let e=()=>{1===this.nodes().length&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),this._transforming||this.isDragging()||this.update()},r=t._attrsAffectingSize.map(t=>t+"Change."+this._getEventNamespace()).join(" ");t.on(r,e),t.on(p.map(t=>t+`.${this._getEventNamespace()}`).join(" "),e),t.on(`absoluteTransformChange.${this._getEventNamespace()}`,e),this._proxyDrag(t)}),this._resetTransformCache(),this.findOne(".top-left")&&this.update(),this}_proxyDrag(t){let e;t.on(`dragstart.${this._getEventNamespace()}`,r=>{e=t.getAbsolutePosition(),this.isDragging()||t===this.findOne(".back")||this.startDrag(r,!1)}),t.on(`dragmove.${this._getEventNamespace()}`,r=>{if(!e)return;let i=t.getAbsolutePosition(),a=i.x-e.x,n=i.y-e.y;this.nodes().forEach(e=>{if(e===t||e.isDragging())return;let i=e.getAbsolutePosition();e.setAbsolutePosition({x:i.x+a,y:i.y+n}),e.startDrag(r)}),e=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(t=>{t.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(g),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(g,this.__getNodeRect)}__getNodeShape(t,e=this.rotation(),r){var i=t.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),a=t.getAbsoluteScale(r),n=t.getAbsolutePosition(r),s=i.x*a.x-t.offsetX()*a.x,o=i.y*a.y-t.offsetY()*a.y;let h=(l.Konva.getAngle(t.getAbsoluteRotation())+2*Math.PI)%(2*Math.PI),d={x:n.x+s*Math.cos(h)+o*Math.sin(-h),y:n.y+o*Math.cos(h)+s*Math.sin(h),width:i.width*a.x,height:i.height*a.y,rotation:h};return y(d,-l.Konva.getAngle(e),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};let t=[];this.nodes().map(e=>{let r=e.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()});var i=[{x:r.x,y:r.y},{x:r.x+r.width,y:r.y},{x:r.x+r.width,y:r.y+r.height},{x:r.x,y:r.y+r.height}],a=e.getAbsoluteTransform();i.forEach(function(e){var r=a.point(e);t.push(r)})});let e=new i.Transform;e.rotate(-l.Konva.getAngle(this.rotation()));var r=1/0,a=1/0,n=-1/0,s=-1/0;t.forEach(function(t){var i=e.point(t);void 0===r&&(r=n=i.x,a=s=i.y),r=Math.min(r,i.x),a=Math.min(a,i.y),n=Math.max(n,i.x),s=Math.max(s,i.y)}),e.invert();let o=e.point({x:r,y:a});return{x:o.x,y:o.y,width:n-r,height:s-a,rotation:l.Konva.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),_.forEach(t=>{this._createAnchor(t)}),this._createAnchor("rotater")}_createAnchor(t){var e=new o.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:t+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:v?10:"auto"}),r=this;e.on("mousedown touchstart",function(t){r._handleMouseDown(t)}),e.on("dragstart",t=>{e.stopDrag(),t.cancelBubble=!0}),e.on("dragend",t=>{t.cancelBubble=!0}),e.on("mouseenter",()=>{var r=function(t,e,r){if("rotater"===t)return r;e+=i.Util.degToRad(m[t]||0);var a=(i.Util.radToDeg(e)%360+360)%360;if(i.Util._inRange(a,337.5,360)||i.Util._inRange(a,0,22.5))return"ns-resize";if(i.Util._inRange(a,22.5,67.5))return"nesw-resize";if(i.Util._inRange(a,67.5,112.5))return"ew-resize";if(i.Util._inRange(a,112.5,157.5))return"nwse-resize";if(i.Util._inRange(a,157.5,202.5))return"ns-resize";if(i.Util._inRange(a,202.5,247.5))return"nesw-resize";if(i.Util._inRange(a,247.5,292.5))return"ew-resize";else if(i.Util._inRange(a,292.5,337.5))return"nwse-resize";else return i.Util.error("Transformer has unknown angle for cursor detection: "+a),"pointer"}(t,l.Konva.getAngle(this.rotation()),this.rotateAnchorCursor());e.getStage().content&&(e.getStage().content.style.cursor=r),this._cursorChange=!0}),e.on("mouseout",()=>{e.getStage().content&&(e.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(e)}_createBack(){var t=new s.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc(t,e){var r=e.getParent(),a=r.padding();t.beginPath(),t.rect(-a,-a,e.width()+2*a,e.height()+2*a),t.moveTo(e.width()/2,-a),r.rotateEnabled()&&r.rotateLineVisible()&&t.lineTo(e.width()/2,-r.rotateAnchorOffset()*i.Util._sign(e.height())-a),t.fillStrokeShape(e)},hitFunc:(t,e)=>{if(this.shouldOverdrawWholeArea()){var r=this.padding();t.beginPath(),t.rect(-r,-r,e.width()+2*r,e.height()+2*r),t.fillStrokeShape(e)}}});this.add(t),this._proxyDrag(t),t.on("dragstart",t=>{t.cancelBubble=!0}),t.on("dragmove",t=>{t.cancelBubble=!0}),t.on("dragend",t=>{t.cancelBubble=!0}),this.on("dragmove",t=>{this.update()})}_handleMouseDown(t){if(!this._transforming){this._movingAnchorName=t.target.name().split(" ")[0];var e=this._getNodeRect(),r=e.width,i=e.height,a=Math.sqrt(Math.pow(r,2)+Math.pow(i,2));this.sin=Math.abs(i/a),this.cos=Math.abs(r/a),"undefined"!=typeof window&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;var n=t.target.getAbsolutePosition(),s=t.target.getStage().getPointerPosition();this._anchorDragOffset={x:s.x-n.x,y:s.y-n.y},b++,this._fire("transformstart",{evt:t.evt,target:this.getNode()}),this._nodes.forEach(e=>{e._fire("transformstart",{evt:t.evt,target:e})})}}_handleMouseMove(t){var e,r,i,a,n=this.findOne("."+this._movingAnchorName),s=n.getStage();s.setPointersPositions(t);let o=s.getPointerPosition(),h={x:o.x-this._anchorDragOffset.x,y:o.y-this._anchorDragOffset.y},d=n.getAbsolutePosition();this.anchorDragBoundFunc()&&(h=this.anchorDragBoundFunc()(d,h,t)),n.setAbsolutePosition(h);let c=n.getAbsolutePosition();if(d.x!==c.x||d.y!==c.y){if("rotater"===this._movingAnchorName){var u=this._getNodeRect();e=n.x()-u.width/2;let i=Math.atan2(-(r=-n.y()+u.height/2),e)+Math.PI/2;u.height<0&&(i-=Math.PI);var f=l.Konva.getAngle(this.rotation());let a=f+i,s=l.Konva.getAngle(this.rotationSnapTolerance()),o=function(t,e,r){let i=e;for(let a=0;a<t.length;a++){let n=l.Konva.getAngle(t[a]),s=Math.abs(n-e)%(2*Math.PI),o=Math.min(s,2*Math.PI-s);o<r&&(i=n)}return i}(this.rotationSnaps(),a,s),h=o-u.rotation,d=function(t,e){let r={x:t.x+t.width/2*Math.cos(t.rotation)+t.height/2*Math.sin(-t.rotation),y:t.y+t.height/2*Math.cos(t.rotation)+t.width/2*Math.sin(t.rotation)};return y(t,e,r)}(u,h);this._fitNodesInto(d,t);return}var g=this.shiftBehavior();a="inverted"===g?this.keepRatio()&&!t.shiftKey:"none"===g?this.keepRatio():this.keepRatio()||t.shiftKey;var p=this.centeredScaling()||t.altKey;if("top-left"===this._movingAnchorName){if(a){var m=p?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};i=Math.sqrt(Math.pow(m.x-n.x(),2)+Math.pow(m.y-n.y(),2));var v=this.findOne(".top-left").x()>m.x?-1:1,_=this.findOne(".top-left").y()>m.y?-1:1;e=i*this.cos*v,r=i*this.sin*_,this.findOne(".top-left").x(m.x-e),this.findOne(".top-left").y(m.y-r)}}else if("top-center"===this._movingAnchorName)this.findOne(".top-left").y(n.y());else if("top-right"===this._movingAnchorName){if(a){var m=p?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};i=Math.sqrt(Math.pow(n.x()-m.x,2)+Math.pow(m.y-n.y(),2));var v=this.findOne(".top-right").x()<m.x?-1:1,_=this.findOne(".top-right").y()>m.y?-1:1;e=i*this.cos*v,r=i*this.sin*_,this.findOne(".top-right").x(m.x+e),this.findOne(".top-right").y(m.y-r)}var b=n.position();this.findOne(".top-left").y(b.y),this.findOne(".bottom-right").x(b.x)}else if("middle-left"===this._movingAnchorName)this.findOne(".top-left").x(n.x());else if("middle-right"===this._movingAnchorName)this.findOne(".bottom-right").x(n.x());else if("bottom-left"===this._movingAnchorName){if(a){var m=p?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};i=Math.sqrt(Math.pow(m.x-n.x(),2)+Math.pow(n.y()-m.y,2));var v=m.x<n.x()?-1:1,_=n.y()<m.y?-1:1;e=i*this.cos*v,r=i*this.sin*_,n.x(m.x-e),n.y(m.y+r)}b=n.position(),this.findOne(".top-left").x(b.x),this.findOne(".bottom-right").y(b.y)}else if("bottom-center"===this._movingAnchorName)this.findOne(".bottom-right").y(n.y());else if("bottom-right"===this._movingAnchorName){if(a){var m=p?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};i=Math.sqrt(Math.pow(n.x()-m.x,2)+Math.pow(n.y()-m.y,2));var v=this.findOne(".bottom-right").x()<m.x?-1:1,_=this.findOne(".bottom-right").y()<m.y?-1:1;e=i*this.cos*v,r=i*this.sin*_,this.findOne(".bottom-right").x(m.x+e),this.findOne(".bottom-right").y(m.y+r)}}else console.error(Error("Wrong position argument of selection resizer: "+this._movingAnchorName));var p=this.centeredScaling()||t.altKey;if(p){var x=this.findOne(".top-left"),w=this.findOne(".bottom-right"),S=x.x(),C=x.y(),k=this.getWidth()-w.x(),A=this.getHeight()-w.y();w.move({x:-S,y:-C}),x.move({x:k,y:A})}var P=this.findOne(".top-left").getAbsolutePosition();e=P.x,r=P.y;var T=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),F=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:e,y:r,width:T,height:F,rotation:l.Konva.getAngle(this.rotation())},t)}}_handleMouseUp(t){this._removeEvents(t)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(t){var e;if(this._transforming){this._transforming=!1,"undefined"!=typeof window&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));var r=this.getNode();b--,this._fire("transformend",{evt:t,target:r}),null===(e=this.getLayer())||void 0===e||e.batchDraw(),r&&this._nodes.forEach(e=>{var r;e._fire("transformend",{evt:t,target:e}),null===(r=e.getLayer())||void 0===r||r.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(t,e){var r=this._getNodeRect();if(i.Util._inRange(t.width,-(2*this.padding())-1,1)||i.Util._inRange(t.height,-(2*this.padding())-1,1)){this.update();return}var a=new i.Transform;if(a.rotate(l.Konva.getAngle(this.rotation())),this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("left")>=0){let e=a.point({x:-(2*this.padding()),y:0});t.x+=e.x,t.y+=e.y,t.width+=2*this.padding(),this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=e.x,this._anchorDragOffset.y-=e.y}else if(this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("right")>=0){let e=a.point({x:2*this.padding(),y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=e.x,this._anchorDragOffset.y-=e.y,t.width+=2*this.padding()}if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("top")>=0){let e=a.point({x:0,y:-(2*this.padding())});t.x+=e.x,t.y+=e.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=e.x,this._anchorDragOffset.y-=e.y,t.height+=2*this.padding()}else if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("bottom")>=0){let e=a.point({x:0,y:2*this.padding()});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=e.x,this._anchorDragOffset.y-=e.y,t.height+=2*this.padding()}if(this.boundBoxFunc()){let e=this.boundBoxFunc()(r,t);e?t=e:i.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}let n=new i.Transform;n.translate(r.x,r.y),n.rotate(r.rotation),n.scale(r.width/1e7,r.height/1e7);let s=new i.Transform,o=t.width/1e7,h=t.height/1e7;!1===this.flipEnabled()?(s.translate(t.x,t.y),s.rotate(t.rotation),s.translate(t.width<0?t.width:0,t.height<0?t.height:0),s.scale(Math.abs(o),Math.abs(h))):(s.translate(t.x,t.y),s.rotate(t.rotation),s.scale(o,h));let d=s.multiply(n.invert());this._nodes.forEach(t=>{var e;let r=t.getParent().getAbsoluteTransform(),a=t.getTransform().copy();a.translate(t.offsetX(),t.offsetY());let n=new i.Transform;n.multiply(r.copy().invert()).multiply(d).multiply(r).multiply(a);let s=n.decompose();t.setAttrs(s),null===(e=t.getLayer())||void 0===e||e.batchDraw()}),this.rotation(i.Util._getRotation(t.rotation)),this._nodes.forEach(t=>{this._fire("transform",{evt:e,target:t}),t._fire("transform",{evt:e,target:t})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(t,e){let r=this.findOne(t);r.setAttrs(e)}update(){var t,e=this._getNodeRect();this.rotation(i.Util._getRotation(e.rotation));var r=e.width,a=e.height,n=this.enabledAnchors(),s=this.resizeEnabled(),o=this.padding(),h=this.anchorSize();let l=this.find("._anchor");l.forEach(t=>{t.setAttrs({width:h,height:h,offsetX:h/2,offsetY:h/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:h/2+o,offsetY:h/2+o,visible:s&&n.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:r/2,y:0,offsetY:h/2+o,visible:s&&n.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:r,y:0,offsetX:h/2-o,offsetY:h/2+o,visible:s&&n.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:a/2,offsetX:h/2+o,visible:s&&n.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:r,y:a/2,offsetX:h/2-o,visible:s&&n.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:a,offsetX:h/2+o,offsetY:h/2-o,visible:s&&n.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:r/2,y:a,offsetY:h/2-o,visible:s&&n.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:r,y:a,offsetX:h/2-o,offsetY:h/2-o,visible:s&&n.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:r/2,y:-this.rotateAnchorOffset()*i.Util._sign(a)-o,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:r,height:a,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0});let d=this.anchorStyleFunc();d&&l.forEach(t=>{d(t)}),null===(t=this.getLayer())||void 0===t||t.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();var t=this.findOne("."+this._movingAnchorName);t&&t.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),h.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return n.Node.prototype.toObject.call(this)}clone(t){return n.Node.prototype.clone.call(this,t)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}}e.Transformer=x,x.isTransforming=()=>b>0,x.prototype.className="Transformer",(0,c._registerNode)(x),a.Factory.addGetterSetter(x,"enabledAnchors",_,function(t){return t instanceof Array||i.Util.warn("enabledAnchors value should be an array"),t instanceof Array&&t.forEach(function(t){-1===_.indexOf(t)&&i.Util.warn("Unknown anchor name: "+t+". Available names are: "+_.join(", "))}),t||[]}),a.Factory.addGetterSetter(x,"flipEnabled",!0,(0,d.getBooleanValidator)()),a.Factory.addGetterSetter(x,"resizeEnabled",!0),a.Factory.addGetterSetter(x,"anchorSize",10,(0,d.getNumberValidator)()),a.Factory.addGetterSetter(x,"rotateEnabled",!0),a.Factory.addGetterSetter(x,"rotateLineVisible",!0),a.Factory.addGetterSetter(x,"rotationSnaps",[]),a.Factory.addGetterSetter(x,"rotateAnchorOffset",50,(0,d.getNumberValidator)()),a.Factory.addGetterSetter(x,"rotateAnchorCursor","crosshair"),a.Factory.addGetterSetter(x,"rotationSnapTolerance",5,(0,d.getNumberValidator)()),a.Factory.addGetterSetter(x,"borderEnabled",!0),a.Factory.addGetterSetter(x,"anchorStroke","rgb(0, 161, 255)"),a.Factory.addGetterSetter(x,"anchorStrokeWidth",1,(0,d.getNumberValidator)()),a.Factory.addGetterSetter(x,"anchorFill","white"),a.Factory.addGetterSetter(x,"anchorCornerRadius",0,(0,d.getNumberValidator)()),a.Factory.addGetterSetter(x,"borderStroke","rgb(0, 161, 255)"),a.Factory.addGetterSetter(x,"borderStrokeWidth",1,(0,d.getNumberValidator)()),a.Factory.addGetterSetter(x,"borderDash"),a.Factory.addGetterSetter(x,"keepRatio",!0),a.Factory.addGetterSetter(x,"shiftBehavior","default"),a.Factory.addGetterSetter(x,"centeredScaling",!1),a.Factory.addGetterSetter(x,"ignoreStroke",!1),a.Factory.addGetterSetter(x,"padding",0,(0,d.getNumberValidator)()),a.Factory.addGetterSetter(x,"node"),a.Factory.addGetterSetter(x,"nodes"),a.Factory.addGetterSetter(x,"boundBoxFunc"),a.Factory.addGetterSetter(x,"anchorDragBoundFunc"),a.Factory.addGetterSetter(x,"anchorStyleFunc"),a.Factory.addGetterSetter(x,"shouldOverdrawWholeArea",!1),a.Factory.addGetterSetter(x,"useSingleNodeRotation",!0),a.Factory.backCompat(x,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"})},29846:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Wedge=void 0;let i=r(1455),a=r(97955),n=r(54417),s=r(53774),o=r(54417);class h extends a.Shape{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.radius(),0,n.Konva.getAngle(this.angle()),this.clockwise()),t.lineTo(0,0),t.closePath(),t.fillStrokeShape(this)}getWidth(){return 2*this.radius()}getHeight(){return 2*this.radius()}setWidth(t){this.radius(t/2)}setHeight(t){this.radius(t/2)}}e.Wedge=h,h.prototype.className="Wedge",h.prototype._centroid=!0,h.prototype._attrsAffectingSize=["radius"],(0,o._registerNode)(h),i.Factory.addGetterSetter(h,"radius",0,(0,s.getNumberValidator)()),i.Factory.addGetterSetter(h,"angle",0,(0,s.getNumberValidator)()),i.Factory.addGetterSetter(h,"clockwise",!1),i.Factory.backCompat(h,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"})},2568:function(t,e,r){var i,a,n,s,o;i=r(71012),a=r(40487).utf8,n=r(48738),s=r(40487).bin,(o=function(t,e){t.constructor==String?t=e&&"binary"===e.encoding?s.stringToBytes(t):a.stringToBytes(t):n(t)?t=Array.prototype.slice.call(t,0):Array.isArray(t)||t.constructor===Uint8Array||(t=t.toString());for(var r=i.bytesToWords(t),h=8*t.length,l=1732584193,d=-271733879,c=-1732584194,u=271733878,f=0;f<r.length;f++)r[f]=(r[f]<<8|r[f]>>>24)&16711935|(r[f]<<24|r[f]>>>8)&4278255360;r[h>>>5]|=128<<h%32,r[(h+64>>>9<<4)+14]=h;for(var g=o._ff,p=o._gg,m=o._hh,v=o._ii,f=0;f<r.length;f+=16){var _=l,y=d,b=c,x=u;l=g(l,d,c,u,r[f+0],7,-680876936),u=g(u,l,d,c,r[f+1],12,-389564586),c=g(c,u,l,d,r[f+2],17,606105819),d=g(d,c,u,l,r[f+3],22,-1044525330),l=g(l,d,c,u,r[f+4],7,-176418897),u=g(u,l,d,c,r[f+5],12,1200080426),c=g(c,u,l,d,r[f+6],17,-1473231341),d=g(d,c,u,l,r[f+7],22,-45705983),l=g(l,d,c,u,r[f+8],7,1770035416),u=g(u,l,d,c,r[f+9],12,-1958414417),c=g(c,u,l,d,r[f+10],17,-42063),d=g(d,c,u,l,r[f+11],22,-1990404162),l=g(l,d,c,u,r[f+12],7,1804603682),u=g(u,l,d,c,r[f+13],12,-40341101),c=g(c,u,l,d,r[f+14],17,-1502002290),d=g(d,c,u,l,r[f+15],22,1236535329),l=p(l,d,c,u,r[f+1],5,-165796510),u=p(u,l,d,c,r[f+6],9,-1069501632),c=p(c,u,l,d,r[f+11],14,643717713),d=p(d,c,u,l,r[f+0],20,-373897302),l=p(l,d,c,u,r[f+5],5,-701558691),u=p(u,l,d,c,r[f+10],9,38016083),c=p(c,u,l,d,r[f+15],14,-660478335),d=p(d,c,u,l,r[f+4],20,-405537848),l=p(l,d,c,u,r[f+9],5,568446438),u=p(u,l,d,c,r[f+14],9,-1019803690),c=p(c,u,l,d,r[f+3],14,-187363961),d=p(d,c,u,l,r[f+8],20,1163531501),l=p(l,d,c,u,r[f+13],5,-1444681467),u=p(u,l,d,c,r[f+2],9,-51403784),c=p(c,u,l,d,r[f+7],14,1735328473),d=p(d,c,u,l,r[f+12],20,-1926607734),l=m(l,d,c,u,r[f+5],4,-378558),u=m(u,l,d,c,r[f+8],11,-2022574463),c=m(c,u,l,d,r[f+11],16,1839030562),d=m(d,c,u,l,r[f+14],23,-35309556),l=m(l,d,c,u,r[f+1],4,-1530992060),u=m(u,l,d,c,r[f+4],11,1272893353),c=m(c,u,l,d,r[f+7],16,-155497632),d=m(d,c,u,l,r[f+10],23,-1094730640),l=m(l,d,c,u,r[f+13],4,681279174),u=m(u,l,d,c,r[f+0],11,-358537222),c=m(c,u,l,d,r[f+3],16,-722521979),d=m(d,c,u,l,r[f+6],23,76029189),l=m(l,d,c,u,r[f+9],4,-640364487),u=m(u,l,d,c,r[f+12],11,-421815835),c=m(c,u,l,d,r[f+15],16,530742520),d=m(d,c,u,l,r[f+2],23,-995338651),l=v(l,d,c,u,r[f+0],6,-198630844),u=v(u,l,d,c,r[f+7],10,1126891415),c=v(c,u,l,d,r[f+14],15,-1416354905),d=v(d,c,u,l,r[f+5],21,-57434055),l=v(l,d,c,u,r[f+12],6,1700485571),u=v(u,l,d,c,r[f+3],10,-1894986606),c=v(c,u,l,d,r[f+10],15,-1051523),d=v(d,c,u,l,r[f+1],21,-2054922799),l=v(l,d,c,u,r[f+8],6,1873313359),u=v(u,l,d,c,r[f+15],10,-30611744),c=v(c,u,l,d,r[f+6],15,-1560198380),d=v(d,c,u,l,r[f+13],21,1309151649),l=v(l,d,c,u,r[f+4],6,-145523070),u=v(u,l,d,c,r[f+11],10,-1120210379),c=v(c,u,l,d,r[f+2],15,718787259),d=v(d,c,u,l,r[f+9],21,-343485551),l=l+_>>>0,d=d+y>>>0,c=c+b>>>0,u=u+x>>>0}return i.endian([l,d,c,u])})._ff=function(t,e,r,i,a,n,s){var o=t+(e&r|~e&i)+(a>>>0)+s;return(o<<n|o>>>32-n)+e},o._gg=function(t,e,r,i,a,n,s){var o=t+(e&i|r&~i)+(a>>>0)+s;return(o<<n|o>>>32-n)+e},o._hh=function(t,e,r,i,a,n,s){var o=t+(e^r^i)+(a>>>0)+s;return(o<<n|o>>>32-n)+e},o._ii=function(t,e,r,i,a,n,s){var o=t+(r^(e|~i))+(a>>>0)+s;return(o<<n|o>>>32-n)+e},o._blocksize=16,o._digestsize=16,t.exports=function(t,e){if(null==t)throw Error("Illegal argument "+t);var r=i.wordsToBytes(o(t,e));return e&&e.asBytes?r:e&&e.asString?s.bytesToString(r):i.bytesToHex(r)}},31955:function(t,e,r){"use strict";/*! js-cookie v3.0.5 | MIT */function i(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)t[i]=r[i]}return t}r.d(e,{Z:function(){return a}});var a=function t(e,r){function a(t,a,n){if("undefined"!=typeof document){"number"==typeof(n=i({},r,n)).expires&&(n.expires=new Date(Date.now()+864e5*n.expires)),n.expires&&(n.expires=n.expires.toUTCString()),t=encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var s="";for(var o in n)n[o]&&(s+="; "+o,!0!==n[o]&&(s+="="+n[o].split(";")[0]));return document.cookie=t+"="+e.write(a,t)+s}}return Object.create({set:a,get:function(t){if("undefined"!=typeof document&&(!arguments.length||t)){for(var r=document.cookie?document.cookie.split("; "):[],i={},a=0;a<r.length;a++){var n=r[a].split("="),s=n.slice(1).join("=");try{var o=decodeURIComponent(n[0]);if(i[o]=e.read(s,o),t===o)break}catch(t){}}return t?i[t]:i}},remove:function(t,e){a(t,"",i({},e,{expires:-1}))},withAttributes:function(e){return t(this.converter,i({},this.attributes,e))},withConverter:function(e){return t(i({},this.converter,e),this.attributes)}},{attributes:{value:Object.freeze(r)},converter:{value:Object.freeze(e)}})}({read:function(t){return'"'===t[0]&&(t=t.slice(1,-1)),t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(t){return encodeURIComponent(t).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})},76830:function(t,e,r){"use strict";r.d(e,{D:function(){return a}});var i=r(98116);function a(){var t=2==arguments.length?{source:arguments.length<=0?void 0:arguments[0],timeout:arguments.length<=1?void 0:arguments[1]}:arguments.length<=0?void 0:arguments[0],{source:e,timeout:r,target:a,name:n}=t;if(!i.is.unit(e))throw TypeError("source must be unit from effector");if(i.is.domain(e,{sid:"jsc7s2"}))throw TypeError("source cannot be domain");var s=function(t){if(i.is.store(t,{sid:"-21qm2b"}))return t;if("number"==typeof t){if(t<0||!Number.isFinite(t))throw Error('timeout must be positive number or zero. Received: "'.concat(t,'"'));return(0,i.MT)(t,{and:{name:"$timeout"},sid:"kbepy4"})}throw TypeError('timeout parameter in interval method should be number or Store. "'.concat(typeof t,'" was passed'))}(r),o=(0,i.yM)({name:"saveCancel",sid:"-kec0n3"}),h=(0,i.MT)([],{and:{serialize:"ignore"},name:"$canceller",sid:"-tfm9fg"}).on(o,(t,e)=>e),l=null!=a?a:(0,i.yM)({name:"tick",sid:"-50e2rn"}),d=(0,i.ub)({and:{name:n||"debounce(".concat((null==e?void 0:e.shortName)||e.kind,") effect"),source:h,effect(t,e){var[r,i]=t;return r&&clearTimeout(r),i&&i(),new Promise((t,r)=>{o([setTimeout(t,e),r])})}},or:{name:"timerFx",sid:"-jwso4j"}});h.reset(d.done);var c=(0,i.MT)([],{and:{serialize:"ignore",skipVoid:!1},name:"$payload",sid:"-x9cllg"}).on(e,(t,e)=>[e]),u=(0,i.MT)(!0,{and:{serialize:"ignore"},name:"$canTick",sid:"8r2952"}),f=(0,i.yM)({name:"triggerTick",sid:"-781myl"});u.on(f,()=>!1).on([l,s,d],()=>!0);var g=(0,i.TS)([e,(0,i.UP)({and:[{clock:s,filter:d.pending}],or:{name:"requestTick",sid:"-khrpxp"}})],{name:"requestTick",sid:"2k0852"});return(0,i.UP)({and:[{clock:g,filter:u,target:f}],or:{sid:"-31h8q8"}}),(0,i.UP)({and:[{source:s,clock:f,target:d}],or:{sid:"-2y6h62"}}),(0,i.UP)({and:[{source:c,clock:d.done,fn:t=>{var[e]=t;return e},target:l}],or:{sid:"-2jc15b"}}),l}}}]);